import { digs } from "diggerize";
import inputWrapper from "../inputs/input-wrapper.js";
import { Input } from "../inputs/input.js";
import InvalidFeedback from "./invalid-feedback.js";
import memo from "set-state-compare/build/memo.js";
import Money from "../inputs/money.js";
import PropTypes from "prop-types";
import React from "react";
import { shapeComponent, ShapeComponent } from "set-state-compare/build/shape-component.js";
const ApiMakerBootstrapInput = memo(shapeComponent(class ApiMakerBootstrapInput extends ShapeComponent {
    static propTypes = {
        append: PropTypes.any,
        appendText: PropTypes.any,
        attribute: PropTypes.string,
        className: PropTypes.string,
        currenciesCollection: PropTypes.array,
        currencyName: PropTypes.string,
        hint: PropTypes.any,
        hintBottom: PropTypes.any,
        id: PropTypes.string,
        label: PropTypes.any,
        labelClassName: PropTypes.string,
        model: PropTypes.object,
        name: PropTypes.string,
        placeholder: PropTypes.any,
        prepend: PropTypes.any,
        prependText: PropTypes.any,
        small: PropTypes.bool,
        type: PropTypes.string,
        wrapperClassName: PropTypes.string
    };
    render() {
        const { append, appendText, attribute, className, currenciesCollection, currencyName, hint, hintBottom, id, inputClassName, inputProps, inputRef, label, labelClassName, model, name, prepend, prependText, type, wrapperClassName, wrapperOpts, ...restProps } = this.props;
        const { ref, ...forwardedInputProps } = inputProps;
        const { errors } = digs(wrapperOpts, "errors");
        return (<div className={this.wrapperClassName()} ref={this.props.wrapperRef}>
        {wrapperOpts.label &&
                <label className={this.labelClassName()} htmlFor={inputProps.id}>
            {wrapperOpts.label}
          </label>}
        {hint &&
                <span className="form-text text-muted font-smoothing font-xs">
            {hint}
          </span>}
        {type == "money" &&
                <Money name={inputProps.name} className={this.inputClassName()} ref={this.props.moneyRef} {...this.moneyProps()}/>}
        {type != "money" &&
                <div className="input-group">
            {(prepend || prependText) &&
                        <div className="input-group-prepend">
                {prependText &&
                                <span className="input-group-text">
                    {prependText}
                  </span>}
                {prepend}
              </div>}
            <Input attribute={attribute} className={this.inputClassName()} inputProps={inputProps} model={model} wrapperOpts={wrapperOpts} {...forwardedInputProps} {...restProps}/>
            {(append || appendText) &&
                        <div className="input-group-append">
                {appendText &&
                                <span className="input-group-text">
                    {appendText}
                  </span>}
                {append}
              </div>}
            {errors.length > 0 && <InvalidFeedback errors={errors}/>}
          </div>}
        {hintBottom &&
                <span className="form-text text-muted font-smoothing font-xs">
            {hintBottom}
          </span>}
      </div>);
    }
    inputClassName() {
        const classNames = ["form-control"];
        if (this.props.className)
            classNames.push(this.props.className);
        if (this.props.wrapperOpts.errors.length > 0)
            classNames.push("is-invalid");
        return classNames.join(" ");
    }
    labelClassName() {
        const classNames = [];
        if (this.props.labelClassName)
            classNames.push(this.props.labelClassName);
        return classNames.join(" ");
    }
    moneyProps() {
        const moneyProps = {};
        const forwardedProps = ["attribute", "currenciesCollection", "currencyName", "model", "onChange", "placeholder", "small"];
        for (const forwardedProp of forwardedProps) {
            if (forwardedProp in this.props)
                moneyProps[forwardedProp] = this.props[forwardedProp];
        }
        const forwardedInputProps = ["defaultValue"];
        for (const forwardedInputProp of forwardedInputProps) {
            if (forwardedInputProp in this.props.inputProps)
                moneyProps[forwardedInputProp] = this.props.inputProps[forwardedInputProp];
        }
        return moneyProps;
    }
    wrapperClassName() {
        const classNames = ["form-group", "component-bootstrap-string-input"];
        if (this.props.wrapperClassName)
            classNames.push(this.props.wrapperClassName);
        return classNames.join(" ");
    }
}));
export default inputWrapper(ApiMakerBootstrapInput);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQuanMiLCJzb3VyY2VSb290IjoiL3NyYy8iLCJzb3VyY2VzIjpbImJvb3RzdHJhcC9pbnB1dC5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFDLElBQUksRUFBQyxNQUFNLFdBQVcsQ0FBQTtBQUM5QixPQUFPLFlBQVksTUFBTSw0QkFBNEIsQ0FBQTtBQUNyRCxPQUFPLEVBQUMsS0FBSyxFQUFDLE1BQU0sb0JBQW9CLENBQUE7QUFDeEMsT0FBTyxlQUFlLE1BQU0sdUJBQXVCLENBQUE7QUFDbkQsT0FBTyxJQUFJLE1BQU0saUNBQWlDLENBQUE7QUFDbEQsT0FBTyxLQUFLLE1BQU0sb0JBQW9CLENBQUE7QUFDdEMsT0FBTyxTQUFTLE1BQU0sWUFBWSxDQUFBO0FBQ2xDLE9BQU8sS0FBSyxNQUFNLE9BQU8sQ0FBQTtBQUN6QixPQUFPLEVBQUMsY0FBYyxFQUFFLGNBQWMsRUFBQyxNQUFNLDRDQUE0QyxDQUFBO0FBRXpGLE1BQU0sc0JBQXNCLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLHNCQUF1QixTQUFRLGNBQWM7SUFDcEcsTUFBTSxDQUFDLFNBQVMsR0FBRztRQUNqQixNQUFNLEVBQUUsU0FBUyxDQUFDLEdBQUc7UUFDckIsVUFBVSxFQUFFLFNBQVMsQ0FBQyxHQUFHO1FBQ3pCLFNBQVMsRUFBRSxTQUFTLENBQUMsTUFBTTtRQUMzQixTQUFTLEVBQUUsU0FBUyxDQUFDLE1BQU07UUFDM0Isb0JBQW9CLEVBQUUsU0FBUyxDQUFDLEtBQUs7UUFDckMsWUFBWSxFQUFFLFNBQVMsQ0FBQyxNQUFNO1FBQzlCLElBQUksRUFBRSxTQUFTLENBQUMsR0FBRztRQUNuQixVQUFVLEVBQUUsU0FBUyxDQUFDLEdBQUc7UUFDekIsRUFBRSxFQUFFLFNBQVMsQ0FBQyxNQUFNO1FBQ3BCLEtBQUssRUFBRSxTQUFTLENBQUMsR0FBRztRQUNwQixjQUFjLEVBQUUsU0FBUyxDQUFDLE1BQU07UUFDaEMsS0FBSyxFQUFFLFNBQVMsQ0FBQyxN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QyxDQUFDLENBQUE7QUFFSCxlQUFlLFlBQVksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtkaWdzfSBmcm9tIFwiZGlnZ2VyaXplXCJcbmltcG9ydCBpbnB1dFdyYXBwZXIgZnJvbSBcIi4uL2lucHV0cy9pbnB1dC13cmFwcGVyLmpzXCJcbmltcG9ydCB7SW5wdXR9IGZyb20gXCIuLi9pbnB1dHMvaW5wdXQuanNcIlxuaW1wb3J0IEludmFsaWRGZWVkYmFjayBmcm9tIFwiLi9pbnZhbGlkLWZlZWRiYWNrLmpzXCJcbmltcG9ydCBtZW1vIGZyb20gXCJzZXQtc3RhdGUtY29tcGFyZS9idWlsZC9tZW1vLmpzXCJcbmltcG9ydCBNb25leSBmcm9tIFwiLi4vaW5wdXRzL21vbmV5LmpzXCJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIlxuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiXG5pbXBvcnQge3NoYXBlQ29tcG9uZW50LCBTaGFwZUNvbXBvbmVudH0gZnJvbSBcInNldC1zdGF0ZS1jb21wYXJlL2J1aWxkL3NoYXBlLWNvbXBvbmVudC5qc1wiXG5cbmNvbnN0IEFwaU1ha2VyQm9vdHN0cmFwSW5wdXQgPSBtZW1vKHNoYXBlQ29tcG9uZW50KGNsYXNzIEFwaU1ha2VyQm9vdHN0cmFwSW5wdXQgZXh0ZW5kcyBTaGFwZUNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgYXBwZW5kOiBQcm9wVHlwZXMuYW55LFxuICAgIGFwcGVuZFRleHQ6IFByb3BUeXBlcy5hbnksXG4gICAgYXR0cmlidXRlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBjdXJyZW5jaWVzQ29sbGVjdGlvbjogUHJvcFR5cGVzLmFycmF5LFxuICAgIGN1cnJlbmN5TmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBoaW50OiBQcm9wVHlwZXMuYW55LFxuICAgIGhpbnRCb3R0b206IFByb3BUeXBlcy5hbnksXG4gICAgaWQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgbGFiZWw6IFByb3BUeXBlcy5hbnksXG4gICAgbGFiZWxDbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgbW9kZWw6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgbmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBwbGFjZWhvbGRlcjogUHJvcFR5cGVzLmFueSxcbiAgICBwcmVwZW5kOiBQcm9wVHlwZXMuYW55LFxuICAgIHByZXBlbmRUZXh0OiBQcm9wVHlwZXMuYW55LFxuICAgIHNtYWxsOiBQcm9wVHlwZXMuYm9vbCxcbiAgICB0eXBlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHdyYXBwZXJDbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmdcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3Qge1xuICAgICAgYXBwZW5kLFxuICAgICAgYXBwZW5kVGV4dCxcbiAgICAgIGF0dHJpYnV0ZSxcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIGN1cnJlbmNpZXNDb2xsZWN0aW9uLFxuICAgICAgY3VycmVuY3lOYW1lLFxuICAgICAgaGludCxcbiAgICAgIGhpbnRCb3R0b20sXG4gICAgICBpZCxcbiAgICAgIGlucHV0Q2xhc3NOYW1lLFxuICAgICAgaW5wdXRQcm9wcyxcbiAgICAgIGlucHV0UmVmLFxuICAgICAgbGFiZWwsXG4gICAgICBsYWJlbENsYXNzTmFtZSxcbiAgICAgIG1vZGVsLFxuICAgICAgbmFtZSxcbiAgICAgIHByZXBlbmQsXG4gICAgICBwcmVwZW5kVGV4dCxcbiAgICAgIHR5cGUsXG4gICAgICB3cmFwcGVyQ2xhc3NOYW1lLFxuICAgICAgd3JhcHBlck9wdHMsXG4gICAgICAuLi5yZXN0UHJvcHNcbiAgICB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHtyZWYsIC4uLmZvcndhcmRlZElucHV0UHJvcHN9ID0gaW5wdXRQcm9wc1xuICAgIGNvbnN0IHtlcnJvcnN9ID0gZGlncyh3cmFwcGVyT3B0cywgXCJlcnJvcnNcIilcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17dGhpcy53cmFwcGVyQ2xhc3NOYW1lKCl9IHJlZj17dGhpcy5wcm9wcy53cmFwcGVyUmVmfT5cbiAgICAgICAge3dyYXBwZXJPcHRzLmxhYmVsICYmXG4gICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT17dGhpcy5sYWJlbENsYXNzTmFtZSgpfSBodG1sRm9yPXtpbnB1dFByb3BzLmlkfT5cbiAgICAgICAgICAgIHt3cmFwcGVyT3B0cy5sYWJlbH1cbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICB9XG4gICAgICAgIHtoaW50ICYmXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9ybS10ZXh0IHRleHQtbXV0ZWQgZm9udC1zbW9vdGhpbmcgZm9udC14c1wiPlxuICAgICAgICAgICAge2hpbnR9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICB9XG4gICAgICAgIHt0eXBlID09IFwibW9uZXlcIiAmJlxuICAgICAgICAgIDxNb25leVxuICAgICAgICAgICAgbmFtZT17aW5wdXRQcm9wcy5uYW1lfVxuICAgICAgICAgICAgY2xhc3NOYW1lPXt0aGlzLmlucHV0Q2xhc3NOYW1lKCl9XG4gICAgICAgICAgICByZWY9e3RoaXMucHJvcHMubW9uZXlSZWZ9XG4gICAgICAgICAgICB7Li4udGhpcy5tb25leVByb3BzKCl9XG4gICAgICAgICAgLz5cbiAgICAgICAgfVxuICAgICAgICB7dHlwZSAhPSBcIm1vbmV5XCIgJiZcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlucHV0LWdyb3VwXCI+XG4gICAgICAgICAgICB7KHByZXBlbmQgfHwgcHJlcGVuZFRleHQpICYmXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5wdXQtZ3JvdXAtcHJlcGVuZFwiPlxuICAgICAgICAgICAgICAgIHtwcmVwZW5kVGV4dCAmJlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaW5wdXQtZ3JvdXAtdGV4dFwiPlxuICAgICAgICAgICAgICAgICAgICB7cHJlcGVuZFRleHR9XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHtwcmVwZW5kfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICBhdHRyaWJ1dGU9e2F0dHJpYnV0ZX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXt0aGlzLmlucHV0Q2xhc3NOYW1lKCl9XG4gICAgICAgICAgICAgIGlucHV0UHJvcHM9e2lucHV0UHJvcHN9XG4gICAgICAgICAgICAgIG1vZGVsPXttb2RlbH1cbiAgICAgICAgICAgICAgd3JhcHBlck9wdHM9e3dyYXBwZXJPcHRzfVxuICAgICAgICAgICAgICB7Li4uZm9yd2FyZGVkSW5wdXRQcm9wc31cbiAgICAgICAgICAgICAgey4uLnJlc3RQcm9wc31cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB7KGFwcGVuZCB8fCBhcHBlbmRUZXh0KSAmJlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlucHV0LWdyb3VwLWFwcGVuZFwiPlxuICAgICAgICAgICAgICAgIHthcHBlbmRUZXh0ICYmXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJpbnB1dC1ncm91cC10ZXh0XCI+XG4gICAgICAgICAgICAgICAgICAgIHthcHBlbmRUZXh0fVxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB7YXBwZW5kfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHtlcnJvcnMubGVuZ3RoID4gMCAmJiA8SW52YWxpZEZlZWRiYWNrIGVycm9ycz17ZXJyb3JzfSAvPn1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgfVxuICAgICAgICB7aGludEJvdHRvbSAmJlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvcm0tdGV4dCB0ZXh0LW11dGVkIGZvbnQtc21vb3RoaW5nIGZvbnQteHNcIj5cbiAgICAgICAgICAgIHtoaW50Qm90dG9tfVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgfVxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG5cbiAgaW5wdXRDbGFzc05hbWUgKCkge1xuICAgIGNvbnN0IGNsYXNzTmFtZXMgPSBbXCJmb3JtLWNvbnRyb2xcIl1cblxuICAgIGlmICh0aGlzLnByb3BzLmNsYXNzTmFtZSlcbiAgICAgIGNsYXNzTmFtZXMucHVzaCh0aGlzLnByb3BzLmNsYXNzTmFtZSlcblxuICAgIGlmICh0aGlzLnByb3BzLndyYXBwZXJPcHRzLmVycm9ycy5sZW5ndGggPiAwKVxuICAgICAgY2xhc3NOYW1lcy5wdXNoKFwiaXMtaW52YWxpZFwiKVxuXG4gICAgcmV0dXJuIGNsYXNzTmFtZXMuam9pbihcIiBcIilcbiAgfVxuXG4gIGxhYmVsQ2xhc3NOYW1lICgpIHtcbiAgICBjb25zdCBjbGFzc05hbWVzID0gW11cblxuICAgIGlmICh0aGlzLnByb3BzLmxhYmVsQ2xhc3NOYW1lKVxuICAgICAgY2xhc3NOYW1lcy5wdXNoKHRoaXMucHJvcHMubGFiZWxDbGFzc05hbWUpXG5cbiAgICByZXR1cm4gY2xhc3NOYW1lcy5qb2luKFwiIFwiKVxuICB9XG5cbiAgbW9uZXlQcm9wcygpIHtcbiAgICBjb25zdCBtb25leVByb3BzID0ge31cbiAgICBjb25zdCBmb3J3YXJkZWRQcm9wcyA9IFtcImF0dHJpYnV0ZVwiLCBcImN1cnJlbmNpZXNDb2xsZWN0aW9uXCIsIFwiY3VycmVuY3lOYW1lXCIsIFwibW9kZWxcIiwgXCJvbkNoYW5nZVwiLCBcInBsYWNlaG9sZGVyXCIsIFwic21hbGxcIl1cblxuICAgIGZvciAoY29uc3QgZm9yd2FyZGVkUHJvcCBvZiBmb3J3YXJkZWRQcm9wcykge1xuICAgICAgaWYgKGZvcndhcmRlZFByb3AgaW4gdGhpcy5wcm9wcykgbW9uZXlQcm9wc1tmb3J3YXJkZWRQcm9wXSA9IHRoaXMucHJvcHNbZm9yd2FyZGVkUHJvcF1cbiAgICB9XG5cbiAgICBjb25zdCBmb3J3YXJkZWRJbnB1dFByb3BzID0gW1wiZGVmYXVsdFZhbHVlXCJdXG5cbiAgICBmb3IgKGNvbnN0IGZvcndhcmRlZElucHV0UHJvcCBvZiBmb3J3YXJkZWRJbnB1dFByb3BzKSB7XG4gICAgICBpZiAoZm9yd2FyZGVkSW5wdXRQcm9wIGluIHRoaXMucHJvcHMuaW5wdXRQcm9wcykgbW9uZXlQcm9wc1tmb3J3YXJkZWRJbnB1dFByb3BdID0gdGhpcy5wcm9wcy5pbnB1dFByb3BzW2ZvcndhcmRlZElucHV0UHJvcF1cbiAgICB9XG5cbiAgICByZXR1cm4gbW9uZXlQcm9wc1xuICB9XG5cbiAgd3JhcHBlckNsYXNzTmFtZSAoKSB7XG4gICAgY29uc3QgY2xhc3NOYW1lcyA9IFtcImZvcm0tZ3JvdXBcIiwgXCJjb21wb25lbnQtYm9vdHN0cmFwLXN0cmluZy1pbnB1dFwiXVxuXG4gICAgaWYgKHRoaXMucHJvcHMud3JhcHBlckNsYXNzTmFtZSlcbiAgICAgIGNsYXNzTmFtZXMucHVzaCh0aGlzLnByb3BzLndyYXBwZXJDbGFzc05hbWUpXG5cbiAgICByZXR1cm4gY2xhc3NOYW1lcy5qb2luKFwiIFwiKVxuICB9XG59KSlcblxuZXhwb3J0IGRlZmF1bHQgaW5wdXRXcmFwcGVyKEFwaU1ha2VyQm9vdHN0cmFwSW5wdXQpXG4iXX0=