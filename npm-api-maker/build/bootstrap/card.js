import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import BaseComponent from "../base-component";
import classNames from "classnames";
import { digg, digs } from "diggerize";
import memo from "set-state-compare/build/memo.js";
import PropTypes from "prop-types";
import React, { useRef } from "react";
import { shapeComponent } from "set-state-compare/build/shape-component.js";
export default memo(shapeComponent(class ApiMakerBootstrapCard extends BaseComponent {
    static defaultProps = {
        defaultExpanded: true,
        expandable: false,
        expandableHide: false,
        responsiveTable: true,
        table: false
    };
    static propTypes = {
        cardRef: PropTypes.object,
        className: PropTypes.string,
        children: PropTypes.any,
        controls: PropTypes.any,
        defaultExpanded: PropTypes.bool.isRequired,
        expandable: PropTypes.bool.isRequired,
        expandableHide: PropTypes.bool.isRequired,
        footer: PropTypes.any,
        header: PropTypes.any,
        striped: PropTypes.bool,
        responsiveTable: PropTypes.bool.isRequired,
        table: PropTypes.bool.isRequired
    };
    setup() {
        this.cardRef = useRef();
        this.useStates({
            expanded: this.props.defaultExpanded
        });
    }
    render() {
        const { cardRef, children, className, controls, defaultExpanded, expandable, expandableHide, footer, header, responsiveTable, striped, table, ...restProps } = this.props;
        const { expanded } = digs(this.state, "expanded");
        const cardHeaderStyle = { display: "flex" };
        const cardRefToUse = cardRef || this.cardRef;
        if (!expanded)
            cardHeaderStyle["borderBottom"] = "0";
        return (_jsxs("div", { className: classNames("component-bootstrap-card", "card", "card-default", className), "data-has-footer": Boolean(footer), ref: cardRefToUse, ...restProps, children: [(controls || expandable || header) &&
                    _jsxs("div", { className: "card-header", style: cardHeaderStyle, children: [_jsx("div", { className: "card-header-label", style: { alignSelf: "center", marginRight: "auto" }, children: header }), (controls || expandable) &&
                                _jsxs("div", { className: "card-header-actions", style: { alignSelf: "center" }, children: [controls, expandable && expanded &&
                                            _jsx("a", { className: "collapse-card-button text-muted", href: "#", onClick: digg(this, "onCollapseClicked"), children: _jsx("i", { className: "fa fa-angle-up" }) }), expandable && !expanded &&
                                            _jsx("a", { className: "expand-card-button text-muted", href: "#", onClick: digg(this, "onExpandClicked"), children: _jsx("i", { className: "fa fa-angle-down" }) })] })] }), (expanded || expandableHide) &&
                    _jsxs("div", { className: this.bodyClassNames(), children: [table &&
                                _jsx("table", { className: this.tableClassNames(), children: children }), !table && children] }), footer &&
                    _jsx("div", { className: "card-footer", children: footer })] }));
    }
    bodyClassNames() {
        const { expandableHide, responsiveTable, table } = digs(this.props, "expandableHide", "responsiveTable", "table");
        const { expanded } = digs(this.state, "expanded");
        const classNames = ["card-body"];
        if (!expanded && expandableHide) {
            classNames.push("d-none");
        }
        if (table) {
            if (responsiveTable) {
                classNames.push("table-responsive");
            }
            classNames.push("p-0");
        }
        return classNames.join(" ");
    }
    onCollapseClicked = (e) => {
        e.preventDefault();
        this.setState({ expanded: false });
    };
    onExpandClicked = (e) => {
        e.preventDefault();
        this.setState({ expanded: true });
    };
    tableClassNames() {
        const classNames = ["table", "table-hover", "mb-0", "w-100"];
        if (this.props.striped)
            classNames.push("table-striped");
        return classNames.join(" ");
    }
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FyZC5qcyIsInNvdXJjZVJvb3QiOiIvc3JjLyIsInNvdXJjZXMiOlsiYm9vdHN0cmFwL2NhcmQuanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLGFBQWEsTUFBTSxtQkFBbUIsQ0FBQTtBQUM3QyxPQUFPLFVBQVUsTUFBTSxZQUFZLENBQUE7QUFDbkMsT0FBTyxFQUFDLElBQUksRUFBRSxJQUFJLEVBQUMsTUFBTSxXQUFXLENBQUE7QUFDcEMsT0FBTyxJQUFJLE1BQU0saUNBQWlDLENBQUE7QUFDbEQsT0FBTyxTQUFTLE1BQU0sWUFBWSxDQUFBO0FBQ2xDLE9BQU8sS0FBSyxFQUFFLEVBQUMsTUFBTSxFQUFDLE1BQU0sT0FBTyxDQUFBO0FBQ25DLE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSw0Q0FBNEMsQ0FBQTtBQUV6RSxlQUFlLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxxQkFBc0IsU0FBUSxhQUFhO0lBQ2xGLE1BQU0sQ0FBQyxZQUFZLEdBQUc7UUFDcEIsZUFBZSxFQUFFLElBQUk7UUFDckIsVUFBVSxFQUFFLEtBQUs7UUFDakIsY0FBYyxFQUFFLEtBQUs7UUFDckIsZUFBZSxFQUFFLElBQUk7UUFDckIsS0FBSyxFQUFFLEtBQUs7S0FDYixDQUFBO0lBRUQsTUFBTSxDQUFDLFNBQVMsR0FBRztRQUNqQixPQUFPLEVBQUUsU0FBUyxDQUFDLE1BQU07UUFDekIsU0FBUyxFQUFFLFNBQVMsQ0FBQyxNQUFNO1FBQzNCLFFBQVEsRUFBRSxTQUFTLENBQUMsR0FBRztRQUN2QixRQUFRLEVBQUUsU0FBUyxDQUFDLEdBQUc7UUFDdkIsZUFBZSxFQUFFLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVTtRQUMxQyxVQUFVLEVBQUUsU0FBUyxDQUFDLElBQUksQ0FBQyxVQUFVO1FBQ3JDLGNBQWMsRUFBRSxTQUFTLENBQUMsSUFBSSxDQUFDLFVBQVU7UUFDekMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxHQUFHO1FBQ3JCLE1BQU0sRUFBRSxTQUFTLENB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QUMsQ0FBQTtRQUVsQyxPQUFPLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDN0IsQ0FBQztDQUNGLENBQUMsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VDb21wb25lbnQgZnJvbSBcIi4uL2Jhc2UtY29tcG9uZW50XCJcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gXCJjbGFzc25hbWVzXCJcbmltcG9ydCB7ZGlnZywgZGlnc30gZnJvbSBcImRpZ2dlcml6ZVwiXG5pbXBvcnQgbWVtbyBmcm9tIFwic2V0LXN0YXRlLWNvbXBhcmUvYnVpbGQvbWVtby5qc1wiXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCJcbmltcG9ydCBSZWFjdCwge3VzZVJlZn0gZnJvbSBcInJlYWN0XCJcbmltcG9ydCB7c2hhcGVDb21wb25lbnR9IGZyb20gXCJzZXQtc3RhdGUtY29tcGFyZS9idWlsZC9zaGFwZS1jb21wb25lbnQuanNcIlxuXG5leHBvcnQgZGVmYXVsdCBtZW1vKHNoYXBlQ29tcG9uZW50KGNsYXNzIEFwaU1ha2VyQm9vdHN0cmFwQ2FyZCBleHRlbmRzIEJhc2VDb21wb25lbnQge1xuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIGRlZmF1bHRFeHBhbmRlZDogdHJ1ZSxcbiAgICBleHBhbmRhYmxlOiBmYWxzZSxcbiAgICBleHBhbmRhYmxlSGlkZTogZmFsc2UsXG4gICAgcmVzcG9uc2l2ZVRhYmxlOiB0cnVlLFxuICAgIHRhYmxlOiBmYWxzZVxuICB9XG5cbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBjYXJkUmVmOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBjaGlsZHJlbjogUHJvcFR5cGVzLmFueSxcbiAgICBjb250cm9sczogUHJvcFR5cGVzLmFueSxcbiAgICBkZWZhdWx0RXhwYW5kZWQ6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gICAgZXhwYW5kYWJsZTogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICBleHBhbmRhYmxlSGlkZTogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICBmb290ZXI6IFByb3BUeXBlcy5hbnksXG4gICAgaGVhZGVyOiBQcm9wVHlwZXMuYW55LFxuICAgIHN0cmlwZWQ6IFByb3BUeXBlcy5ib29sLFxuICAgIHJlc3BvbnNpdmVUYWJsZTogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICB0YWJsZTogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZFxuICB9XG5cbiAgc2V0dXAoKSB7XG4gICAgdGhpcy5jYXJkUmVmID0gdXNlUmVmKClcblxuICAgIHRoaXMudXNlU3RhdGVzKHtcbiAgICAgIGV4cGFuZGVkOiB0aGlzLnByb3BzLmRlZmF1bHRFeHBhbmRlZFxuICAgIH0pXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGNhcmRSZWYsXG4gICAgICBjaGlsZHJlbixcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIGNvbnRyb2xzLFxuICAgICAgZGVmYXVsdEV4cGFuZGVkLFxuICAgICAgZXhwYW5kYWJsZSxcbiAgICAgIGV4cGFuZGFibGVIaWRlLFxuICAgICAgZm9vdGVyLFxuICAgICAgaGVhZGVyLFxuICAgICAgcmVzcG9uc2l2ZVRhYmxlLFxuICAgICAgc3RyaXBlZCxcbiAgICAgIHRhYmxlLFxuICAgICAgLi4ucmVzdFByb3BzXG4gICAgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB7ZXhwYW5kZWR9ID0gZGlncyh0aGlzLnN0YXRlLCBcImV4cGFuZGVkXCIpXG4gICAgY29uc3QgY2FyZEhlYWRlclN0eWxlID0ge2Rpc3BsYXk6IFwiZmxleFwifVxuICAgIGNvbnN0IGNhcmRSZWZUb1VzZSA9IGNhcmRSZWYgfHwgdGhpcy5jYXJkUmVmXG5cbiAgICBpZiAoIWV4cGFuZGVkKSBjYXJkSGVhZGVyU3R5bGVbXCJib3JkZXJCb3R0b21cIl0gPSBcIjBcIlxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFwiY29tcG9uZW50LWJvb3RzdHJhcC1jYXJkXCIsIFwiY2FyZFwiLCBcImNhcmQtZGVmYXVsdFwiLCBjbGFzc05hbWUpfVxuICAgICAgICBkYXRhLWhhcy1mb290ZXI9e0Jvb2xlYW4oZm9vdGVyKX1cbiAgICAgICAgcmVmPXtjYXJkUmVmVG9Vc2V9XG4gICAgICAgIHsuLi5yZXN0UHJvcHN9XG4gICAgICA+XG4gICAgICAgIHsoY29udHJvbHMgfHwgZXhwYW5kYWJsZSB8fCBoZWFkZXIpICYmXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWhlYWRlclwiIHN0eWxlPXtjYXJkSGVhZGVyU3R5bGV9PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWhlYWRlci1sYWJlbFwiIHN0eWxlPXt7YWxpZ25TZWxmOiBcImNlbnRlclwiLCBtYXJnaW5SaWdodDogXCJhdXRvXCJ9fT5cbiAgICAgICAgICAgICAge2hlYWRlcn1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgeyhjb250cm9scyB8fCBleHBhbmRhYmxlKSAmJlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtaGVhZGVyLWFjdGlvbnNcIiBzdHlsZT17e2FsaWduU2VsZjogXCJjZW50ZXJcIn19PlxuICAgICAgICAgICAgICAgIHtjb250cm9sc31cbiAgICAgICAgICAgICAgICB7ZXhwYW5kYWJsZSAmJiBleHBhbmRlZCAmJlxuICAgICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwiY29sbGFwc2UtY2FyZC1idXR0b24gdGV4dC1tdXRlZFwiIGhyZWY9XCIjXCIgb25DbGljaz17ZGlnZyh0aGlzLCBcIm9uQ29sbGFwc2VDbGlja2VkXCIpfT5cbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYW5nbGUtdXBcIiAvPlxuICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB7ZXhwYW5kYWJsZSAmJiAhZXhwYW5kZWQgJiZcbiAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cImV4cGFuZC1jYXJkLWJ1dHRvbiB0ZXh0LW11dGVkXCIgaHJlZj1cIiNcIiBvbkNsaWNrPXtkaWdnKHRoaXMsIFwib25FeHBhbmRDbGlja2VkXCIpfT5cbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYW5nbGUtZG93blwiIC8+XG4gICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgfVxuICAgICAgICB7KGV4cGFuZGVkIHx8IGV4cGFuZGFibGVIaWRlKSAmJlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXt0aGlzLmJvZHlDbGFzc05hbWVzKCl9PlxuICAgICAgICAgICAge3RhYmxlICYmXG4gICAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9e3RoaXMudGFibGVDbGFzc05hbWVzKCl9PlxuICAgICAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHshdGFibGUgJiYgY2hpbGRyZW59XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAge2Zvb3RlciAmJlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1mb290ZXJcIj5cbiAgICAgICAgICAgIHtmb290ZXJ9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxuXG4gIGJvZHlDbGFzc05hbWVzICgpIHtcbiAgICBjb25zdCB7ZXhwYW5kYWJsZUhpZGUsIHJlc3BvbnNpdmVUYWJsZSwgdGFibGV9ID0gZGlncyh0aGlzLnByb3BzLCBcImV4cGFuZGFibGVIaWRlXCIsIFwicmVzcG9uc2l2ZVRhYmxlXCIsIFwidGFibGVcIilcbiAgICBjb25zdCB7ZXhwYW5kZWR9ID0gZGlncyh0aGlzLnN0YXRlLCBcImV4cGFuZGVkXCIpXG4gICAgY29uc3QgY2xhc3NOYW1lcyA9IFtcImNhcmQtYm9keVwiXVxuXG4gICAgaWYgKCFleHBhbmRlZCAmJiBleHBhbmRhYmxlSGlkZSkge1xuICAgICAgY2xhc3NOYW1lcy5wdXNoKFwiZC1ub25lXCIpXG4gICAgfVxuXG4gICAgaWYgKHRhYmxlKSB7XG4gICAgICBpZiAocmVzcG9uc2l2ZVRhYmxlKXtcbiAgICAgICAgY2xhc3NOYW1lcy5wdXNoKFwidGFibGUtcmVzcG9uc2l2ZVwiKVxuICAgICAgfVxuXG4gICAgICBjbGFzc05hbWVzLnB1c2goXCJwLTBcIilcbiAgICB9XG5cbiAgICByZXR1cm4gY2xhc3NOYW1lcy5qb2luKFwiIFwiKVxuICB9XG5cbiAgb25Db2xsYXBzZUNsaWNrZWQgPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHRoaXMuc2V0U3RhdGUoe2V4cGFuZGVkOiBmYWxzZX0pXG4gIH1cblxuICBvbkV4cGFuZENsaWNrZWQgPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHRoaXMuc2V0U3RhdGUoe2V4cGFuZGVkOiB0cnVlfSlcbiAgfVxuXG4gIHRhYmxlQ2xhc3NOYW1lcyAoKSB7XG4gICAgY29uc3QgY2xhc3NOYW1lcyA9IFtcInRhYmxlXCIsIFwidGFibGUtaG92ZXJcIiwgXCJtYi0wXCIsIFwidy0xMDBcIl1cblxuICAgIGlmICh0aGlzLnByb3BzLnN0cmlwZWQpXG4gICAgICBjbGFzc05hbWVzLnB1c2goXCJ0YWJsZS1zdHJpcGVkXCIpXG5cbiAgICByZXR1cm4gY2xhc3NOYW1lcy5qb2luKFwiIFwiKVxuICB9XG59KSlcbiJdfQ==