import BaseComponent from "../base-component.js";
import classNames from "classnames";
import { digg, digs } from "diggerize";
import memo from "set-state-compare/build/memo.js";
import PropTypes from "prop-types";
import React, { useRef } from "react";
import { shapeComponent } from "set-state-compare/build/shape-component.js";
export default memo(shapeComponent(class ApiMakerBootstrapCard extends BaseComponent {
    static defaultProps = {
        defaultExpanded: true,
        expandable: false,
        expandableHide: false,
        responsiveTable: true,
        table: false
    };
    static propTypes = {
        cardRef: PropTypes.object,
        className: PropTypes.string,
        children: PropTypes.any,
        controls: PropTypes.any,
        defaultExpanded: PropTypes.bool.isRequired,
        expandable: PropTypes.bool.isRequired,
        expandableHide: PropTypes.bool.isRequired,
        footer: PropTypes.any,
        header: PropTypes.any,
        striped: PropTypes.bool,
        responsiveTable: PropTypes.bool.isRequired,
        table: PropTypes.bool.isRequired
    };
    setup() {
        this.cardRef = useRef();
        this.useStates({
            expanded: this.props.defaultExpanded
        });
    }
    render() {
        const { cardRef, children, className, controls, defaultExpanded, expandable, expandableHide, footer, header, responsiveTable, striped, table, ...restProps } = this.props;
        const { expanded } = digs(this.state, "expanded");
        const cardHeaderStyle = { display: "flex" };
        const cardRefToUse = cardRef || this.cardRef;
        if (!expanded)
            cardHeaderStyle["borderBottom"] = "0";
        return (<div className={classNames("component-bootstrap-card", "card", "card-default", className)} data-has-footer={Boolean(footer)} ref={cardRefToUse} {...restProps}>
        {(controls || expandable || header) &&
                <div className="card-header" style={cardHeaderStyle}>
            <div className="card-header-label" style={{ alignSelf: "center", marginRight: "auto" }}>
              {header}
            </div>
            {(controls || expandable) &&
                        <div className="card-header-actions" style={{ alignSelf: "center" }}>
                {controls}
                {expandable && expanded &&
                                <a className="collapse-card-button text-muted" href="#" onClick={digg(this, "onCollapseClicked")}>
                    <i className="fa fa-angle-up"/>
                  </a>}
                {expandable && !expanded &&
                                <a className="expand-card-button text-muted" href="#" onClick={digg(this, "onExpandClicked")}>
                    <i className="fa fa-angle-down"/>
                  </a>}
              </div>}
          </div>}
        {(expanded || expandableHide) &&
                <div className={this.bodyClassNames()}>
            {table &&
                        <table className={this.tableClassNames()}>
                {children}
              </table>}
            {!table && children}
          </div>}
        {footer &&
                <div className="card-footer">
            {footer}
          </div>}
      </div>);
    }
    bodyClassNames() {
        const { expandableHide, responsiveTable, table } = digs(this.props, "expandableHide", "responsiveTable", "table");
        const { expanded } = digs(this.state, "expanded");
        const classNames = ["card-body"];
        if (!expanded && expandableHide) {
            classNames.push("d-none");
        }
        if (table) {
            if (responsiveTable) {
                classNames.push("table-responsive");
            }
            classNames.push("p-0");
        }
        return classNames.join(" ");
    }
    onCollapseClicked = (e) => {
        e.preventDefault();
        this.setState({ expanded: false });
    };
    onExpandClicked = (e) => {
        e.preventDefault();
        this.setState({ expanded: true });
    };
    tableClassNames() {
        const classNames = ["table", "table-hover", "mb-0", "w-100"];
        if (this.props.striped)
            classNames.push("table-striped");
        return classNames.join(" ");
    }
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FyZC5qcyIsInNvdXJjZVJvb3QiOiIvc3JjLyIsInNvdXJjZXMiOlsiYm9vdHN0cmFwL2NhcmQuanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sYUFBYSxNQUFNLHNCQUFzQixDQUFBO0FBQ2hELE9BQU8sVUFBVSxNQUFNLFlBQVksQ0FBQTtBQUNuQyxPQUFPLEVBQUMsSUFBSSxFQUFFLElBQUksRUFBQyxNQUFNLFdBQVcsQ0FBQTtBQUNwQyxPQUFPLElBQUksTUFBTSxpQ0FBaUMsQ0FBQTtBQUNsRCxPQUFPLFNBQVMsTUFBTSxZQUFZLENBQUE7QUFDbEMsT0FBTyxLQUFLLEVBQUUsRUFBQyxNQUFNLEVBQUMsTUFBTSxPQUFPLENBQUE7QUFDbkMsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLDRDQUE0QyxDQUFBO0FBRXpFLGVBQWUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLHFCQUFzQixTQUFRLGFBQWE7SUFDbEYsTUFBTSxDQUFDLFlBQVksR0FBRztRQUNwQixlQUFlLEVBQUUsSUFBSTtRQUNyQixVQUFVLEVBQUUsS0FBSztRQUNqQixjQUFjLEVBQUUsS0FBSztRQUNyQixlQUFlLEVBQUUsSUFBSTtRQUNyQixLQUFLLEVBQUUsS0FBSztLQUNiLENBQUE7SUFFRCxNQUFNLENBQUMsU0FBUyxHQUFHO1FBQ2pCLE9BQU8sRUFBRSxTQUFTLENBQUMsTUFBTTtRQUN6QixTQUFTLEVBQUUsU0FBUyxDQUFDLE1BQU07UUFDM0IsUUFBUSxFQUFFLFNBQVMsQ0FBQyxHQUFHO1FBQ3ZCLFFBQVEsRUFBRSxTQUFTLENBQUMsR0FBRztRQUN2QixlQUFlLEVBQUUsU0FBUyxDQUFDLElBQUksQ0FBQyxVQUFVO1FBQzFDLFVBQVUsRUFBRSxTQUFTLENBQUMsSUFBSSxDQUFDLFVBQVU7UUFDckMsY0FBYyxFQUFFLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVTtRQUN6QyxNQUFNLEVBQUUsU0FBUyxDQUFDLEdBQUc7UUFDckIsTUFBTSxFQUFFLFNBQVMsQ0FB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QVUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDeEIsQ0FBQztRQUVELE9BQU8sVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUM3QixDQUFDO0lBRUQsaUJBQWlCLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRTtRQUN4QixDQUFDLENBQUMsY0FBYyxFQUFFLENBQUE7UUFDbEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUMsQ0FBQyxDQUFBO0lBQ2xDLENBQUMsQ0FBQTtJQUVELGVBQWUsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFO1FBQ3RCLENBQUMsQ0FBQyxjQUFjLEVBQUUsQ0FBQTtRQUNsQixJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUMsUUFBUSxFQUFFLElBQUksRUFBQyxDQUFDLENBQUE7SUFDakMsQ0FBQyxDQUFBO0lBRUQsZUFBZTtRQUNiLE1BQU0sVUFBVSxHQUFHLENBQUMsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUE7UUFFNUQsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU87WUFDcEIsVUFBVSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQTtRQUVsQyxPQUFPLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDN0IsQ0FBQztDQUNGLENBQUMsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VDb21wb25lbnQgZnJvbSBcIi4uL2Jhc2UtY29tcG9uZW50LmpzXCJcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gXCJjbGFzc25hbWVzXCJcbmltcG9ydCB7ZGlnZywgZGlnc30gZnJvbSBcImRpZ2dlcml6ZVwiXG5pbXBvcnQgbWVtbyBmcm9tIFwic2V0LXN0YXRlLWNvbXBhcmUvYnVpbGQvbWVtby5qc1wiXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCJcbmltcG9ydCBSZWFjdCwge3VzZVJlZn0gZnJvbSBcInJlYWN0XCJcbmltcG9ydCB7c2hhcGVDb21wb25lbnR9IGZyb20gXCJzZXQtc3RhdGUtY29tcGFyZS9idWlsZC9zaGFwZS1jb21wb25lbnQuanNcIlxuXG5leHBvcnQgZGVmYXVsdCBtZW1vKHNoYXBlQ29tcG9uZW50KGNsYXNzIEFwaU1ha2VyQm9vdHN0cmFwQ2FyZCBleHRlbmRzIEJhc2VDb21wb25lbnQge1xuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIGRlZmF1bHRFeHBhbmRlZDogdHJ1ZSxcbiAgICBleHBhbmRhYmxlOiBmYWxzZSxcbiAgICBleHBhbmRhYmxlSGlkZTogZmFsc2UsXG4gICAgcmVzcG9uc2l2ZVRhYmxlOiB0cnVlLFxuICAgIHRhYmxlOiBmYWxzZVxuICB9XG5cbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBjYXJkUmVmOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBjaGlsZHJlbjogUHJvcFR5cGVzLmFueSxcbiAgICBjb250cm9sczogUHJvcFR5cGVzLmFueSxcbiAgICBkZWZhdWx0RXhwYW5kZWQ6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gICAgZXhwYW5kYWJsZTogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICBleHBhbmRhYmxlSGlkZTogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICBmb290ZXI6IFByb3BUeXBlcy5hbnksXG4gICAgaGVhZGVyOiBQcm9wVHlwZXMuYW55LFxuICAgIHN0cmlwZWQ6IFByb3BUeXBlcy5ib29sLFxuICAgIHJlc3BvbnNpdmVUYWJsZTogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICB0YWJsZTogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZFxuICB9XG5cbiAgc2V0dXAoKSB7XG4gICAgdGhpcy5jYXJkUmVmID0gdXNlUmVmKClcblxuICAgIHRoaXMudXNlU3RhdGVzKHtcbiAgICAgIGV4cGFuZGVkOiB0aGlzLnByb3BzLmRlZmF1bHRFeHBhbmRlZFxuICAgIH0pXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGNhcmRSZWYsXG4gICAgICBjaGlsZHJlbixcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIGNvbnRyb2xzLFxuICAgICAgZGVmYXVsdEV4cGFuZGVkLFxuICAgICAgZXhwYW5kYWJsZSxcbiAgICAgIGV4cGFuZGFibGVIaWRlLFxuICAgICAgZm9vdGVyLFxuICAgICAgaGVhZGVyLFxuICAgICAgcmVzcG9uc2l2ZVRhYmxlLFxuICAgICAgc3RyaXBlZCxcbiAgICAgIHRhYmxlLFxuICAgICAgLi4ucmVzdFByb3BzXG4gICAgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB7ZXhwYW5kZWR9ID0gZGlncyh0aGlzLnN0YXRlLCBcImV4cGFuZGVkXCIpXG4gICAgY29uc3QgY2FyZEhlYWRlclN0eWxlID0ge2Rpc3BsYXk6IFwiZmxleFwifVxuICAgIGNvbnN0IGNhcmRSZWZUb1VzZSA9IGNhcmRSZWYgfHwgdGhpcy5jYXJkUmVmXG5cbiAgICBpZiAoIWV4cGFuZGVkKSBjYXJkSGVhZGVyU3R5bGVbXCJib3JkZXJCb3R0b21cIl0gPSBcIjBcIlxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFwiY29tcG9uZW50LWJvb3RzdHJhcC1jYXJkXCIsIFwiY2FyZFwiLCBcImNhcmQtZGVmYXVsdFwiLCBjbGFzc05hbWUpfVxuICAgICAgICBkYXRhLWhhcy1mb290ZXI9e0Jvb2xlYW4oZm9vdGVyKX1cbiAgICAgICAgcmVmPXtjYXJkUmVmVG9Vc2V9XG4gICAgICAgIHsuLi5yZXN0UHJvcHN9XG4gICAgICA+XG4gICAgICAgIHsoY29udHJvbHMgfHwgZXhwYW5kYWJsZSB8fCBoZWFkZXIpICYmXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWhlYWRlclwiIHN0eWxlPXtjYXJkSGVhZGVyU3R5bGV9PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWhlYWRlci1sYWJlbFwiIHN0eWxlPXt7YWxpZ25TZWxmOiBcImNlbnRlclwiLCBtYXJnaW5SaWdodDogXCJhdXRvXCJ9fT5cbiAgICAgICAgICAgICAge2hlYWRlcn1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgeyhjb250cm9scyB8fCBleHBhbmRhYmxlKSAmJlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtaGVhZGVyLWFjdGlvbnNcIiBzdHlsZT17e2FsaWduU2VsZjogXCJjZW50ZXJcIn19PlxuICAgICAgICAgICAgICAgIHtjb250cm9sc31cbiAgICAgICAgICAgICAgICB7ZXhwYW5kYWJsZSAmJiBleHBhbmRlZCAmJlxuICAgICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwiY29sbGFwc2UtY2FyZC1idXR0b24gdGV4dC1tdXRlZFwiIGhyZWY9XCIjXCIgb25DbGljaz17ZGlnZyh0aGlzLCBcIm9uQ29sbGFwc2VDbGlja2VkXCIpfT5cbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYW5nbGUtdXBcIiAvPlxuICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB7ZXhwYW5kYWJsZSAmJiAhZXhwYW5kZWQgJiZcbiAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cImV4cGFuZC1jYXJkLWJ1dHRvbiB0ZXh0LW11dGVkXCIgaHJlZj1cIiNcIiBvbkNsaWNrPXtkaWdnKHRoaXMsIFwib25FeHBhbmRDbGlja2VkXCIpfT5cbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYW5nbGUtZG93blwiIC8+XG4gICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgfVxuICAgICAgICB7KGV4cGFuZGVkIHx8IGV4cGFuZGFibGVIaWRlKSAmJlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXt0aGlzLmJvZHlDbGFzc05hbWVzKCl9PlxuICAgICAgICAgICAge3RhYmxlICYmXG4gICAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9e3RoaXMudGFibGVDbGFzc05hbWVzKCl9PlxuICAgICAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHshdGFibGUgJiYgY2hpbGRyZW59XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAge2Zvb3RlciAmJlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1mb290ZXJcIj5cbiAgICAgICAgICAgIHtmb290ZXJ9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxuXG4gIGJvZHlDbGFzc05hbWVzICgpIHtcbiAgICBjb25zdCB7ZXhwYW5kYWJsZUhpZGUsIHJlc3BvbnNpdmVUYWJsZSwgdGFibGV9ID0gZGlncyh0aGlzLnByb3BzLCBcImV4cGFuZGFibGVIaWRlXCIsIFwicmVzcG9uc2l2ZVRhYmxlXCIsIFwidGFibGVcIilcbiAgICBjb25zdCB7ZXhwYW5kZWR9ID0gZGlncyh0aGlzLnN0YXRlLCBcImV4cGFuZGVkXCIpXG4gICAgY29uc3QgY2xhc3NOYW1lcyA9IFtcImNhcmQtYm9keVwiXVxuXG4gICAgaWYgKCFleHBhbmRlZCAmJiBleHBhbmRhYmxlSGlkZSkge1xuICAgICAgY2xhc3NOYW1lcy5wdXNoKFwiZC1ub25lXCIpXG4gICAgfVxuXG4gICAgaWYgKHRhYmxlKSB7XG4gICAgICBpZiAocmVzcG9uc2l2ZVRhYmxlKXtcbiAgICAgICAgY2xhc3NOYW1lcy5wdXNoKFwidGFibGUtcmVzcG9uc2l2ZVwiKVxuICAgICAgfVxuXG4gICAgICBjbGFzc05hbWVzLnB1c2goXCJwLTBcIilcbiAgICB9XG5cbiAgICByZXR1cm4gY2xhc3NOYW1lcy5qb2luKFwiIFwiKVxuICB9XG5cbiAgb25Db2xsYXBzZUNsaWNrZWQgPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHRoaXMuc2V0U3RhdGUoe2V4cGFuZGVkOiBmYWxzZX0pXG4gIH1cblxuICBvbkV4cGFuZENsaWNrZWQgPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHRoaXMuc2V0U3RhdGUoe2V4cGFuZGVkOiB0cnVlfSlcbiAgfVxuXG4gIHRhYmxlQ2xhc3NOYW1lcyAoKSB7XG4gICAgY29uc3QgY2xhc3NOYW1lcyA9IFtcInRhYmxlXCIsIFwidGFibGUtaG92ZXJcIiwgXCJtYi0wXCIsIFwidy0xMDBcIl1cblxuICAgIGlmICh0aGlzLnByb3BzLnN0cmlwZWQpXG4gICAgICBjbGFzc05hbWVzLnB1c2goXCJ0YWJsZS1zdHJpcGVkXCIpXG5cbiAgICByZXR1cm4gY2xhc3NOYW1lcy5qb2luKFwiIFwiKVxuICB9XG59KSlcbiJdfQ==