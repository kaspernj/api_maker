import React, { useMemo } from "react";
import { StyleSheet, View } from "react-native";
import Checkbox from "../../utils/checkbox.js";
import BaseComponent from "../../base-component.js";
import memo from "set-state-compare/build/memo.js";
import PropTypes from "prop-types";
import propTypesExact from "prop-types-exact";
import { shapeComponent } from "set-state-compare/build/shape-component.js";
import { useForm } from "../../form.js";
const styles = StyleSheet.create({
    checkbox: {
        marginRight: 4
    }
});
export default memo(shapeComponent(class EditAttributeInput extends BaseComponent {
    static propTypes = propTypesExact({
        attributeName: PropTypes.string.isRequired,
        id: PropTypes.string.isRequired,
        label: PropTypes.string.isRequired,
        model: PropTypes.object.isRequired,
        name: PropTypes.string.isRequired
    });
    setup() {
        const { attributeName, id, name } = this.p;
        this.form = useForm();
        this.useStates({
            checked: this.tt.defaultChecked
        });
        this.dataSet = useMemo(() => ({
            attribute: attributeName,
            id,
            name
        }), [attributeName, id, name]);
        useMemo(() => {
            if (this.form) {
                this.form.setValue(name, this.s.checked);
            }
        }, []);
    }
    defaultChecked = () => this.p.model[this.p.attributeName]() || false;
    render() {
        const { dataSet } = this.tt;
        const { attributeName, label, model } = this.p;
        const { checked } = this.s;
        if (!(attributeName in model)) {
            throw new Error(`${attributeName} isn't set on the resource ${model.modelClassData().name}`);
        }
        return (<View dataSet={this.cache("rootViewDataSet", { component: "api-maker/super-admin/edit-page/edit-attribute-input" })} style={this.cache("rootViewStyle", { flexDirection: "row", alignItems: "center" })}>
        <Checkbox checked={checked} dataSet={dataSet} label={label} onCheckedChange={this.tt.onCheckedChange} style={styles.checkbox}/>
      </View>);
    }
    onCheckedChange = (newChecked) => {
        if (this.form) {
            this.form.setValue(this.p.name, newChecked);
        }
        this.setState({ checked: newChecked });
    };
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWRpdC1hdHRyaWJ1dGUtY2hlY2tib3guanMiLCJzb3VyY2VSb290IjoiL3NyYy8iLCJzb3VyY2VzIjpbInN1cGVyLWFkbWluL2VkaXQtcGFnZS9lZGl0LWF0dHJpYnV0ZS1jaGVja2JveC5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxLQUFLLEVBQUUsRUFBQyxPQUFPLEVBQUMsTUFBTSxPQUFPLENBQUE7QUFDcEMsT0FBTyxFQUFDLFVBQVUsRUFBRSxJQUFJLEVBQUMsTUFBTSxjQUFjLENBQUE7QUFDN0MsT0FBTyxRQUFRLE1BQU0seUJBQXlCLENBQUE7QUFDOUMsT0FBTyxhQUFhLE1BQU0seUJBQXlCLENBQUE7QUFDbkQsT0FBTyxJQUFJLE1BQU0saUNBQWlDLENBQUE7QUFDbEQsT0FBTyxTQUFTLE1BQU0sWUFBWSxDQUFBO0FBQ2xDLE9BQU8sY0FBYyxNQUFNLGtCQUFrQixDQUFBO0FBQzdDLE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSw0Q0FBNEMsQ0FBQTtBQUN6RSxPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sZUFBZSxDQUFBO0FBRXJDLE1BQU0sTUFBTSxHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUM7SUFDL0IsUUFBUSxFQUFFO1FBQ1IsV0FBVyxFQUFFLENBQUM7S0FDZjtDQUNGLENBQUMsQ0FBQTtBQUVGLGVBQWUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLGtCQUFtQixTQUFRLGFBQWE7SUFDL0UsTUFBTSxDQUFDLFNBQVMsR0FBRyxjQUFjLENBQUM7UUFDaEMsYUFBYSxFQUFFLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBVTtRQUMxQyxFQUFFLEVBQUUsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVO1FBQy9CLEtBQUssRUFBRSxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVU7UUFDbEMsS0FBSyxFQUFFLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBVTtRQUNsQyxJQUFJLEVBQUUsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVO0tBQ2xD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dCB7U3R5bGVTaGVldCwgVmlld30gZnJvbSBcInJlYWN0LW5hdGl2ZVwiXG5pbXBvcnQgQ2hlY2tib3ggZnJvbSBcIi4uLy4uL3V0aWxzL2NoZWNrYm94LmpzXCJcbmltcG9ydCBCYXNlQ29tcG9uZW50IGZyb20gXCIuLi8uLi9iYXNlLWNvbXBvbmVudC5qc1wiXG5pbXBvcnQgbWVtbyBmcm9tIFwic2V0LXN0YXRlLWNvbXBhcmUvYnVpbGQvbWVtby5qc1wiXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCJcbmltcG9ydCBwcm9wVHlwZXNFeGFjdCBmcm9tIFwicHJvcC10eXBlcy1leGFjdFwiXG5pbXBvcnQge3NoYXBlQ29tcG9uZW50fSBmcm9tIFwic2V0LXN0YXRlLWNvbXBhcmUvYnVpbGQvc2hhcGUtY29tcG9uZW50LmpzXCJcbmltcG9ydCB7dXNlRm9ybX0gZnJvbSBcIi4uLy4uL2Zvcm0uanNcIlxuXG5jb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gIGNoZWNrYm94OiB7XG4gICAgbWFyZ2luUmlnaHQ6IDRcbiAgfVxufSlcblxuZXhwb3J0IGRlZmF1bHQgbWVtbyhzaGFwZUNvbXBvbmVudChjbGFzcyBFZGl0QXR0cmlidXRlSW5wdXQgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHByb3BUeXBlc0V4YWN0KHtcbiAgICBhdHRyaWJ1dGVOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgaWQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICBsYWJlbDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIG1vZGVsOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgbmFtZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXG4gIH0pXG5cbiAgc2V0dXAoKSB7XG4gICAgY29uc3Qge2F0dHJpYnV0ZU5hbWUsIGlkLCBuYW1lfSA9IHRoaXMucFxuXG4gICAgdGhpcy5mb3JtID0gdXNlRm9ybSgpXG4gICAgdGhpcy51c2VTdGF0ZXMoe1xuICAgICAgY2hlY2tlZDogdGhpcy50dC5kZWZhdWx0Q2hlY2tlZFxuICAgIH0pXG5cbiAgICB0aGlzLmRhdGFTZXQgPSB1c2VNZW1vKFxuICAgICAgKCkgPT4gKHtcbiAgICAgICAgYXR0cmlidXRlOiBhdHRyaWJ1dGVOYW1lLFxuICAgICAgICBpZCxcbiAgICAgICAgbmFtZVxuICAgICAgfSksXG4gICAgICBbYXR0cmlidXRlTmFtZSwgaWQsIG5hbWVdXG4gICAgKVxuXG4gICAgdXNlTWVtbygoKSA9PiB7XG4gICAgICBpZiAodGhpcy5mb3JtKSB7XG4gICAgICAgIHRoaXMuZm9ybS5zZXRWYWx1ZShuYW1lLCB0aGlzLnMuY2hlY2tlZClcbiAgICAgIH1cbiAgICB9LCBbXSlcbiAgfVxuXG4gIGRlZmF1bHRDaGVja2VkID0gKCkgPT4gdGhpcy5wLm1vZGVsW3RoaXMucC5hdHRyaWJ1dGVOYW1lXSgpIHx8IGZhbHNlXG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtkYXRhU2V0fSA9IHRoaXMudHRcbiAgICBjb25zdCB7YXR0cmlidXRlTmFtZSwgbGFiZWwsIG1vZGVsfSA9IHRoaXMucFxuICAgIGNvbnN0IHtjaGVja2VkfSA9IHRoaXMuc1xuXG4gICAgaWYgKCEoYXR0cmlidXRlTmFtZSBpbiBtb2RlbCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgJHthdHRyaWJ1dGVOYW1lfSBpc24ndCBzZXQgb24gdGhlIHJlc291cmNlICR7bW9kZWwubW9kZWxDbGFzc0RhdGEoKS5uYW1lfWApXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxWaWV3XG4gICAgICAgIGRhdGFTZXQ9e3RoaXMuY2FjaGUoXCJyb290Vmlld0RhdGFTZXRcIiwge2NvbXBvbmVudDogXCJhcGktbWFrZXIvc3VwZXItYWRtaW4vZWRpdC1wYWdlL2VkaXQtYXR0cmlidXRlLWlucHV0XCJ9KX1cbiAgICAgICAgc3R5bGU9e3RoaXMuY2FjaGUoXCJyb290Vmlld1N0eWxlXCIsIHtmbGV4RGlyZWN0aW9uOiBcInJvd1wiLCBhbGlnbkl0ZW1zOiBcImNlbnRlclwifSl9XG4gICAgICA+XG4gICAgICAgIDxDaGVja2JveFxuICAgICAgICAgIGNoZWNrZWQ9e2NoZWNrZWR9XG4gICAgICAgICAgZGF0YVNldD17ZGF0YVNldH1cbiAgICAgICAgICBsYWJlbD17bGFiZWx9XG4gICAgICAgICAgb25DaGVja2VkQ2hhbmdlPXt0aGlzLnR0Lm9uQ2hlY2tlZENoYW5nZX1cbiAgICAgICAgICBzdHlsZT17c3R5bGVzLmNoZWNrYm94fVxuICAgICAgICAvPlxuICAgICAgPC9WaWV3PlxuICAgIClcbiAgfVxuXG4gIG9uQ2hlY2tlZENoYW5nZSA9IChuZXdDaGVja2VkKSA9PiB7XG4gICAgaWYgKHRoaXMuZm9ybSkge1xuICAgICAgdGhpcy5mb3JtLnNldFZhbHVlKHRoaXMucC5uYW1lLCBuZXdDaGVja2VkKVxuICAgIH1cblxuICAgIHRoaXMuc2V0U3RhdGUoe2NoZWNrZWQ6IG5ld0NoZWNrZWR9KVxuICB9XG59KSlcbiJdfQ==