import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import React, { useMemo } from "react";
import { TextInput, View } from "react-native";
import BaseComponent from "../../base-component";
import memo from "set-state-compare/build/memo.js";
import PropTypes from "prop-types";
import propTypesExact from "prop-types-exact";
import { shapeComponent } from "set-state-compare/build/shape-component.js";
import Text from "../../utils/text";
import { useForm } from "../../form";
export default memo(shapeComponent(class EditAttributeInput extends BaseComponent {
    static propTypes = propTypesExact({
        attributeName: PropTypes.string.isRequired,
        id: PropTypes.string.isRequired,
        label: PropTypes.string.isRequired,
        model: PropTypes.object.isRequired,
        name: PropTypes.string.isRequired
    });
    setup() {
        const { name } = this.p;
        this.form = useForm();
        this.useStates({
            value: this.defaultValue()
        });
        useMemo(() => {
            if (this.form) {
                this.form.setValue(name, this.s.value);
            }
        }, []);
    }
    defaultValue = () => this.p.model[this.p.attributeName]() || "";
    render() {
        const { attributeName, id, label, model, name } = this.p;
        const { value } = this.s;
        if (!(attributeName in model)) {
            throw new Error(`${attributeName} isn't set on the resource ${model.modelClassData().name}`);
        }
        return (_jsxs(View, { testID: "api-maker/super-admin/edit-page/edit-attribute-input", children: [_jsx(Text, { children: label }), _jsx(View, { children: _jsx(TextInput, { dataSet: this.cache("textInputDataSet", {
                            attribute: attributeName,
                            id,
                            name
                        }, [attributeName, id, name]), onChangeText: this.tt.onChangeText, style: this.cache("textInputStyle", {
                            paddingTop: 9,
                            paddingRight: 13,
                            paddingBottom: 9,
                            paddingLeft: 13,
                            borderRadius: 5,
                            backgroundColor: "#fff",
                            border: "1px solid #cecece"
                        }), value: value }) })] }));
    }
    onChangeText = (newValue) => {
        if (this.form) {
            this.form.setValue(this.p.name, newValue);
        }
        this.setState({ value: newValue });
    };
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWRpdC1hdHRyaWJ1dGUtaW5wdXQuanMiLCJzb3VyY2VSb290IjoiL3NyYy8iLCJzb3VyY2VzIjpbInN1cGVyLWFkbWluL2VkaXQtcGFnZS9lZGl0LWF0dHJpYnV0ZS1pbnB1dC5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sS0FBSyxFQUFFLEVBQUMsT0FBTyxFQUFDLE1BQU0sT0FBTyxDQUFBO0FBQ3BDLE9BQU8sRUFBQyxTQUFTLEVBQUUsSUFBSSxFQUFDLE1BQU0sY0FBYyxDQUFBO0FBQzVDLE9BQU8sYUFBYSxNQUFNLHNCQUFzQixDQUFBO0FBQ2hELE9BQU8sSUFBSSxNQUFNLGlDQUFpQyxDQUFBO0FBQ2xELE9BQU8sU0FBUyxNQUFNLFlBQVksQ0FBQTtBQUNsQyxPQUFPLGNBQWMsTUFBTSxrQkFBa0IsQ0FBQTtBQUM3QyxPQUFPLEVBQUMsY0FBYyxFQUFDLE1BQU0sNENBQTRDLENBQUE7QUFDekUsT0FBTyxJQUFJLE1BQU0sa0JBQWtCLENBQUE7QUFDbkMsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLFlBQVksQ0FBQTtBQUVsQyxlQUFlLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxrQkFBbUIsU0FBUSxhQUFhO0lBQy9FLE1BQU0sQ0FBQyxTQUFTLEdBQUcsY0FBYyxDQUFDO1FBQ2hDLGFBQWEsRUFBRSxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVU7UUFDMUMsRUFBRSxFQUFFLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBVTtRQUMvQixLQUFLLEVBQUUsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVO1FBQ2xDLEtBQUssRUFBRSxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVU7UUFDbEMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBVTtLQUNsQyxDQUFDLENBQUE7SUFFRixLQUFLO1FBQ0gsTUFBTSxFQUFDLElBQUksRUFBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUE7UUFFckIsSUFBSSxDQUFDLElBQUksR0FBRyxPQUFPLEVBQUUsQ0FBQTtRQUNyQixJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ2IsS0FBSyxFQUFFLElBQUksQ0FBQyxZQUFZLEVBQUU7U0FDM0IsQ0FBQyxDQUFBO1FBRUYsT0FBTyxDQUFDLEdBQUcsRUFBRTtZQUNYLElBQUksSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUNkLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFBO1lBQ3hDLENBQUM7UUFDSCxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUE7SUFDUixDQUFDO0lBRUQsWUFBWSxHQUFHLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUE7SUFFL0QsTUFBTTtRQUNKLE1BQU0sRUFBQyxhQUFhLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQTtRQUN0RCxNQUFNLEVBQUMsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQTtRQUV0QixJQUFJLENBQUMsQ0FBQyxhQUFhLElBQUksS0FBSyxDQUFDLEVBQUUsQ0FBQztZQUM5QixNQUFNLElBQUksS0FBSyxDQUFDLEdBQUcsYUFBYSw4QkFBOEIsS0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUE7UUFDOUYsQ0FBQztRQUVELE9BQU8sQ0FDTCxNQUFDLElBQUksSUFBQyxNQUFNLEVBQUMsc0RBQXNELGFBQ2pFLEtBQUMsSUFBSSxjQUFFLEtBQUssR0FBUSxFQUNwQixLQUFDLElBQUksY0FDSCxLQUFDLFNBQVMsSUFDUixPQUFPLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsRUFBRTs0QkFDdEMsU0FBUyxFQUFFLGFBQWE7NEJBQ3hCLEVBQUU7NEJBQ0YsSUFBSTt5QkFDTCxFQUFFLENBQUMsYUFBYSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQyxFQUM3QixZQUFZLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQ2xDLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixFQUFFOzRCQUNsQyxVQUFVLEVBQUUsQ0FBQzs0QkFDYixZQUFZLEVBQUUsRUFBRTs0QkFDaEIsYUFBYSxFQUFFLENBQUM7NEJBQ2hCLFdBQVcsRUFBRSxFQUFFOzRCQUNmLFlBQVksRUFBRSxDQUFDOzRCQUNmLGVBQWUsRUFBRSxNQUFNOzRCQUN2QixNQUFNLEVBQUUsbUJBQW1CO3lCQUM1QixDQUFDLEVBQ0YsS0FBSyxFQUFFLEtBQUssR0FDWixHQUNHLElBQ0YsQ0FDUixDQUFBO0lBQ0gsQ0FBQztJQUVELFlBQVksR0FBRyxDQUFDLFFBQVEsRUFBRSxFQUFFO1FBQzFCLElBQUksSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ2QsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUE7UUFDM0MsQ0FBQztRQUVELElBQUksQ0FBQyxRQUFRLENBQUMsRUFBQyxLQUFLLEVBQUUsUUFBUSxFQUFDLENBQUMsQ0FBQTtJQUNsQyxDQUFDLENBQUE7Q0FDRixDQUFDLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwge3VzZU1lbW99IGZyb20gXCJyZWFjdFwiXG5pbXBvcnQge1RleHRJbnB1dCwgVmlld30gZnJvbSBcInJlYWN0LW5hdGl2ZVwiXG5pbXBvcnQgQmFzZUNvbXBvbmVudCBmcm9tIFwiLi4vLi4vYmFzZS1jb21wb25lbnRcIlxuaW1wb3J0IG1lbW8gZnJvbSBcInNldC1zdGF0ZS1jb21wYXJlL2J1aWxkL21lbW8uanNcIlxuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiXG5pbXBvcnQgcHJvcFR5cGVzRXhhY3QgZnJvbSBcInByb3AtdHlwZXMtZXhhY3RcIlxuaW1wb3J0IHtzaGFwZUNvbXBvbmVudH0gZnJvbSBcInNldC1zdGF0ZS1jb21wYXJlL2J1aWxkL3NoYXBlLWNvbXBvbmVudC5qc1wiXG5pbXBvcnQgVGV4dCBmcm9tIFwiLi4vLi4vdXRpbHMvdGV4dFwiXG5pbXBvcnQge3VzZUZvcm19IGZyb20gXCIuLi8uLi9mb3JtXCJcblxuZXhwb3J0IGRlZmF1bHQgbWVtbyhzaGFwZUNvbXBvbmVudChjbGFzcyBFZGl0QXR0cmlidXRlSW5wdXQgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHByb3BUeXBlc0V4YWN0KHtcbiAgICBhdHRyaWJ1dGVOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgaWQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICBsYWJlbDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIG1vZGVsOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgbmFtZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXG4gIH0pXG5cbiAgc2V0dXAoKSB7XG4gICAgY29uc3Qge25hbWV9ID0gdGhpcy5wXG5cbiAgICB0aGlzLmZvcm0gPSB1c2VGb3JtKClcbiAgICB0aGlzLnVzZVN0YXRlcyh7XG4gICAgICB2YWx1ZTogdGhpcy5kZWZhdWx0VmFsdWUoKVxuICAgIH0pXG5cbiAgICB1c2VNZW1vKCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmZvcm0pIHtcbiAgICAgICAgdGhpcy5mb3JtLnNldFZhbHVlKG5hbWUsIHRoaXMucy52YWx1ZSlcbiAgICAgIH1cbiAgICB9LCBbXSlcbiAgfVxuXG4gIGRlZmF1bHRWYWx1ZSA9ICgpID0+IHRoaXMucC5tb2RlbFt0aGlzLnAuYXR0cmlidXRlTmFtZV0oKSB8fCBcIlwiXG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHthdHRyaWJ1dGVOYW1lLCBpZCwgbGFiZWwsIG1vZGVsLCBuYW1lfSA9IHRoaXMucFxuICAgIGNvbnN0IHt2YWx1ZX0gPSB0aGlzLnNcblxuICAgIGlmICghKGF0dHJpYnV0ZU5hbWUgaW4gbW9kZWwpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7YXR0cmlidXRlTmFtZX0gaXNuJ3Qgc2V0IG9uIHRoZSByZXNvdXJjZSAke21vZGVsLm1vZGVsQ2xhc3NEYXRhKCkubmFtZX1gKVxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8VmlldyB0ZXN0SUQ9XCJhcGktbWFrZXIvc3VwZXItYWRtaW4vZWRpdC1wYWdlL2VkaXQtYXR0cmlidXRlLWlucHV0XCI+XG4gICAgICAgIDxUZXh0PntsYWJlbH08L1RleHQ+XG4gICAgICAgIDxWaWV3PlxuICAgICAgICAgIDxUZXh0SW5wdXRcbiAgICAgICAgICAgIGRhdGFTZXQ9e3RoaXMuY2FjaGUoXCJ0ZXh0SW5wdXREYXRhU2V0XCIsIHtcbiAgICAgICAgICAgICAgYXR0cmlidXRlOiBhdHRyaWJ1dGVOYW1lLFxuICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgbmFtZVxuICAgICAgICAgICAgfSwgW2F0dHJpYnV0ZU5hbWUsIGlkLCBuYW1lXSl9XG4gICAgICAgICAgICBvbkNoYW5nZVRleHQ9e3RoaXMudHQub25DaGFuZ2VUZXh0fVxuICAgICAgICAgICAgc3R5bGU9e3RoaXMuY2FjaGUoXCJ0ZXh0SW5wdXRTdHlsZVwiLCB7XG4gICAgICAgICAgICAgIHBhZGRpbmdUb3A6IDksXG4gICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogMTMsXG4gICAgICAgICAgICAgIHBhZGRpbmdCb3R0b206IDksXG4gICAgICAgICAgICAgIHBhZGRpbmdMZWZ0OiAxMyxcbiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiA1LFxuICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI2ZmZlwiLFxuICAgICAgICAgICAgICBib3JkZXI6IFwiMXB4IHNvbGlkICNjZWNlY2VcIlxuICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICB2YWx1ZT17dmFsdWV9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9WaWV3PlxuICAgICAgPC9WaWV3PlxuICAgIClcbiAgfVxuXG4gIG9uQ2hhbmdlVGV4dCA9IChuZXdWYWx1ZSkgPT4ge1xuICAgIGlmICh0aGlzLmZvcm0pIHtcbiAgICAgIHRoaXMuZm9ybS5zZXRWYWx1ZSh0aGlzLnAubmFtZSwgbmV3VmFsdWUpXG4gICAgfVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7dmFsdWU6IG5ld1ZhbHVlfSlcbiAgfVxufSkpXG4iXX0=