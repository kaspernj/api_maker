import BaseComponent from "../base-component.js";
import { digg } from "diggerize";
import PropTypes from "prop-types";
import propTypesExact from "prop-types-exact";
import memo from "set-state-compare/build/memo.js";
import ModelClassTable from "./model-class-table.js";
import React, { useMemo } from "react";
import { shapeComponent } from "set-state-compare/build/shape-component.js";
import ShowNav from "./show-nav.js";
import useModel from "../use-model.js";
import useQueryParams from "on-location-changed/build/use-query-params.js";
import { View } from "react-native";
export default memo(shapeComponent(class ApiMakerSuperAdminShowReflectionPage extends BaseComponent {
    static propTypes = propTypesExact({
        modelClass: PropTypes.func.isRequired,
        modelId: PropTypes.string.isRequired
    });
    render() {
        const { modelClass } = this.p;
        const queryParams = useQueryParams();
        const camelizedLower = digg(modelClass.modelClassData(), "camelizedLower");
        const useModelResult = useModel(modelClass, { loadByQueryParam: ({ queryParams }) => digg(queryParams, "model_id") });
        const model = digg(useModelResult, camelizedLower);
        const reflections = modelClass.reflections();
        const reflection = reflections.find((reflectionI) => reflectionI.name() == queryParams.model_reflection);
        const reflectionModelClass = reflection.modelClass();
        let collection;
        if (model)
            collection = model[reflection.name()]();
        return (<View testID="super-admin/show-reflection-page">
        {model &&
                <ShowNav model={model} modelClass={modelClass}/>}
        {collection &&
                <ModelClassTable collection={collection} key={reflectionModelClass.modelName().human()} modelClass={reflectionModelClass}/>}
      </View>);
    }
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hvdy1yZWZsZWN0aW9uLXBhZ2UuanMiLCJzb3VyY2VSb290IjoiL3NyYy8iLCJzb3VyY2VzIjpbInN1cGVyLWFkbWluL3Nob3ctcmVmbGVjdGlvbi1wYWdlLmpzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLGFBQWEsTUFBTSxzQkFBc0IsQ0FBQTtBQUNoRCxPQUFPLEVBQUMsSUFBSSxFQUFDLE1BQU0sV0FBVyxDQUFBO0FBQzlCLE9BQU8sU0FBUyxNQUFNLFlBQVksQ0FBQTtBQUNsQyxPQUFPLGNBQWMsTUFBTSxrQkFBa0IsQ0FBQTtBQUM3QyxPQUFPLElBQUksTUFBTSxpQ0FBaUMsQ0FBQTtBQUNsRCxPQUFPLGVBQWUsTUFBTSx3QkFBd0IsQ0FBQTtBQUNwRCxPQUFPLEtBQUssRUFBRSxFQUFDLE9BQU8sRUFBQyxNQUFNLE9BQU8sQ0FBQTtBQUNwQyxPQUFPLEVBQUMsY0FBYyxFQUFDLE1BQU0sNENBQTRDLENBQUE7QUFDekUsT0FBTyxPQUFPLE1BQU0sZUFBZSxDQUFBO0FBQ25DLE9BQU8sUUFBUSxNQUFNLGlCQUFpQixDQUFBO0FBQ3RDLE9BQU8sY0FBYyxNQUFNLCtDQUErQyxDQUFBO0FBQzFFLE9BQU8sRUFBQyxJQUFJLEVBQUMsTUFBTSxjQUFjLENBQUE7QUFFakMsZUFBZSxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sb0NBQXFDLFNBQVEsYUFBYTtJQUNqRyxNQUFNLENBQUMsU0FBUyxHQUFHLGNBQWMsQ0FBQztRQUNoQyxVQUFVLEVBQUUsU0FBUyxDQUFDLElBQUksQ0FBQyxVQUFVO1FBQ3JDLE9BQU8sRUFBRSxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVU7S0FDckMsQ0FBQyxDQUFBO0lBRUYsTUFBTTtRQUNKLE1BQU0sRUFBQyxVQUFVLEVBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFBO1FBQzNCLE1BQU0sV0FBVyxHQUFHLGNBQWMsRUFBRSxDQUFBO1FBQ3BDLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsY0FBYyxFQUFFLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQTtRQUMxRSxNQUFNLGNBQWMsR0FBRyxRQUFRLENBQUMsVUFBVSxFQUFFLEVBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxFQUFDLFdBQVcsRUFBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLFVBQVUsQ0FBQyxFQUFDLENBQUMsQ0FBQTtRQUNqSCxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsY0FBYyxFQUFFLGNBQWMsQ0FBQyxDQUFBO1FBQ2xELE1BQU0sV0FBVyxHQUFHLFVBQVUsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtRQUM1QyxNQUFNLFVBQVUsR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsV0FBVyxFQUFFLEVBQUUsQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLElBQUksV0FBVyxDQUFDLGdCQUFnQixDQUFDLENBQUE7UUFDeEcsTUFBTSxvQkFBb0IsR0FBRyxVQUFVLENBQUMsVUFBVSxFQUFFLENBQUE7UUFDcEQsSUFBSSxVQUFVLENBQUE7UUFFZCxJQUFJLEtBQUs7WUFBRSxVQUFVLEdBQUcsS0FBSyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUE7UUFFbEQsT0FBTyxDQUNMLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxrQ0FBa0MsQ0FDN0M7UUFBQSxDQUFDLEtBQUs7Z0JBQ0osQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsVUFBVSxDQUFDLEVBQ2hELENBQ0E7UUFBQSxDQUFDLFVBQVU7Z0JBQ1QsQ0FBQyxlQUFlLENBQ2QsVUFBVSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQ3ZCLEdBQUcsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLFNBQVMsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQzlDLFVBQVUsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLEVBRXJDLENBQ0Y7TUFBQSxFQUFFLElBQUksQ0FBQyxDQUNSLENBQUE7SUFDSCxDQUFDO0NBQ0YsQ0FBQyxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZUNvbXBvbmVudCBmcm9tIFwiLi4vYmFzZS1jb21wb25lbnQuanNcIlxuaW1wb3J0IHtkaWdnfSBmcm9tIFwiZGlnZ2VyaXplXCJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIlxuaW1wb3J0IHByb3BUeXBlc0V4YWN0IGZyb20gXCJwcm9wLXR5cGVzLWV4YWN0XCJcbmltcG9ydCBtZW1vIGZyb20gXCJzZXQtc3RhdGUtY29tcGFyZS9idWlsZC9tZW1vLmpzXCJcbmltcG9ydCBNb2RlbENsYXNzVGFibGUgZnJvbSBcIi4vbW9kZWwtY2xhc3MtdGFibGUuanNcIlxuaW1wb3J0IFJlYWN0LCB7dXNlTWVtb30gZnJvbSBcInJlYWN0XCJcbmltcG9ydCB7c2hhcGVDb21wb25lbnR9IGZyb20gXCJzZXQtc3RhdGUtY29tcGFyZS9idWlsZC9zaGFwZS1jb21wb25lbnQuanNcIlxuaW1wb3J0IFNob3dOYXYgZnJvbSBcIi4vc2hvdy1uYXYuanNcIlxuaW1wb3J0IHVzZU1vZGVsIGZyb20gXCIuLi91c2UtbW9kZWwuanNcIlxuaW1wb3J0IHVzZVF1ZXJ5UGFyYW1zIGZyb20gXCJvbi1sb2NhdGlvbi1jaGFuZ2VkL2J1aWxkL3VzZS1xdWVyeS1wYXJhbXMuanNcIlxuaW1wb3J0IHtWaWV3fSBmcm9tIFwicmVhY3QtbmF0aXZlXCJcblxuZXhwb3J0IGRlZmF1bHQgbWVtbyhzaGFwZUNvbXBvbmVudChjbGFzcyBBcGlNYWtlclN1cGVyQWRtaW5TaG93UmVmbGVjdGlvblBhZ2UgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHByb3BUeXBlc0V4YWN0KHtcbiAgICBtb2RlbENsYXNzOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIG1vZGVsSWQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxuICB9KVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7bW9kZWxDbGFzc30gPSB0aGlzLnBcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHVzZVF1ZXJ5UGFyYW1zKClcbiAgICBjb25zdCBjYW1lbGl6ZWRMb3dlciA9IGRpZ2cobW9kZWxDbGFzcy5tb2RlbENsYXNzRGF0YSgpLCBcImNhbWVsaXplZExvd2VyXCIpXG4gICAgY29uc3QgdXNlTW9kZWxSZXN1bHQgPSB1c2VNb2RlbChtb2RlbENsYXNzLCB7bG9hZEJ5UXVlcnlQYXJhbTogKHtxdWVyeVBhcmFtc30pID0+IGRpZ2cocXVlcnlQYXJhbXMsIFwibW9kZWxfaWRcIil9KVxuICAgIGNvbnN0IG1vZGVsID0gZGlnZyh1c2VNb2RlbFJlc3VsdCwgY2FtZWxpemVkTG93ZXIpXG4gICAgY29uc3QgcmVmbGVjdGlvbnMgPSBtb2RlbENsYXNzLnJlZmxlY3Rpb25zKClcbiAgICBjb25zdCByZWZsZWN0aW9uID0gcmVmbGVjdGlvbnMuZmluZCgocmVmbGVjdGlvbkkpID0+IHJlZmxlY3Rpb25JLm5hbWUoKSA9PSBxdWVyeVBhcmFtcy5tb2RlbF9yZWZsZWN0aW9uKVxuICAgIGNvbnN0IHJlZmxlY3Rpb25Nb2RlbENsYXNzID0gcmVmbGVjdGlvbi5tb2RlbENsYXNzKClcbiAgICBsZXQgY29sbGVjdGlvblxuXG4gICAgaWYgKG1vZGVsKSBjb2xsZWN0aW9uID0gbW9kZWxbcmVmbGVjdGlvbi5uYW1lKCldKClcblxuICAgIHJldHVybiAoXG4gICAgICA8VmlldyB0ZXN0SUQ9XCJzdXBlci1hZG1pbi9zaG93LXJlZmxlY3Rpb24tcGFnZVwiPlxuICAgICAgICB7bW9kZWwgJiZcbiAgICAgICAgICA8U2hvd05hdiBtb2RlbD17bW9kZWx9IG1vZGVsQ2xhc3M9e21vZGVsQ2xhc3N9IC8+XG4gICAgICAgIH1cbiAgICAgICAge2NvbGxlY3Rpb24gJiZcbiAgICAgICAgICA8TW9kZWxDbGFzc1RhYmxlXG4gICAgICAgICAgICBjb2xsZWN0aW9uPXtjb2xsZWN0aW9ufVxuICAgICAgICAgICAga2V5PXtyZWZsZWN0aW9uTW9kZWxDbGFzcy5tb2RlbE5hbWUoKS5odW1hbigpfVxuICAgICAgICAgICAgbW9kZWxDbGFzcz17cmVmbGVjdGlvbk1vZGVsQ2xhc3N9XG4gICAgICAgICAgLz5cbiAgICAgICAgfVxuICAgICAgPC9WaWV3PlxuICAgIClcbiAgfVxufSkpXG4iXX0=