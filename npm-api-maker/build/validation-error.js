// @ts-check
import BaseError from "./base-error.js";
import { digg } from "diggerize";
import * as inflection from "inflection";
export default class ValidationError extends BaseError {
    static apiMakerType = "ValidationError";
    apiMakerType = "ValidationError";
    /**
     * @param {import("./validation-errors.js").ValidationErrors} validationErrors
     * @param {object} args
     */
    constructor(validationErrors, args) {
        const errorMessage = validationErrors.getUnhandledErrorMessage() || validationErrors.getErrorMessage();
        const forwardedArgs = { addResponseErrorsToErrorMessage: false };
        const newArgs = Object.assign({}, args, forwardedArgs);
        super(errorMessage, newArgs);
        this.validationErrors = validationErrors;
    }
    /** @returns {import("./validation-errors.js").ValidationError[]} */
    getUnhandledErrors = () => this.validationErrors.getValidationErrors().filter((validationError) => !validationError.getHandled());
    /** @returns {import("./validation-errors.js").ValidationErrors} */
    getValidationErrors = () => digg(this, "validationErrors");
    /** @returns {boolean} */
    hasUnhandledErrors = () => {
        const unhandledError = this.validationErrors.getValidationErrors().find((validationError) => !validationError.getHandled());
        return Boolean(unhandledError);
    };
    /** @returns {boolean} */
    hasValidationErrorForAttribute = (attributeName) => {
        const underscoredAttributeName = inflection.underscore(attributeName);
        const foundAttribute = this.validationErrors.getValidationErrors().find((validationError) => validationError.getAttributeName() == underscoredAttributeName);
        if (foundAttribute)
            return true;
        return false;
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmFsaWRhdGlvbi1lcnJvci5qcyIsInNvdXJjZVJvb3QiOiIvc3JjLyIsInNvdXJjZXMiOlsidmFsaWRhdGlvbi1lcnJvci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZO0FBRVosT0FBTyxTQUFTLE1BQU0saUJBQWlCLENBQUE7QUFDdkMsT0FBTyxFQUFDLElBQUksRUFBQyxNQUFNLFdBQVcsQ0FBQTtBQUM5QixPQUFPLEtBQUssVUFBVSxNQUFNLFlBQVksQ0FBQTtBQUV4QyxNQUFNLENBQUMsT0FBTyxPQUFPLGVBQWdCLFNBQVEsU0FBUztJQUNwRCxNQUFNLENBQUMsWUFBWSxHQUFHLGlCQUFpQixDQUFBO0lBQ3ZDLFlBQVksR0FBRyxpQkFBaUIsQ0FBQTtJQUVoQzs7O09BR0c7SUFDSCxZQUFZLGdCQUFnQixFQUFFLElBQUk7UUFDaEMsTUFBTSxZQUFZLEdBQUcsZ0JBQWdCLENBQUMsd0JBQXdCLEVBQUUsSUFBSSxnQkFBZ0IsQ0FBQyxlQUFlLEVBQUUsQ0FBQTtRQUN0RyxNQUFNLGFBQWEsR0FBRyxFQUFDLCtCQUErQixFQUFFLEtBQUssRUFBQyxDQUFBO1FBQzlELE1BQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxhQUFhLENBQUMsQ0FBQTtRQUV0RCxLQUFLLENBQUMsWUFBWSxFQUFFLE9BQU8sQ0FBQyxDQUFBO1FBQzVCLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxnQkFBZ0IsQ0FBQTtJQUMxQyxDQUFDO0lBRUQsb0VBQW9FO0lBQ3BFLGtCQUFrQixHQUFHLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsRUFBRSxFQUFFLENBQUMsQ0FBQyxlQUFlLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQTtJQUVqSSxtRUFBbUU7SUFDbkUsbUJBQW1CLEdBQUcsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxrQkFBa0IsQ0FBQyxDQUFBO0lBRTFELHlCQUF5QjtJQUN6QixrQkFBa0IsR0FBRyxHQUFHLEVBQUU7UUFDeEIsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLG1CQUFtQixFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsZUFBZSxFQUFFLEVBQUUsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFBO1FBRTNILE9BQU8sT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFBO0lBQ2hDLENBQUMsQ0FBQTtJQUVELHlCQUF5QjtJQUN6Qiw4QkFBOEIsR0FBRyxDQUFDLGFBQWEsRUFBRSxFQUFFO1FBQ2pELE1BQU0sd0JBQXdCLEdBQUcsVUFBVSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsQ0FBQTtRQUNyRSxNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxlQUFlLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLHdCQUF3QixDQUFDLENBQUE7UUFFNUosSUFBSSxjQUFjO1lBQUUsT0FBTyxJQUFJLENBQUE7UUFFL0IsT0FBTyxLQUFLLENBQUE7SUFDZCxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtY2hlY2tcblxuaW1wb3J0IEJhc2VFcnJvciBmcm9tIFwiLi9iYXNlLWVycm9yLmpzXCJcbmltcG9ydCB7ZGlnZ30gZnJvbSBcImRpZ2dlcml6ZVwiXG5pbXBvcnQgKiBhcyBpbmZsZWN0aW9uIGZyb20gXCJpbmZsZWN0aW9uXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmFsaWRhdGlvbkVycm9yIGV4dGVuZHMgQmFzZUVycm9yIHtcbiAgc3RhdGljIGFwaU1ha2VyVHlwZSA9IFwiVmFsaWRhdGlvbkVycm9yXCJcbiAgYXBpTWFrZXJUeXBlID0gXCJWYWxpZGF0aW9uRXJyb3JcIlxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdmFsaWRhdGlvbi1lcnJvcnMuanNcIikuVmFsaWRhdGlvbkVycm9yc30gdmFsaWRhdGlvbkVycm9yc1xuICAgKiBAcGFyYW0ge29iamVjdH0gYXJnc1xuICAgKi9cbiAgY29uc3RydWN0b3IodmFsaWRhdGlvbkVycm9ycywgYXJncykge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHZhbGlkYXRpb25FcnJvcnMuZ2V0VW5oYW5kbGVkRXJyb3JNZXNzYWdlKCkgfHwgdmFsaWRhdGlvbkVycm9ycy5nZXRFcnJvck1lc3NhZ2UoKVxuICAgIGNvbnN0IGZvcndhcmRlZEFyZ3MgPSB7YWRkUmVzcG9uc2VFcnJvcnNUb0Vycm9yTWVzc2FnZTogZmFsc2V9XG4gICAgY29uc3QgbmV3QXJncyA9IE9iamVjdC5hc3NpZ24oe30sIGFyZ3MsIGZvcndhcmRlZEFyZ3MpXG5cbiAgICBzdXBlcihlcnJvck1lc3NhZ2UsIG5ld0FyZ3MpXG4gICAgdGhpcy52YWxpZGF0aW9uRXJyb3JzID0gdmFsaWRhdGlvbkVycm9yc1xuICB9XG5cbiAgLyoqIEByZXR1cm5zIHtpbXBvcnQoXCIuL3ZhbGlkYXRpb24tZXJyb3JzLmpzXCIpLlZhbGlkYXRpb25FcnJvcltdfSAqL1xuICBnZXRVbmhhbmRsZWRFcnJvcnMgPSAoKSA9PiB0aGlzLnZhbGlkYXRpb25FcnJvcnMuZ2V0VmFsaWRhdGlvbkVycm9ycygpLmZpbHRlcigodmFsaWRhdGlvbkVycm9yKSA9PiAhdmFsaWRhdGlvbkVycm9yLmdldEhhbmRsZWQoKSlcblxuICAvKiogQHJldHVybnMge2ltcG9ydChcIi4vdmFsaWRhdGlvbi1lcnJvcnMuanNcIikuVmFsaWRhdGlvbkVycm9yc30gKi9cbiAgZ2V0VmFsaWRhdGlvbkVycm9ycyA9ICgpID0+IGRpZ2codGhpcywgXCJ2YWxpZGF0aW9uRXJyb3JzXCIpXG5cbiAgLyoqIEByZXR1cm5zIHtib29sZWFufSAqL1xuICBoYXNVbmhhbmRsZWRFcnJvcnMgPSAoKSA9PiB7XG4gICAgY29uc3QgdW5oYW5kbGVkRXJyb3IgPSB0aGlzLnZhbGlkYXRpb25FcnJvcnMuZ2V0VmFsaWRhdGlvbkVycm9ycygpLmZpbmQoKHZhbGlkYXRpb25FcnJvcikgPT4gIXZhbGlkYXRpb25FcnJvci5nZXRIYW5kbGVkKCkpXG5cbiAgICByZXR1cm4gQm9vbGVhbih1bmhhbmRsZWRFcnJvcilcbiAgfVxuXG4gIC8qKiBAcmV0dXJucyB7Ym9vbGVhbn0gKi9cbiAgaGFzVmFsaWRhdGlvbkVycm9yRm9yQXR0cmlidXRlID0gKGF0dHJpYnV0ZU5hbWUpID0+IHtcbiAgICBjb25zdCB1bmRlcnNjb3JlZEF0dHJpYnV0ZU5hbWUgPSBpbmZsZWN0aW9uLnVuZGVyc2NvcmUoYXR0cmlidXRlTmFtZSlcbiAgICBjb25zdCBmb3VuZEF0dHJpYnV0ZSA9IHRoaXMudmFsaWRhdGlvbkVycm9ycy5nZXRWYWxpZGF0aW9uRXJyb3JzKCkuZmluZCgodmFsaWRhdGlvbkVycm9yKSA9PiB2YWxpZGF0aW9uRXJyb3IuZ2V0QXR0cmlidXRlTmFtZSgpID09IHVuZGVyc2NvcmVkQXR0cmlidXRlTmFtZSlcblxuICAgIGlmIChmb3VuZEF0dHJpYnV0ZSkgcmV0dXJuIHRydWVcblxuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG4iXX0=