import BaseComponent from "./base-component.js";
import PropTypes from "prop-types";
import propTypesExact from "prop-types-exact";
import React, { memo, Suspense } from "react";
import { shapeComponent } from "set-state-compare/build/shape-component.js";
import usePath from "on-location-changed/build/use-path.js";
import useRouter from "./use-router.js";
export default memo(shapeComponent(class ApiMakerRouter extends BaseComponent {
    static propTypes = propTypesExact({
        history: PropTypes.object,
        locales: PropTypes.array.isRequired,
        notFoundComponent: PropTypes.elementType,
        requireComponent: PropTypes.func.isRequired,
        routeDefinitions: PropTypes.object,
        routes: PropTypes.object
    });
    render() {
        const path = usePath();
        const { locales, notFoundComponent, requireComponent, routeDefinitions, routes } = this.props;
        const { match } = useRouter({ locales, path, routes, routeDefinitions });
        const { matchingRoute } = match;
        if (!matchingRoute) {
            if (notFoundComponent) {
                const NotFoundComponent = notFoundComponent;
                return (<Suspense fallback={<div />}>
            <NotFoundComponent match={match}/>
          </Suspense>);
            }
            else {
                return null;
            }
        }
        const Component = requireComponent({ routeDefinition: matchingRoute.parsedRouteDefinition.routeDefinition });
        return (<Suspense fallback={<div />}>
        <Component match={match}/>
      </Suspense>);
    }
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVyLmpzIiwic291cmNlUm9vdCI6Ii9zcmMvIiwic291cmNlcyI6WyJyb3V0ZXIuanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sYUFBYSxNQUFNLHFCQUFxQixDQUFBO0FBQy9DLE9BQU8sU0FBUyxNQUFNLFlBQVksQ0FBQTtBQUNsQyxPQUFPLGNBQWMsTUFBTSxrQkFBa0IsQ0FBQTtBQUM3QyxPQUFPLEtBQUssRUFBRSxFQUFDLElBQUksRUFBRSxRQUFRLEVBQUMsTUFBTSxPQUFPLENBQUE7QUFDM0MsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLDRDQUE0QyxDQUFBO0FBQ3pFLE9BQU8sT0FBTyxNQUFNLHVDQUF1QyxDQUFBO0FBQzNELE9BQU8sU0FBUyxNQUFNLGlCQUFpQixDQUFBO0FBRXZDLGVBQWUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLGNBQWUsU0FBUSxhQUFhO0lBQzNFLE1BQU0sQ0FBQyxTQUFTLEdBQUcsY0FBYyxDQUFDO1FBQ2hDLE9BQU8sRUFBRSxTQUFTLENBQUMsTUFBTTtRQUN6QixPQUFPLEVBQUUsU0FBUyxDQUFDLEtBQUssQ0FBQyxVQUFVO1FBQ25DLGlCQUFpQixFQUFFLFNBQVMsQ0FBQyxXQUFXO1FBQ3hDLGdCQUFnQixFQUFFLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVTtRQUMzQyxnQkFBZ0IsRUFBRSxTQUFTLENBQUMsTUFBTTtRQUNsQyxNQUFNLEVBQUUsU0FBUyxDQUFDLE1BQU07S0FDekIsQ0FBQyxDQUFBO0lBRUYsTUFBTTtRQUNKLE1BQU0sSUFBSSxHQUFHLE9BQU8sRUFBRSxDQUFBO1FBQ3RCLE1BQU0sRUFBQyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsZ0JBQWdCLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxFQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQTtRQUMzRixNQUFNLEVBQUMsS0FBSyxFQUFDLEdBQUcsU0FBUyxDQUFDLEVBQUMsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsZ0JBQWdCLEVBQUMsQ0FBQyxDQUFBO1FBQ3BFLE1BQU0sRUFBQyxhQUFhLEVBQUMsR0FBRyxLQUFLLENBQUE7UUFFN0IsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQ25CLElBQUksaUJBQWlCLEVBQUUsQ0FBQztnQkFDdEIsTUFBTSxpQkFBaUIsR0FBRyxpQkFBaUIsQ0FBQTtnQkFFM0MsT0FBTyxDQUNMLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEFBQUQsRUFBRyxDQUFDLENBQzFCO1lBQUEsQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFDbEM7VUFBQSxFQUFFLFFBQVEsQ0FBQyxDQUNaLENBQUE7WUFDSCxDQUFDO2lCQUFNLENBQUM7Z0JBQ04sT0FBTyxJQUFJLENBQUE7WUFDYixDQUFDO1FBQ0gsQ0FBQztRQUVELE1BQU0sU0FBUyxHQUFHLGdCQUFnQixDQUFDLEVBQUMsZUFBZSxFQUFFLGFBQWEsQ0FBQyxxQkFBcUIsQ0FBQyxlQUFlLEVBQUMsQ0FBQyxDQUFBO1FBRTFHLE9BQU8sQ0FDTCxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxBQUFELEVBQUcsQ0FBQyxDQUMxQjtRQUFBLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUMxQjtNQUFBLEVBQUUsUUFBUSxDQUFDLENBQ1osQ0FBQTtJQUNILENBQUM7Q0FDRixDQUFDLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlQ29tcG9uZW50IGZyb20gXCIuL2Jhc2UtY29tcG9uZW50LmpzXCJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIlxuaW1wb3J0IHByb3BUeXBlc0V4YWN0IGZyb20gXCJwcm9wLXR5cGVzLWV4YWN0XCJcbmltcG9ydCBSZWFjdCwge21lbW8sIFN1c3BlbnNlfSBmcm9tIFwicmVhY3RcIlxuaW1wb3J0IHtzaGFwZUNvbXBvbmVudH0gZnJvbSBcInNldC1zdGF0ZS1jb21wYXJlL2J1aWxkL3NoYXBlLWNvbXBvbmVudC5qc1wiXG5pbXBvcnQgdXNlUGF0aCBmcm9tIFwib24tbG9jYXRpb24tY2hhbmdlZC9idWlsZC91c2UtcGF0aC5qc1wiXG5pbXBvcnQgdXNlUm91dGVyIGZyb20gXCIuL3VzZS1yb3V0ZXIuanNcIlxuXG5leHBvcnQgZGVmYXVsdCBtZW1vKHNoYXBlQ29tcG9uZW50KGNsYXNzIEFwaU1ha2VyUm91dGVyIGV4dGVuZHMgQmFzZUNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSBwcm9wVHlwZXNFeGFjdCh7XG4gICAgaGlzdG9yeTogUHJvcFR5cGVzLm9iamVjdCxcbiAgICBsb2NhbGVzOiBQcm9wVHlwZXMuYXJyYXkuaXNSZXF1aXJlZCxcbiAgICBub3RGb3VuZENvbXBvbmVudDogUHJvcFR5cGVzLmVsZW1lbnRUeXBlLFxuICAgIHJlcXVpcmVDb21wb25lbnQ6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgcm91dGVEZWZpbml0aW9uczogUHJvcFR5cGVzLm9iamVjdCxcbiAgICByb3V0ZXM6IFByb3BUeXBlcy5vYmplY3RcbiAgfSlcblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgcGF0aCA9IHVzZVBhdGgoKVxuICAgIGNvbnN0IHtsb2NhbGVzLCBub3RGb3VuZENvbXBvbmVudCwgcmVxdWlyZUNvbXBvbmVudCwgcm91dGVEZWZpbml0aW9ucywgcm91dGVzfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB7bWF0Y2h9ID0gdXNlUm91dGVyKHtsb2NhbGVzLCBwYXRoLCByb3V0ZXMsIHJvdXRlRGVmaW5pdGlvbnN9KVxuICAgIGNvbnN0IHttYXRjaGluZ1JvdXRlfSA9IG1hdGNoXG5cbiAgICBpZiAoIW1hdGNoaW5nUm91dGUpIHtcbiAgICAgIGlmIChub3RGb3VuZENvbXBvbmVudCkge1xuICAgICAgICBjb25zdCBOb3RGb3VuZENvbXBvbmVudCA9IG5vdEZvdW5kQ29tcG9uZW50XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8U3VzcGVuc2UgZmFsbGJhY2s9ezxkaXYgLz59PlxuICAgICAgICAgICAgPE5vdEZvdW5kQ29tcG9uZW50IG1hdGNoPXttYXRjaH0gLz5cbiAgICAgICAgICA8L1N1c3BlbnNlPlxuICAgICAgICApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IENvbXBvbmVudCA9IHJlcXVpcmVDb21wb25lbnQoe3JvdXRlRGVmaW5pdGlvbjogbWF0Y2hpbmdSb3V0ZS5wYXJzZWRSb3V0ZURlZmluaXRpb24ucm91dGVEZWZpbml0aW9ufSlcblxuICAgIHJldHVybiAoXG4gICAgICA8U3VzcGVuc2UgZmFsbGJhY2s9ezxkaXYgLz59PlxuICAgICAgICA8Q29tcG9uZW50IG1hdGNoPXttYXRjaH0gLz5cbiAgICAgIDwvU3VzcGVuc2U+XG4gICAgKVxuICB9XG59KSlcbiJdfQ==