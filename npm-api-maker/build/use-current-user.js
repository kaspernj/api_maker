import { useContext } from "react"; // eslint-disable-line sort-imports
import Devise from "./devise.js";
import { EventEmitter } from "eventemitter3"; // eslint-disable-line sort-imports
import Logger from "./logger.js"; // eslint-disable-line sort-imports
const events = new EventEmitter();
const logger = new Logger({ name: "ApiMaker / useCurrentUser" });
logger.setDebug(false);
/**
 * @param {object} props
 * @param {string} [props.scope]
 * @param {boolean} [props.withData]
 * @returns {import("./base-model.js").default}
 */
const useCurrentUser = (props = {}) => {
    const { scope = "user", withData, ...restProps } = props;
    if (Object.keys(restProps).length > 0) {
        throw new Error(`Unknown props given to useCurrentUser: ${Object.keys(restProps).join(", ")}`);
    }
    const scopeInstance = Devise.getScope(scope);
    const currentUserContext = useContext(scopeInstance.getContext());
    if (withData) {
        return currentUserContext;
    }
    else {
        return currentUserContext.model;
    }
};
export { events };
export default useCurrentUser;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlLWN1cnJlbnQtdXNlci5qcyIsInNvdXJjZVJvb3QiOiIvc3JjLyIsInNvdXJjZXMiOlsidXNlLWN1cnJlbnQtdXNlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUMsVUFBVSxFQUFDLE1BQU0sT0FBTyxDQUFBLENBQUMsbUNBQW1DO0FBQ3BFLE9BQU8sTUFBTSxNQUFNLGFBQWEsQ0FBQTtBQUNoQyxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0sZUFBZSxDQUFBLENBQUMsbUNBQW1DO0FBQzlFLE9BQU8sTUFBTSxNQUFNLGFBQWEsQ0FBQSxDQUFDLG1DQUFtQztBQUVwRSxNQUFNLE1BQU0sR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFBO0FBQ2pDLE1BQU0sTUFBTSxHQUFHLElBQUksTUFBTSxDQUFDLEVBQUMsSUFBSSxFQUFFLDJCQUEyQixFQUFDLENBQUMsQ0FBQTtBQUU5RCxNQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFBO0FBRXRCOzs7OztHQUtHO0FBQ0gsTUFBTSxjQUFjLEdBQUcsQ0FBQyxLQUFLLEdBQUcsRUFBRSxFQUFFLEVBQUU7SUFDcEMsTUFBTSxFQUFDLEtBQUssR0FBRyxNQUFNLEVBQUUsUUFBUSxFQUFFLEdBQUcsU0FBUyxFQUFDLEdBQUcsS0FBSyxDQUFBO0lBRXRELElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7UUFDdEMsTUFBTSxJQUFJLEtBQUssQ0FBQywwQ0FBMEMsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFBO0lBQ2hHLENBQUM7SUFFRCxNQUFNLGFBQWEsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFBO0lBQzVDLE1BQU0sa0JBQWtCLEdBQUcsVUFBVSxDQUFDLGFBQWEsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFBO0lBRWpFLElBQUksUUFBUSxFQUFFLENBQUM7UUFDYixPQUFPLGtCQUFrQixDQUFBO0lBQzNCLENBQUM7U0FBTSxDQUFDO1FBQ04sT0FBTyxrQkFBa0IsQ0FBQyxLQUFLLENBQUE7SUFDakMsQ0FBQztBQUNILENBQUMsQ0FBQTtBQUVELE9BQU8sRUFBQyxNQUFNLEVBQUMsQ0FBQTtBQUNmLGVBQWUsY0FBYyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHt1c2VDb250ZXh0fSBmcm9tIFwicmVhY3RcIiAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHNvcnQtaW1wb3J0c1xuaW1wb3J0IERldmlzZSBmcm9tIFwiLi9kZXZpc2UuanNcIlxuaW1wb3J0IHtFdmVudEVtaXR0ZXJ9IGZyb20gXCJldmVudGVtaXR0ZXIzXCIgLy8gZXNsaW50LWRpc2FibGUtbGluZSBzb3J0LWltcG9ydHNcbmltcG9ydCBMb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLmpzXCIgLy8gZXNsaW50LWRpc2FibGUtbGluZSBzb3J0LWltcG9ydHNcblxuY29uc3QgZXZlbnRzID0gbmV3IEV2ZW50RW1pdHRlcigpXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKHtuYW1lOiBcIkFwaU1ha2VyIC8gdXNlQ3VycmVudFVzZXJcIn0pXG5cbmxvZ2dlci5zZXREZWJ1ZyhmYWxzZSlcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gcHJvcHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvcHMuc2NvcGVdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtwcm9wcy53aXRoRGF0YV1cbiAqIEByZXR1cm5zIHtpbXBvcnQoXCIuL2Jhc2UtbW9kZWwuanNcIikuZGVmYXVsdH1cbiAqL1xuY29uc3QgdXNlQ3VycmVudFVzZXIgPSAocHJvcHMgPSB7fSkgPT4ge1xuICBjb25zdCB7c2NvcGUgPSBcInVzZXJcIiwgd2l0aERhdGEsIC4uLnJlc3RQcm9wc30gPSBwcm9wc1xuXG4gIGlmIChPYmplY3Qua2V5cyhyZXN0UHJvcHMpLmxlbmd0aCA+IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gcHJvcHMgZ2l2ZW4gdG8gdXNlQ3VycmVudFVzZXI6ICR7T2JqZWN0LmtleXMocmVzdFByb3BzKS5qb2luKFwiLCBcIil9YClcbiAgfVxuXG4gIGNvbnN0IHNjb3BlSW5zdGFuY2UgPSBEZXZpc2UuZ2V0U2NvcGUoc2NvcGUpXG4gIGNvbnN0IGN1cnJlbnRVc2VyQ29udGV4dCA9IHVzZUNvbnRleHQoc2NvcGVJbnN0YW5jZS5nZXRDb250ZXh0KCkpXG5cbiAgaWYgKHdpdGhEYXRhKSB7XG4gICAgcmV0dXJuIGN1cnJlbnRVc2VyQ29udGV4dFxuICB9IGVsc2Uge1xuICAgIHJldHVybiBjdXJyZW50VXNlckNvbnRleHQubW9kZWxcbiAgfVxufVxuXG5leHBvcnQge2V2ZW50c31cbmV4cG9ydCBkZWZhdWx0IHVzZUN1cnJlbnRVc2VyXG4iXX0=