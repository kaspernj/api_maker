import Collection from "./collection.js";
import { digg } from "diggerize";
import memo from "set-state-compare/build/memo.js";
import { useMemo } from "react";
import PropTypes from "prop-types";
import PropTypesExact from "prop-types-exact";
import useCollection from "./use-collection.js";
import useShape from "set-state-compare/build/use-shape.js";
const CollectionLoader = ({ component, ...restProps }) => {
    const s = useShape(restProps);
    const useCollectionResult = useCollection(restProps);
    const cachePartsKeys = [
        "modelIdsCacheString",
        "overallCount",
        "qParams",
        "queryName",
        "queryPerKey",
        "queryQName",
        "querySName",
        "queryPageName",
        "searchParams",
        "showNoRecordsAvailableContent",
        "showNoRecordsFoundContent"
    ];
    const cacheParts = [];
    for (const cachePartsKey of cachePartsKeys) {
        cacheParts.push(digg(useCollectionResult, cachePartsKey));
    }
    s.updateMeta({ component, useCollectionResult });
    useMemo(() => {
        s.m.component.setState(s.m.useCollectionResult);
    }, cacheParts);
    return null;
};
CollectionLoader.propTypes = PropTypesExact({
    abilities: PropTypes.object,
    collection: PropTypes.instanceOf(Collection),
    component: PropTypes.object.isRequired,
    defaultParams: PropTypes.object,
    groupBy: PropTypes.array,
    modelClass: PropTypes.func.isRequired,
    noRecordsAvailableContent: PropTypes.func,
    noRecordsFoundContent: PropTypes.func,
    onModelsLoaded: PropTypes.func,
    pagination: PropTypes.bool,
    preloads: PropTypes.array,
    queryMethod: PropTypes.func,
    queryName: PropTypes.string,
    ransack: PropTypes.object,
    select: PropTypes.object,
    selectColumns: PropTypes.object
});
export default memo(CollectionLoader);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sbGVjdGlvbi1sb2FkZXIuanMiLCJzb3VyY2VSb290IjoiL3NyYy8iLCJzb3VyY2VzIjpbImNvbGxlY3Rpb24tbG9hZGVyLmpzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLFVBQVUsTUFBTSxpQkFBaUIsQ0FBQTtBQUN4QyxPQUFPLEVBQUMsSUFBSSxFQUFDLE1BQU0sV0FBVyxDQUFBO0FBQzlCLE9BQU8sSUFBSSxNQUFNLGlDQUFpQyxDQUFBO0FBQ2xELE9BQU8sRUFBQyxPQUFPLEVBQUMsTUFBTSxPQUFPLENBQUE7QUFDN0IsT0FBTyxTQUFTLE1BQU0sWUFBWSxDQUFBO0FBQ2xDLE9BQU8sY0FBYyxNQUFNLGtCQUFrQixDQUFBO0FBQzdDLE9BQU8sYUFBYSxNQUFNLHFCQUFxQixDQUFBO0FBQy9DLE9BQU8sUUFBUSxNQUFNLHNDQUFzQyxDQUFBO0FBRTNELE1BQU0sZ0JBQWdCLEdBQUcsQ0FBQyxFQUFDLFNBQVMsRUFBRSxHQUFHLFNBQVMsRUFBQyxFQUFFLEVBQUU7SUFDckQsTUFBTSxDQUFDLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFBO0lBQzdCLE1BQU0sbUJBQW1CLEdBQUcsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFBO0lBQ3BELE1BQU0sY0FBYyxHQUFHO1FBQ3JCLHFCQUFxQjtRQUNyQixjQUFjO1FBQ2QsU0FBUztRQUNULFdBQVc7UUFDWCxhQUFhO1FBQ2IsWUFBWTtRQUNaLFlBQVk7UUFDWixlQUFlO1FBQ2YsY0FBYztRQUNkLCtCQUErQjtRQUMvQiwyQkFBMkI7S0FDNUIsQ0FBQTtJQUNELE1BQU0sVUFBVSxHQUFHLEVBQUUsQ0FBQTtJQUVyQixLQUFJLE1BQU0sYUFBYSxJQUFJLGNBQWMsRUFBRSxDQUFDO1FBQzFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixFQUFFLGFBQWEsQ0FBQyxDQUFDLENBQUE7SUFDM0QsQ0FBQztJQUVELENBQUMsQ0FBQyxVQUFVLENBQUMsRUFBQyxTQUFTLEVBQUUsbUJBQW1CLEVBQUMsQ0FBQyxDQUFBO0lBRTlDLE9BQU8sQ0FBQyxHQUFHLEVBQUU7UUFDWCxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFBO0lBQ2pELENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQTtJQUVkLE9BQU8sSUFBSSxDQUFBO0FBQ2IsQ0FBQyxDQUFBO0FBRUQsZ0JBQWdCLENBQUMsU0FBUyxHQUFHLGNBQWMsQ0FBQztJQUMxQyxTQUFTLEVBQUUsU0FBUyxDQUFDLE1BQU07SUFDM0IsVUFBVSxFQUFFLFNBQVMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDO0lBQzVDLFNBQVMsRUFBRSxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVU7SUFDdEMsYUFBYSxFQUFFLFNBQVMsQ0FBQyxNQUFNO0lBQy9CLE9BQU8sRUFBRSxTQUFTLENBQUMsS0FBSztJQUN4QixVQUFVLEVBQUUsU0FBUyxDQUFDLElBQUksQ0FBQyxVQUFVO0lBQ3JDLHlCQUF5QixFQUFFLFNBQVMsQ0FBQyxJQUFJO0lBQ3pDLHFCQUFxQixFQUFFLFNBQVMsQ0FBQyxJQUFJO0lBQ3JDLGNBQWMsRUFBRSxTQUFTLENBQUMsSUFBSTtJQUM5QixVQUFVLEVBQUUsU0FBUyxDQUFDLElBQUk7SUFDMUIsUUFBUSxFQUFFLFNBQVMsQ0FBQyxLQUFLO0lBQ3pCLFdBQVcsRUFBRSxTQUFTLENBQUMsSUFBSTtJQUMzQixTQUFTLEVBQUUsU0FBUyxDQUFDLE1BQU07SUFDM0IsT0FBTyxFQUFFLFNBQVMsQ0FBQyxNQUFNO0lBQ3pCLE1BQU0sRUFBRSxTQUFTLENBQUMsTUFBTTtJQUN4QixhQUFhLEVBQUUsU0FBUyxDQUFDLE1BQU07Q0FDaEMsQ0FBQyxDQUFBO0FBRUYsZUFBZSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb2xsZWN0aW9uIGZyb20gXCIuL2NvbGxlY3Rpb24uanNcIlxuaW1wb3J0IHtkaWdnfSBmcm9tIFwiZGlnZ2VyaXplXCJcbmltcG9ydCBtZW1vIGZyb20gXCJzZXQtc3RhdGUtY29tcGFyZS9idWlsZC9tZW1vLmpzXCJcbmltcG9ydCB7dXNlTWVtb30gZnJvbSBcInJlYWN0XCJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIlxuaW1wb3J0IFByb3BUeXBlc0V4YWN0IGZyb20gXCJwcm9wLXR5cGVzLWV4YWN0XCJcbmltcG9ydCB1c2VDb2xsZWN0aW9uIGZyb20gXCIuL3VzZS1jb2xsZWN0aW9uLmpzXCJcbmltcG9ydCB1c2VTaGFwZSBmcm9tIFwic2V0LXN0YXRlLWNvbXBhcmUvYnVpbGQvdXNlLXNoYXBlLmpzXCJcblxuY29uc3QgQ29sbGVjdGlvbkxvYWRlciA9ICh7Y29tcG9uZW50LCAuLi5yZXN0UHJvcHN9KSA9PiB7XG4gIGNvbnN0IHMgPSB1c2VTaGFwZShyZXN0UHJvcHMpXG4gIGNvbnN0IHVzZUNvbGxlY3Rpb25SZXN1bHQgPSB1c2VDb2xsZWN0aW9uKHJlc3RQcm9wcylcbiAgY29uc3QgY2FjaGVQYXJ0c0tleXMgPSBbXG4gICAgXCJtb2RlbElkc0NhY2hlU3RyaW5nXCIsXG4gICAgXCJvdmVyYWxsQ291bnRcIixcbiAgICBcInFQYXJhbXNcIixcbiAgICBcInF1ZXJ5TmFtZVwiLFxuICAgIFwicXVlcnlQZXJLZXlcIixcbiAgICBcInF1ZXJ5UU5hbWVcIixcbiAgICBcInF1ZXJ5U05hbWVcIixcbiAgICBcInF1ZXJ5UGFnZU5hbWVcIixcbiAgICBcInNlYXJjaFBhcmFtc1wiLFxuICAgIFwic2hvd05vUmVjb3Jkc0F2YWlsYWJsZUNvbnRlbnRcIixcbiAgICBcInNob3dOb1JlY29yZHNGb3VuZENvbnRlbnRcIlxuICBdXG4gIGNvbnN0IGNhY2hlUGFydHMgPSBbXVxuXG4gIGZvcihjb25zdCBjYWNoZVBhcnRzS2V5IG9mIGNhY2hlUGFydHNLZXlzKSB7XG4gICAgY2FjaGVQYXJ0cy5wdXNoKGRpZ2codXNlQ29sbGVjdGlvblJlc3VsdCwgY2FjaGVQYXJ0c0tleSkpXG4gIH1cblxuICBzLnVwZGF0ZU1ldGEoe2NvbXBvbmVudCwgdXNlQ29sbGVjdGlvblJlc3VsdH0pXG5cbiAgdXNlTWVtbygoKSA9PiB7XG4gICAgcy5tLmNvbXBvbmVudC5zZXRTdGF0ZShzLm0udXNlQ29sbGVjdGlvblJlc3VsdClcbiAgfSwgY2FjaGVQYXJ0cylcblxuICByZXR1cm4gbnVsbFxufVxuXG5Db2xsZWN0aW9uTG9hZGVyLnByb3BUeXBlcyA9IFByb3BUeXBlc0V4YWN0KHtcbiAgYWJpbGl0aWVzOiBQcm9wVHlwZXMub2JqZWN0LFxuICBjb2xsZWN0aW9uOiBQcm9wVHlwZXMuaW5zdGFuY2VPZihDb2xsZWN0aW9uKSxcbiAgY29tcG9uZW50OiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gIGRlZmF1bHRQYXJhbXM6IFByb3BUeXBlcy5vYmplY3QsXG4gIGdyb3VwQnk6IFByb3BUeXBlcy5hcnJheSxcbiAgbW9kZWxDbGFzczogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgbm9SZWNvcmRzQXZhaWxhYmxlQ29udGVudDogUHJvcFR5cGVzLmZ1bmMsXG4gIG5vUmVjb3Jkc0ZvdW5kQ29udGVudDogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uTW9kZWxzTG9hZGVkOiBQcm9wVHlwZXMuZnVuYyxcbiAgcGFnaW5hdGlvbjogUHJvcFR5cGVzLmJvb2wsXG4gIHByZWxvYWRzOiBQcm9wVHlwZXMuYXJyYXksXG4gIHF1ZXJ5TWV0aG9kOiBQcm9wVHlwZXMuZnVuYyxcbiAgcXVlcnlOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICByYW5zYWNrOiBQcm9wVHlwZXMub2JqZWN0LFxuICBzZWxlY3Q6IFByb3BUeXBlcy5vYmplY3QsXG4gIHNlbGVjdENvbHVtbnM6IFByb3BUeXBlcy5vYmplY3Rcbn0pXG5cbmV4cG9ydCBkZWZhdWx0IG1lbW8oQ29sbGVjdGlvbkxvYWRlcilcbiJdfQ==