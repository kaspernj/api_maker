import BaseComponent from "../base-component.js";
import inputWrapper from "./input-wrapper.js";
import memo from "set-state-compare/build/memo.js";
import PropTypes from "prop-types";
import React from "react";
import { shapeComponent } from "set-state-compare/build/shape-component.js";
import { useForm } from "../form.js";
const ApiMakerInputsSelect = memo(shapeComponent(class ApiMakerInputsSelect extends BaseComponent {
    static propTypes = {
        attribute: PropTypes.string,
        children: PropTypes.any,
        defaultValue: PropTypes.oneOfType([PropTypes.array, PropTypes.number, PropTypes.string]),
        id: PropTypes.string,
        includeBlank: PropTypes.oneOfType([PropTypes.bool, PropTypes.any]),
        inputProps: PropTypes.object.isRequired,
        model: PropTypes.object,
        name: PropTypes.string,
        onChange: PropTypes.func,
        options: PropTypes.array,
        wrapperOpts: PropTypes.object.isRequired
    };
    setup() {
        this.form = useForm();
    }
    render() {
        const { attribute, children, defaultValue, id, includeBlank, inputProps, inputRef, model, name, onChange, options, wrapperOpts, ...restProps } = this.props;
        return (<select onChange={this.tt.onChange} {...inputProps} {...restProps}>
        {this.includeBlank() &&
                <option data-include-blank="true">
            {typeof includeBlank != "boolean" ? includeBlank : null}
          </option>}
        {options && options.map((option) => <option key={this.optionKey(option)} value={this.optionValue(option)}>
            {this.optionLabel(option)}
          </option>)}
        {children}
      </select>);
    }
    onChange = (e) => {
        const { form } = this.tt;
        const { name, onChange } = this.props;
        if (form && name)
            form.setValue(name, e.target.value);
        if (onChange)
            onChange(e);
    };
    optionKey(option) {
        if (Array.isArray(option)) {
            return `select-option-${option[1]}`;
        }
        else {
            return `select-option-${option}`;
        }
    }
    optionLabel(option) {
        if (Array.isArray(option)) {
            return option[0];
        }
        else {
            return option;
        }
    }
    optionValue(option) {
        if (Array.isArray(option)) {
            return option[1];
        }
        else {
            return option;
        }
    }
    includeBlank() {
        if (this.props.includeBlank && !this.props.multiple) {
            return true;
        }
        else {
            return false;
        }
    }
}));
export { ApiMakerInputsSelect as Select };
export default inputWrapper(ApiMakerInputsSelect);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0LmpzIiwic291cmNlUm9vdCI6Ii9zcmMvIiwic291cmNlcyI6WyJpbnB1dHMvc2VsZWN0LmpzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLGFBQWEsTUFBTSxzQkFBc0IsQ0FBQTtBQUNoRCxPQUFPLFlBQVksTUFBTSxvQkFBb0IsQ0FBQTtBQUM3QyxPQUFPLElBQUksTUFBTSxpQ0FBaUMsQ0FBQTtBQUNsRCxPQUFPLFNBQVMsTUFBTSxZQUFZLENBQUE7QUFDbEMsT0FBTyxLQUFLLE1BQU0sT0FBTyxDQUFBO0FBQ3pCLE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSw0Q0FBNEMsQ0FBQTtBQUN6RSxPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sWUFBWSxDQUFBO0FBRWxDLE1BQU0sb0JBQW9CLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLG9CQUFxQixTQUFRLGFBQWE7SUFDL0YsTUFBTSxDQUFDLFNBQVMsR0FBRztRQUNqQixTQUFTLEVBQUUsU0FBUyxDQUFDLE1BQU07UUFDM0IsUUFBUSxFQUFFLFNBQVMsQ0FBQyxHQUFHO1FBQ3ZCLFlBQVksRUFBRSxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN4RixFQUFFLEVBQUUsU0FBUyxDQUFDLE1BQU07UUFDcEIsWUFBWSxFQUFFLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNsRSxVQUFVLEVBQUUsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVO1FBQ3ZDLEtBQUssRUFBRSxTQUFTLENBQUMsTUFBTTtRQUN2QixJQUFJLEVBQUUsU0FBUyxDQUFDLE1BQU07UUFDdEIsUUFBUSxFQUFFLFNBQVMsQ0FBQyxJQUFJO1FBQ3hCLE9BQU8sRUFBRSxTQUFTLENBQUMsS0FBSztRQUN4QixX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QUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNwRCxPQUFPLElBQUksQ0FBQTtRQUNiLENBQUM7YUFBTSxDQUFDO1lBQ04sT0FBTyxLQUFLLENBQUE7UUFDZCxDQUFDO0lBQ0gsQ0FBQztDQUNGLENBQUMsQ0FBQyxDQUFBO0FBRUgsT0FBTyxFQUFDLG9CQUFvQixJQUFJLE1BQU0sRUFBQyxDQUFBO0FBQ3ZDLGVBQWUsWUFBWSxDQUFDLG9CQUFvQixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZUNvbXBvbmVudCBmcm9tIFwiLi4vYmFzZS1jb21wb25lbnQuanNcIlxuaW1wb3J0IGlucHV0V3JhcHBlciBmcm9tIFwiLi9pbnB1dC13cmFwcGVyLmpzXCJcbmltcG9ydCBtZW1vIGZyb20gXCJzZXQtc3RhdGUtY29tcGFyZS9idWlsZC9tZW1vLmpzXCJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIlxuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiXG5pbXBvcnQge3NoYXBlQ29tcG9uZW50fSBmcm9tIFwic2V0LXN0YXRlLWNvbXBhcmUvYnVpbGQvc2hhcGUtY29tcG9uZW50LmpzXCJcbmltcG9ydCB7dXNlRm9ybX0gZnJvbSBcIi4uL2Zvcm0uanNcIlxuXG5jb25zdCBBcGlNYWtlcklucHV0c1NlbGVjdCA9IG1lbW8oc2hhcGVDb21wb25lbnQoY2xhc3MgQXBpTWFrZXJJbnB1dHNTZWxlY3QgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBhdHRyaWJ1dGU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgY2hpbGRyZW46IFByb3BUeXBlcy5hbnksXG4gICAgZGVmYXVsdFZhbHVlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuYXJyYXksIFByb3BUeXBlcy5udW1iZXIsIFByb3BUeXBlcy5zdHJpbmddKSxcbiAgICBpZDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBpbmNsdWRlQmxhbms6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5ib29sLCBQcm9wVHlwZXMuYW55XSksXG4gICAgaW5wdXRQcm9wczogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIG1vZGVsOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLFxuICAgIG9wdGlvbnM6IFByb3BUeXBlcy5hcnJheSxcbiAgICB3cmFwcGVyT3B0czogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkXG4gIH1cblxuICBzZXR1cCgpIHtcbiAgICB0aGlzLmZvcm0gPSB1c2VGb3JtKClcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3Qge1xuICAgICAgYXR0cmlidXRlLFxuICAgICAgY2hpbGRyZW4sXG4gICAgICBkZWZhdWx0VmFsdWUsXG4gICAgICBpZCxcbiAgICAgIGluY2x1ZGVCbGFuayxcbiAgICAgIGlucHV0UHJvcHMsXG4gICAgICBpbnB1dFJlZixcbiAgICAgIG1vZGVsLFxuICAgICAgbmFtZSxcbiAgICAgIG9uQ2hhbmdlLFxuICAgICAgb3B0aW9ucyxcbiAgICAgIHdyYXBwZXJPcHRzLFxuICAgICAgLi4ucmVzdFByb3BzXG4gICAgfSA9IHRoaXMucHJvcHNcblxuICAgIHJldHVybiAoXG4gICAgICA8c2VsZWN0IG9uQ2hhbmdlPXt0aGlzLnR0Lm9uQ2hhbmdlfSB7Li4uaW5wdXRQcm9wc30gey4uLnJlc3RQcm9wc30+XG4gICAgICAgIHt0aGlzLmluY2x1ZGVCbGFuaygpICYmXG4gICAgICAgICAgPG9wdGlvbiBkYXRhLWluY2x1ZGUtYmxhbms9XCJ0cnVlXCI+XG4gICAgICAgICAgICB7dHlwZW9mIGluY2x1ZGVCbGFuayAhPSBcImJvb2xlYW5cIiA/IGluY2x1ZGVCbGFuayA6IG51bGx9XG4gICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgIH1cbiAgICAgICAge29wdGlvbnMgJiYgb3B0aW9ucy5tYXAoKG9wdGlvbikgPT5cbiAgICAgICAgICA8b3B0aW9uIGtleT17dGhpcy5vcHRpb25LZXkob3B0aW9uKX0gdmFsdWU9e3RoaXMub3B0aW9uVmFsdWUob3B0aW9uKX0+XG4gICAgICAgICAgICB7dGhpcy5vcHRpb25MYWJlbChvcHRpb24pfVxuICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICApfVxuICAgICAgICB7Y2hpbGRyZW59XG4gICAgICA8L3NlbGVjdD5cbiAgICApXG4gIH1cblxuICBvbkNoYW5nZSA9IChlKSA9PiB7XG4gICAgY29uc3Qge2Zvcm19ID0gdGhpcy50dFxuICAgIGNvbnN0IHtuYW1lLCBvbkNoYW5nZX0gPSB0aGlzLnByb3BzXG5cbiAgICBpZiAoZm9ybSAmJiBuYW1lKSBmb3JtLnNldFZhbHVlKG5hbWUsIGUudGFyZ2V0LnZhbHVlKVxuICAgIGlmIChvbkNoYW5nZSkgb25DaGFuZ2UoZSlcbiAgfVxuXG4gIG9wdGlvbktleSAob3B0aW9uKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9uKSkge1xuICAgICAgcmV0dXJuIGBzZWxlY3Qtb3B0aW9uLSR7b3B0aW9uWzFdfWBcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGBzZWxlY3Qtb3B0aW9uLSR7b3B0aW9ufWBcbiAgICB9XG4gIH1cblxuICBvcHRpb25MYWJlbCAob3B0aW9uKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9uKSkge1xuICAgICAgcmV0dXJuIG9wdGlvblswXVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb3B0aW9uXG4gICAgfVxuICB9XG5cbiAgb3B0aW9uVmFsdWUgKG9wdGlvbikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbikpIHtcbiAgICAgIHJldHVybiBvcHRpb25bMV1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG9wdGlvblxuICAgIH1cbiAgfVxuXG4gIGluY2x1ZGVCbGFuayAoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuaW5jbHVkZUJsYW5rICYmICF0aGlzLnByb3BzLm11bHRpcGxlKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cbn0pKVxuXG5leHBvcnQge0FwaU1ha2VySW5wdXRzU2VsZWN0IGFzIFNlbGVjdH1cbmV4cG9ydCBkZWZhdWx0IGlucHV0V3JhcHBlcihBcGlNYWtlcklucHV0c1NlbGVjdClcbiJdfQ==