import { digg } from "diggerize";
import * as inflection from "inflection";
export default class ApiMakerInputsAutoSubmit {
    constructor({ component }) {
        this.component = component;
    }
    autoSubmit() {
        const { attribute, model } = this.component.props;
        const updateAttributeName = inflection.underscore(attribute);
        const updateParams = {};
        updateParams[updateAttributeName] = this.value();
        model.update(updateParams);
    }
    value() {
        const inputRef = this.component.props.inputRef || this.component.props.inputProps?.ref || this.component.inputProps?.ref || this.component.inputRef;
        const input = digg(inputRef, "current");
        if (input.type == "checkbox") {
            if (input.checked) {
                if (input.value !== undefined) {
                    return input.value;
                }
                else {
                    return 1;
                }
            }
            else {
                return 0;
            }
        }
        return digg(input, "value");
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXV0by1zdWJtaXQuanMiLCJzb3VyY2VSb290IjoiL3NyYy8iLCJzb3VyY2VzIjpbImlucHV0cy9hdXRvLXN1Ym1pdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUMsSUFBSSxFQUFDLE1BQU0sV0FBVyxDQUFBO0FBQzlCLE9BQU8sS0FBSyxVQUFVLE1BQU0sWUFBWSxDQUFBO0FBRXhDLE1BQU0sQ0FBQyxPQUFPLE9BQU8sd0JBQXdCO0lBQzNDLFlBQWEsRUFBQyxTQUFTLEVBQUM7UUFDdEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUE7SUFDNUIsQ0FBQztJQUVELFVBQVU7UUFDUixNQUFNLEVBQUMsU0FBUyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFBO1FBQy9DLE1BQU0sbUJBQW1CLEdBQUcsVUFBVSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUM1RCxNQUFNLFlBQVksR0FBRyxFQUFFLENBQUE7UUFFdkIsWUFBWSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFBO1FBRWhELEtBQUssQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUE7SUFDNUIsQ0FBQztJQUVELEtBQUs7UUFDSCxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsVUFBVSxFQUFFLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsRUFBRSxHQUFHLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUE7UUFDbkosTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxTQUFTLENBQUMsQ0FBQTtRQUV2QyxJQUFJLEtBQUssQ0FBQyxJQUFJLElBQUksVUFBVSxFQUFFLENBQUM7WUFDN0IsSUFBSSxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQ2xCLElBQUksS0FBSyxDQUFDLEtBQUssS0FBSyxTQUFTLEVBQUUsQ0FBQztvQkFDOUIsT0FBTyxLQUFLLENBQUMsS0FBSyxDQUFBO2dCQUNwQixDQUFDO3FCQUFNLENBQUM7b0JBQ04sT0FBTyxDQUFDLENBQUE7Z0JBQ1YsQ0FBQztZQUNILENBQUM7aUJBQU0sQ0FBQztnQkFDTixPQUFPLENBQUMsQ0FBQTtZQUNWLENBQUM7UUFDSCxDQUFDO1FBRUQsT0FBTyxJQUFJLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFBO0lBQzdCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7ZGlnZ30gZnJvbSBcImRpZ2dlcml6ZVwiXG5pbXBvcnQgKiBhcyBpbmZsZWN0aW9uIGZyb20gXCJpbmZsZWN0aW9uXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpTWFrZXJJbnB1dHNBdXRvU3VibWl0IHtcbiAgY29uc3RydWN0b3IgKHtjb21wb25lbnR9KSB7XG4gICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnRcbiAgfVxuXG4gIGF1dG9TdWJtaXQgKCkge1xuICAgIGNvbnN0IHthdHRyaWJ1dGUsIG1vZGVsfSA9IHRoaXMuY29tcG9uZW50LnByb3BzXG4gICAgY29uc3QgdXBkYXRlQXR0cmlidXRlTmFtZSA9IGluZmxlY3Rpb24udW5kZXJzY29yZShhdHRyaWJ1dGUpXG4gICAgY29uc3QgdXBkYXRlUGFyYW1zID0ge31cblxuICAgIHVwZGF0ZVBhcmFtc1t1cGRhdGVBdHRyaWJ1dGVOYW1lXSA9IHRoaXMudmFsdWUoKVxuXG4gICAgbW9kZWwudXBkYXRlKHVwZGF0ZVBhcmFtcylcbiAgfVxuXG4gIHZhbHVlICgpIHtcbiAgICBjb25zdCBpbnB1dFJlZiA9IHRoaXMuY29tcG9uZW50LnByb3BzLmlucHV0UmVmIHx8IHRoaXMuY29tcG9uZW50LnByb3BzLmlucHV0UHJvcHM/LnJlZiB8fCB0aGlzLmNvbXBvbmVudC5pbnB1dFByb3BzPy5yZWYgfHwgdGhpcy5jb21wb25lbnQuaW5wdXRSZWZcbiAgICBjb25zdCBpbnB1dCA9IGRpZ2coaW5wdXRSZWYsIFwiY3VycmVudFwiKVxuXG4gICAgaWYgKGlucHV0LnR5cGUgPT0gXCJjaGVja2JveFwiKSB7XG4gICAgICBpZiAoaW5wdXQuY2hlY2tlZCkge1xuICAgICAgICBpZiAoaW5wdXQudmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJldHVybiBpbnB1dC52YWx1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiAxXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAwXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRpZ2coaW5wdXQsIFwidmFsdWVcIilcbiAgfVxufVxuIl19