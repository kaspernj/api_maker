import { Animated, View } from "react-native";
import React, { useMemo } from "react";
import BaseComponent from "../base-component.js";
import classNames from "classnames";
import Column from "./components/column.js";
import ColumnContent from "./column-content.js";
import columnIdentifier from "./column-identifier.js";
import { EventEmitter } from "eventemitter3";
import PropTypes from "prop-types";
import propTypesExact from "prop-types-exact";
import memo from "set-state-compare/build/memo.js";
import { shapeComponent } from "set-state-compare/build/shape-component.js";
import Text from "../utils/text.js";
import useBreakpoint from "../use-breakpoint.js";
import useI18n from "i18n-on-steroids/src/use-i18n.mjs";
export default memo(shapeComponent(class ApiMakerTableModelColumn extends BaseComponent {
    static propTypes = propTypesExact({
        animatedPosition: PropTypes.instanceOf(Animated.ValueXY).isRequired,
        animatedWidth: PropTypes.instanceOf(Animated.Value).isRequired,
        animatedZIndex: PropTypes.instanceOf(Animated.Value).isRequired,
        column: PropTypes.object.isRequired,
        columnIndex: PropTypes.number.isRequired,
        even: PropTypes.bool.isRequired,
        events: PropTypes.instanceOf(EventEmitter).isRequired,
        model: PropTypes.object.isRequired,
        table: PropTypes.object.isRequired,
        tableSettingColumn: PropTypes.object.isRequired
    });
    render() {
        const { l, t } = useI18n({ namespace: "js.api_maker.table.model_column" });
        const { mdUp } = useBreakpoint();
        const { animatedWidth, animatedZIndex, column, columnIndex, even, model, table } = this.props;
        const columnProps = table.columnProps(column);
        const { style, ...restColumnProps } = columnProps;
        const actualStyle = useMemo(() => Object.assign(table.styleForColumn({
            column,
            columnIndex,
            even,
            style: {
                zIndex: animatedZIndex,
                transform: this.p.animatedPosition.getTranslateTransform(),
                width: mdUp ? animatedWidth : "100%"
            }
        }), style), [column, columnIndex, even, animatedZIndex, mdUp, animatedWidth, style]);
        const className = classNames(this.columnClassNamesForColumn(column));
        const identifier = columnIdentifier(column);
        const dataSet = useMemo(() => ({ class: className, identifier }), [className]);
        return (<Column dataSet={dataSet} style={actualStyle} {...restColumnProps}>
        {!mdUp &&
                <View dataSet={this.cache("columnLabelDataSet", { class: "table--column-label" })}>
            <Text style={this.cache("columnLabelTextStyle", { fontWeight: "bold" })}>
              {table.headerLabelForColumn(column)}
            </Text>
          </View>}
        <View dataSet={this.cache("columnValueDataSet", { class: "table--column-value" })}>
          {new ColumnContent({ column, l, model, t, table }).content()}
        </View>
      </Column>);
    }
    columnClassNamesForColumn(column) {
        const classNames = ["table--column"];
        if (column.commonProps && column.commonProps.className)
            classNames.push(column.commonProps.className);
        if (column.columnProps && column.columnProps.className)
            classNames.push(column.columnProps.className);
        return classNames;
    }
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kZWwtY29sdW1uLmpzIiwic291cmNlUm9vdCI6Ii9zcmMvIiwic291cmNlcyI6WyJ0YWJsZS9tb2RlbC1jb2x1bW4uanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBQyxRQUFRLEVBQUUsSUFBSSxFQUFDLE1BQU0sY0FBYyxDQUFBO0FBQzNDLE9BQU8sS0FBSyxFQUFFLEVBQUMsT0FBTyxFQUFDLE1BQU0sT0FBTyxDQUFBO0FBQ3BDLE9BQU8sYUFBYSxNQUFNLHNCQUFzQixDQUFBO0FBQ2hELE9BQU8sVUFBVSxNQUFNLFlBQVksQ0FBQTtBQUNuQyxPQUFPLE1BQU0sTUFBTSx3QkFBd0IsQ0FBQTtBQUMzQyxPQUFPLGFBQWEsTUFBTSxxQkFBcUIsQ0FBQTtBQUMvQyxPQUFPLGdCQUFnQixNQUFNLHdCQUF3QixDQUFBO0FBQ3JELE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxlQUFlLENBQUE7QUFDMUMsT0FBTyxTQUFTLE1BQU0sWUFBWSxDQUFBO0FBQ2xDLE9BQU8sY0FBYyxNQUFNLGtCQUFrQixDQUFBO0FBQzdDLE9BQU8sSUFBSSxNQUFNLGlDQUFpQyxDQUFBO0FBQ2xELE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSw0Q0FBNEMsQ0FBQTtBQUN6RSxPQUFPLElBQUksTUFBTSxrQkFBa0IsQ0FBQTtBQUNuQyxPQUFPLGFBQWEsTUFBTSxzQkFBc0IsQ0FBQTtBQUNoRCxPQUFPLE9BQU8sTUFBTSxtQ0FBbUMsQ0FBQTtBQUV2RCxlQUFlLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSx3QkFBeUIsU0FBUSxhQUFhO0lBQ3JGLE1BQU0sQ0FBQyxTQUFTLEdBQUcsY0FBYyxDQUFDO1FBQ2hDLGdCQUFnQixFQUFFLFNBQVMsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFVBQVU7UUFDbkUsYUFBYSxFQUFFLFNBQVMsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLFVBQVU7UUFDOUQsY0FBYyxF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O1VBQUEsRUFBRSxJQUFJLENBQ1IsQ0FDQTtRQUFBLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsb0JBQW9CLEVBQUUsRUFBQyxLQUFLLEVBQUUscUJBQXFCLEVBQUMsQ0FBQyxDQUFDLENBQzlFO1VBQUEsQ0FBQyxJQUFJLGFBQWEsQ0FBQyxFQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUM1RDtRQUFBLEVBQUUsSUFBSSxDQUNSO01BQUEsRUFBRSxNQUFNLENBQUMsQ0FDVixDQUFBO0lBQ0gsQ0FBQztJQUVELHlCQUF5QixDQUFDLE1BQU07UUFDOUIsTUFBTSxVQUFVLEdBQUcsQ0FBQyxlQUFlLENBQUMsQ0FBQTtRQUVwQyxJQUFJLE1BQU0sQ0FBQyxXQUFXLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxTQUFTO1lBQUUsVUFBVSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBQ3JHLElBQUksTUFBTSxDQUFDLFdBQVcsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLFNBQVM7WUFBRSxVQUFVLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUE7UUFFckcsT0FBTyxVQUFVLENBQUE7SUFDbkIsQ0FBQztDQUNGLENBQUMsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtBbmltYXRlZCwgVmlld30gZnJvbSBcInJlYWN0LW5hdGl2ZVwiXG5pbXBvcnQgUmVhY3QsIHt1c2VNZW1vfSBmcm9tIFwicmVhY3RcIlxuaW1wb3J0IEJhc2VDb21wb25lbnQgZnJvbSBcIi4uL2Jhc2UtY29tcG9uZW50LmpzXCJcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gXCJjbGFzc25hbWVzXCJcbmltcG9ydCBDb2x1bW4gZnJvbSBcIi4vY29tcG9uZW50cy9jb2x1bW4uanNcIlxuaW1wb3J0IENvbHVtbkNvbnRlbnQgZnJvbSBcIi4vY29sdW1uLWNvbnRlbnQuanNcIlxuaW1wb3J0IGNvbHVtbklkZW50aWZpZXIgZnJvbSBcIi4vY29sdW1uLWlkZW50aWZpZXIuanNcIlxuaW1wb3J0IHtFdmVudEVtaXR0ZXJ9IGZyb20gXCJldmVudGVtaXR0ZXIzXCJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIlxuaW1wb3J0IHByb3BUeXBlc0V4YWN0IGZyb20gXCJwcm9wLXR5cGVzLWV4YWN0XCJcbmltcG9ydCBtZW1vIGZyb20gXCJzZXQtc3RhdGUtY29tcGFyZS9idWlsZC9tZW1vLmpzXCJcbmltcG9ydCB7c2hhcGVDb21wb25lbnR9IGZyb20gXCJzZXQtc3RhdGUtY29tcGFyZS9idWlsZC9zaGFwZS1jb21wb25lbnQuanNcIlxuaW1wb3J0IFRleHQgZnJvbSBcIi4uL3V0aWxzL3RleHQuanNcIlxuaW1wb3J0IHVzZUJyZWFrcG9pbnQgZnJvbSBcIi4uL3VzZS1icmVha3BvaW50LmpzXCJcbmltcG9ydCB1c2VJMThuIGZyb20gXCJpMThuLW9uLXN0ZXJvaWRzL3NyYy91c2UtaTE4bi5tanNcIlxuXG5leHBvcnQgZGVmYXVsdCBtZW1vKHNoYXBlQ29tcG9uZW50KGNsYXNzIEFwaU1ha2VyVGFibGVNb2RlbENvbHVtbiBleHRlbmRzIEJhc2VDb21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0gcHJvcFR5cGVzRXhhY3Qoe1xuICAgIGFuaW1hdGVkUG9zaXRpb246IFByb3BUeXBlcy5pbnN0YW5jZU9mKEFuaW1hdGVkLlZhbHVlWFkpLmlzUmVxdWlyZWQsXG4gICAgYW5pbWF0ZWRXaWR0aDogUHJvcFR5cGVzLmluc3RhbmNlT2YoQW5pbWF0ZWQuVmFsdWUpLmlzUmVxdWlyZWQsXG4gICAgYW5pbWF0ZWRaSW5kZXg6IFByb3BUeXBlcy5pbnN0YW5jZU9mKEFuaW1hdGVkLlZhbHVlKS5pc1JlcXVpcmVkLFxuICAgIGNvbHVtbjogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIGNvbHVtbkluZGV4OiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgZXZlbjogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICBldmVudHM6IFByb3BUeXBlcy5pbnN0YW5jZU9mKEV2ZW50RW1pdHRlcikuaXNSZXF1aXJlZCxcbiAgICBtb2RlbDogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIHRhYmxlOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgdGFibGVTZXR0aW5nQ29sdW1uOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWRcbiAgfSlcblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge2wsIHR9ID0gdXNlSTE4bih7bmFtZXNwYWNlOiBcImpzLmFwaV9tYWtlci50YWJsZS5tb2RlbF9jb2x1bW5cIn0pXG4gICAgY29uc3Qge21kVXB9ID0gdXNlQnJlYWtwb2ludCgpXG4gICAgY29uc3Qge2FuaW1hdGVkV2lkdGgsIGFuaW1hdGVkWkluZGV4LCBjb2x1bW4sIGNvbHVtbkluZGV4LCBldmVuLCBtb2RlbCwgdGFibGV9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGNvbHVtblByb3BzID0gdGFibGUuY29sdW1uUHJvcHMoY29sdW1uKVxuICAgIGNvbnN0IHtzdHlsZSwgLi4ucmVzdENvbHVtblByb3BzfSA9IGNvbHVtblByb3BzXG4gICAgY29uc3QgYWN0dWFsU3R5bGUgPSB1c2VNZW1vKCgpID0+XG4gICAgICBPYmplY3QuYXNzaWduKFxuICAgICAgICB0YWJsZS5zdHlsZUZvckNvbHVtbih7XG4gICAgICAgICAgY29sdW1uLFxuICAgICAgICAgIGNvbHVtbkluZGV4LFxuICAgICAgICAgIGV2ZW4sXG4gICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgIHpJbmRleDogYW5pbWF0ZWRaSW5kZXgsXG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRoaXMucC5hbmltYXRlZFBvc2l0aW9uLmdldFRyYW5zbGF0ZVRyYW5zZm9ybSgpLFxuICAgICAgICAgICAgd2lkdGg6IG1kVXAgPyBhbmltYXRlZFdpZHRoIDogXCIxMDAlXCJcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICBzdHlsZVxuICAgICAgKSxcbiAgICAgIFtjb2x1bW4sIGNvbHVtbkluZGV4LCBldmVuLCBhbmltYXRlZFpJbmRleCwgbWRVcCwgYW5pbWF0ZWRXaWR0aCwgc3R5bGVdXG4gICAgKVxuXG4gICAgY29uc3QgY2xhc3NOYW1lID0gY2xhc3NOYW1lcyh0aGlzLmNvbHVtbkNsYXNzTmFtZXNGb3JDb2x1bW4oY29sdW1uKSlcbiAgICBjb25zdCBpZGVudGlmaWVyID0gY29sdW1uSWRlbnRpZmllcihjb2x1bW4pXG4gICAgY29uc3QgZGF0YVNldCA9IHVzZU1lbW8oKCkgPT4gKHtjbGFzczogY2xhc3NOYW1lLCBpZGVudGlmaWVyfSksIFtjbGFzc05hbWVdKVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxDb2x1bW5cbiAgICAgICAgZGF0YVNldD17ZGF0YVNldH1cbiAgICAgICAgc3R5bGU9e2FjdHVhbFN0eWxlfVxuICAgICAgICB7Li4ucmVzdENvbHVtblByb3BzfVxuICAgICAgPlxuICAgICAgICB7IW1kVXAgJiZcbiAgICAgICAgICA8VmlldyBkYXRhU2V0PXt0aGlzLmNhY2hlKFwiY29sdW1uTGFiZWxEYXRhU2V0XCIsIHtjbGFzczogXCJ0YWJsZS0tY29sdW1uLWxhYmVsXCJ9KX0+XG4gICAgICAgICAgICA8VGV4dCBzdHlsZT17dGhpcy5jYWNoZShcImNvbHVtbkxhYmVsVGV4dFN0eWxlXCIsIHtmb250V2VpZ2h0OiBcImJvbGRcIn0pfT5cbiAgICAgICAgICAgICAge3RhYmxlLmhlYWRlckxhYmVsRm9yQ29sdW1uKGNvbHVtbil9XG4gICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgPC9WaWV3PlxuICAgICAgICB9XG4gICAgICAgIDxWaWV3IGRhdGFTZXQ9e3RoaXMuY2FjaGUoXCJjb2x1bW5WYWx1ZURhdGFTZXRcIiwge2NsYXNzOiBcInRhYmxlLS1jb2x1bW4tdmFsdWVcIn0pfT5cbiAgICAgICAgICB7bmV3IENvbHVtbkNvbnRlbnQoe2NvbHVtbiwgbCwgbW9kZWwsIHQsIHRhYmxlfSkuY29udGVudCgpfVxuICAgICAgICA8L1ZpZXc+XG4gICAgICA8L0NvbHVtbj5cbiAgICApXG4gIH1cblxuICBjb2x1bW5DbGFzc05hbWVzRm9yQ29sdW1uKGNvbHVtbikge1xuICAgIGNvbnN0IGNsYXNzTmFtZXMgPSBbXCJ0YWJsZS0tY29sdW1uXCJdXG5cbiAgICBpZiAoY29sdW1uLmNvbW1vblByb3BzICYmIGNvbHVtbi5jb21tb25Qcm9wcy5jbGFzc05hbWUpIGNsYXNzTmFtZXMucHVzaChjb2x1bW4uY29tbW9uUHJvcHMuY2xhc3NOYW1lKVxuICAgIGlmIChjb2x1bW4uY29sdW1uUHJvcHMgJiYgY29sdW1uLmNvbHVtblByb3BzLmNsYXNzTmFtZSkgY2xhc3NOYW1lcy5wdXNoKGNvbHVtbi5jb2x1bW5Qcm9wcy5jbGFzc05hbWUpXG5cbiAgICByZXR1cm4gY2xhc3NOYW1lc1xuICB9XG59KSlcbiJdfQ==