import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { Animated, View } from "react-native";
import React, { useMemo } from "react";
import BaseComponent from "../base-component";
import classNames from "classnames";
import Column from "./components/column";
import ColumnContent from "./column-content";
import columnIdentifier from "./column-identifier.js";
import { EventEmitter } from "eventemitter3";
import PropTypes from "prop-types";
import propTypesExact from "prop-types-exact";
import memo from "set-state-compare/build/memo.js";
import { shapeComponent } from "set-state-compare/build/shape-component.js";
import Text from "../utils/text";
import useBreakpoint from "../use-breakpoint.js";
import useI18n from "i18n-on-steroids/src/use-i18n.mjs";
export default memo(shapeComponent(class ApiMakerTableModelColumn extends BaseComponent {
    static propTypes = propTypesExact({
        animatedPosition: PropTypes.instanceOf(Animated.ValueXY).isRequired,
        animatedWidth: PropTypes.instanceOf(Animated.Value).isRequired,
        animatedZIndex: PropTypes.instanceOf(Animated.Value).isRequired,
        column: PropTypes.object.isRequired,
        columnIndex: PropTypes.number.isRequired,
        even: PropTypes.bool.isRequired,
        events: PropTypes.instanceOf(EventEmitter).isRequired,
        model: PropTypes.object.isRequired,
        table: PropTypes.object.isRequired,
        tableSettingColumn: PropTypes.object.isRequired
    });
    render() {
        const { l, t } = useI18n({ namespace: "js.api_maker.table.model_column" });
        const { mdUp } = useBreakpoint();
        const { animatedWidth, animatedZIndex, column, columnIndex, even, model, table } = this.props;
        const columnProps = table.columnProps(column);
        const { style, ...restColumnProps } = columnProps;
        const actualStyle = useMemo(() => Object.assign(table.styleForColumn({
            column,
            columnIndex,
            even,
            style: {
                zIndex: animatedZIndex,
                transform: this.p.animatedPosition.getTranslateTransform(),
                width: mdUp ? animatedWidth : "100%"
            }
        }), style), [column, columnIndex, even, animatedZIndex, mdUp, animatedWidth, style]);
        const className = classNames(this.columnClassNamesForColumn(column));
        const identifier = columnIdentifier(column);
        const dataSet = useMemo(() => ({ class: className, identifier }), [className]);
        return (_jsxs(Column, { dataSet: dataSet, style: actualStyle, ...restColumnProps, children: [!mdUp &&
                    _jsx(View, { dataSet: this.cache("columnLabelDataSet", { class: "table--column-label" }), children: _jsx(Text, { style: this.cache("columnLabelTextStyle", { fontWeight: "bold" }), children: table.headerLabelForColumn(column) }) }), _jsx(View, { dataSet: this.cache("columnValueDataSet", { class: "table--column-value" }), children: new ColumnContent({ column, l, model, t, table }).content() })] }));
    }
    columnClassNamesForColumn(column) {
        const classNames = ["table--column"];
        if (column.commonProps && column.commonProps.className)
            classNames.push(column.commonProps.className);
        if (column.columnProps && column.columnProps.className)
            classNames.push(column.columnProps.className);
        return classNames;
    }
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kZWwtY29sdW1uLmpzIiwic291cmNlUm9vdCI6Ii9zcmMvIiwic291cmNlcyI6WyJ0YWJsZS9tb2RlbC1jb2x1bW4uanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUMsUUFBUSxFQUFFLElBQUksRUFBQyxNQUFNLGNBQWMsQ0FBQTtBQUMzQyxPQUFPLEtBQUssRUFBRSxFQUFDLE9BQU8sRUFBQyxNQUFNLE9BQU8sQ0FBQTtBQUNwQyxPQUFPLGFBQWEsTUFBTSxtQkFBbUIsQ0FBQTtBQUM3QyxPQUFPLFVBQVUsTUFBTSxZQUFZLENBQUE7QUFDbkMsT0FBTyxNQUFNLE1BQU0scUJBQXFCLENBQUE7QUFDeEMsT0FBTyxhQUFhLE1BQU0sa0JBQWtCLENBQUE7QUFDNUMsT0FBTyxnQkFBZ0IsTUFBTSx3QkFBd0IsQ0FBQTtBQUNyRCxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0sZUFBZSxDQUFBO0FBQzFDLE9BQU8sU0FBUyxNQUFNLFlBQVksQ0FBQTtBQUNsQyxPQUFPLGNBQWMsTUFBTSxrQkFBa0IsQ0FBQTtBQUM3QyxPQUFPLElBQUksTUFBTSxpQ0FBaUMsQ0FBQTtBQUNsRCxPQUFPLEVBQUMsY0FBYyxFQUFDLE1BQU0sNENBQTRDLENBQUE7QUFDekUsT0FBTyxJQUFJLE1BQU0sZUFBZSxDQUFBO0FBQ2hDLE9BQU8sYUFBYSxNQUFNLHNCQUFzQixDQUFBO0FBQ2hELE9BQU8sT0FBTyxNQUFNLG1DQUFtQyxDQUFBO0FBRXZELGVBQWUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLHdCQUF5QixTQUFRLGFBQWE7SUFDckYsTUFBTSxDQUFDLFNBQVMsR0FBRyxjQUFjLENBQUM7UUFDaEMsZ0JBQWdCLEVBQUUsU0FBUyxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsVUFBVTtRQUNuRSxhQUFhLEVBQUUsU0FBUyxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsVUFBVTtRQUM5RCxjQUFjLEVBQUUsU0FBUyxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsVUFBVTtRQUMvRCxNQUFNLEVBQUUsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVO1FBQ25DLFdBQVcsRUFBRSxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVU7UUFDeEMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVTtRQUMvQixNQUFNLEVBQUUsU0FBUyxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsQ0FBQyxVQUFVO1FBQ3JELEtBQUssRUFBRSxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVU7UUFDbEMsS0FBSyxFQUFFLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBVTtRQUNsQyxrQkFBa0IsRUFBRSxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVU7S0FDaEQsQ0FBQyxDQUFBO0lBRUYsTUFBTTtRQUNKLE1BQU0sRUFBQyxDQUFDLEVBQUUsQ0FBQyxFQUFDLEdBQUcsT0FBTyxDQUFDLEVBQUMsU0FBUyxFQUFFLGlDQUFpQyxFQUFDLENBQUMsQ0FBQTtRQUN0RSxNQUFNLEVBQUMsSUFBSSxFQUFDLEdBQUcsYUFBYSxFQUFFLENBQUE7UUFDOUIsTUFBTSxFQUFDLGFBQWEsRUFBRSxjQUFjLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUE7UUFDM0YsTUFBTSxXQUFXLEdBQUcsS0FBSyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUM3QyxNQUFNLEVBQUMsS0FBSyxFQUFFLEdBQUcsZUFBZSxFQUFDLEdBQUcsV0FBVyxDQUFBO1FBQy9DLE1BQU0sV0FBVyxHQUFHLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FDL0IsTUFBTSxDQUFDLE1BQU0sQ0FDWCxLQUFLLENBQUMsY0FBYyxDQUFDO1lBQ25CLE1BQU07WUFDTixXQUFXO1lBQ1gsSUFBSTtZQUNKLEtBQUssRUFBRTtnQkFDTCxNQUFNLEVBQUUsY0FBYztnQkFDdEIsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsZ0JBQWdCLENBQUMscUJBQXFCLEVBQUU7Z0JBQzFELEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsTUFBTTthQUNyQztTQUNGLENBQUMsRUFDRixLQUFLLENBQ04sRUFDRCxDQUFDLE1BQU0sRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFLGNBQWMsRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFLEtBQUssQ0FBQyxDQUN4RSxDQUFBO1FBRUQsTUFBTSxTQUFTLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFBO1FBQ3BFLE1BQU0sVUFBVSxHQUFHLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFBO1FBQzNDLE1BQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUMsS0FBSyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQTtRQUU1RSxPQUFPLENBQ0wsTUFBQyxNQUFNLElBQ0wsT0FBTyxFQUFFLE9BQU8sRUFDaEIsS0FBSyxFQUFFLFdBQVcsS0FDZCxlQUFlLGFBRWxCLENBQUMsSUFBSTtvQkFDSixLQUFDLElBQUksSUFBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxvQkFBb0IsRUFBRSxFQUFDLEtBQUssRUFBRSxxQkFBcUIsRUFBQyxDQUFDLFlBQzdFLEtBQUMsSUFBSSxJQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLHNCQUFzQixFQUFFLEVBQUMsVUFBVSxFQUFFLE1BQU0sRUFBQyxDQUFDLFlBQ2xFLEtBQUssQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsR0FDOUIsR0FDRixFQUVULEtBQUMsSUFBSSxJQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLG9CQUFvQixFQUFFLEVBQUMsS0FBSyxFQUFFLHFCQUFxQixFQUFDLENBQUMsWUFDNUUsSUFBSSxhQUFhLENBQUMsRUFBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsR0FDckQsSUFDQSxDQUNWLENBQUE7SUFDSCxDQUFDO0lBRUQseUJBQXlCLENBQUMsTUFBTTtRQUM5QixNQUFNLFVBQVUsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFBO1FBRXBDLElBQUksTUFBTSxDQUFDLFdBQVcsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLFNBQVM7WUFBRSxVQUFVLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUE7UUFDckcsSUFBSSxNQUFNLENBQUMsV0FBVyxJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsU0FBUztZQUFFLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUVyRyxPQUFPLFVBQVUsQ0FBQTtJQUNuQixDQUFDO0NBQ0YsQ0FBQyxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0FuaW1hdGVkLCBWaWV3fSBmcm9tIFwicmVhY3QtbmF0aXZlXCJcbmltcG9ydCBSZWFjdCwge3VzZU1lbW99IGZyb20gXCJyZWFjdFwiXG5pbXBvcnQgQmFzZUNvbXBvbmVudCBmcm9tIFwiLi4vYmFzZS1jb21wb25lbnRcIlxuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIlxuaW1wb3J0IENvbHVtbiBmcm9tIFwiLi9jb21wb25lbnRzL2NvbHVtblwiXG5pbXBvcnQgQ29sdW1uQ29udGVudCBmcm9tIFwiLi9jb2x1bW4tY29udGVudFwiXG5pbXBvcnQgY29sdW1uSWRlbnRpZmllciBmcm9tIFwiLi9jb2x1bW4taWRlbnRpZmllci5qc1wiXG5pbXBvcnQge0V2ZW50RW1pdHRlcn0gZnJvbSBcImV2ZW50ZW1pdHRlcjNcIlxuaW1wb3J0IFByb3BUeXBlcyBmcm9tIFwicHJvcC10eXBlc1wiXG5pbXBvcnQgcHJvcFR5cGVzRXhhY3QgZnJvbSBcInByb3AtdHlwZXMtZXhhY3RcIlxuaW1wb3J0IG1lbW8gZnJvbSBcInNldC1zdGF0ZS1jb21wYXJlL2J1aWxkL21lbW8uanNcIlxuaW1wb3J0IHtzaGFwZUNvbXBvbmVudH0gZnJvbSBcInNldC1zdGF0ZS1jb21wYXJlL2J1aWxkL3NoYXBlLWNvbXBvbmVudC5qc1wiXG5pbXBvcnQgVGV4dCBmcm9tIFwiLi4vdXRpbHMvdGV4dFwiXG5pbXBvcnQgdXNlQnJlYWtwb2ludCBmcm9tIFwiLi4vdXNlLWJyZWFrcG9pbnQuanNcIlxuaW1wb3J0IHVzZUkxOG4gZnJvbSBcImkxOG4tb24tc3Rlcm9pZHMvc3JjL3VzZS1pMThuLm1qc1wiXG5cbmV4cG9ydCBkZWZhdWx0IG1lbW8oc2hhcGVDb21wb25lbnQoY2xhc3MgQXBpTWFrZXJUYWJsZU1vZGVsQ29sdW1uIGV4dGVuZHMgQmFzZUNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSBwcm9wVHlwZXNFeGFjdCh7XG4gICAgYW5pbWF0ZWRQb3NpdGlvbjogUHJvcFR5cGVzLmluc3RhbmNlT2YoQW5pbWF0ZWQuVmFsdWVYWSkuaXNSZXF1aXJlZCxcbiAgICBhbmltYXRlZFdpZHRoOiBQcm9wVHlwZXMuaW5zdGFuY2VPZihBbmltYXRlZC5WYWx1ZSkuaXNSZXF1aXJlZCxcbiAgICBhbmltYXRlZFpJbmRleDogUHJvcFR5cGVzLmluc3RhbmNlT2YoQW5pbWF0ZWQuVmFsdWUpLmlzUmVxdWlyZWQsXG4gICAgY29sdW1uOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgY29sdW1uSW5kZXg6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgICBldmVuOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICAgIGV2ZW50czogUHJvcFR5cGVzLmluc3RhbmNlT2YoRXZlbnRFbWl0dGVyKS5pc1JlcXVpcmVkLFxuICAgIG1vZGVsOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgdGFibGU6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICB0YWJsZVNldHRpbmdDb2x1bW46IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZFxuICB9KVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7bCwgdH0gPSB1c2VJMThuKHtuYW1lc3BhY2U6IFwianMuYXBpX21ha2VyLnRhYmxlLm1vZGVsX2NvbHVtblwifSlcbiAgICBjb25zdCB7bWRVcH0gPSB1c2VCcmVha3BvaW50KClcbiAgICBjb25zdCB7YW5pbWF0ZWRXaWR0aCwgYW5pbWF0ZWRaSW5kZXgsIGNvbHVtbiwgY29sdW1uSW5kZXgsIGV2ZW4sIG1vZGVsLCB0YWJsZX0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgY29sdW1uUHJvcHMgPSB0YWJsZS5jb2x1bW5Qcm9wcyhjb2x1bW4pXG4gICAgY29uc3Qge3N0eWxlLCAuLi5yZXN0Q29sdW1uUHJvcHN9ID0gY29sdW1uUHJvcHNcbiAgICBjb25zdCBhY3R1YWxTdHlsZSA9IHVzZU1lbW8oKCkgPT5cbiAgICAgIE9iamVjdC5hc3NpZ24oXG4gICAgICAgIHRhYmxlLnN0eWxlRm9yQ29sdW1uKHtcbiAgICAgICAgICBjb2x1bW4sXG4gICAgICAgICAgY29sdW1uSW5kZXgsXG4gICAgICAgICAgZXZlbixcbiAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgekluZGV4OiBhbmltYXRlZFpJbmRleCxcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdGhpcy5wLmFuaW1hdGVkUG9zaXRpb24uZ2V0VHJhbnNsYXRlVHJhbnNmb3JtKCksXG4gICAgICAgICAgICB3aWR0aDogbWRVcCA/IGFuaW1hdGVkV2lkdGggOiBcIjEwMCVcIlxuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIHN0eWxlXG4gICAgICApLFxuICAgICAgW2NvbHVtbiwgY29sdW1uSW5kZXgsIGV2ZW4sIGFuaW1hdGVkWkluZGV4LCBtZFVwLCBhbmltYXRlZFdpZHRoLCBzdHlsZV1cbiAgICApXG5cbiAgICBjb25zdCBjbGFzc05hbWUgPSBjbGFzc05hbWVzKHRoaXMuY29sdW1uQ2xhc3NOYW1lc0ZvckNvbHVtbihjb2x1bW4pKVxuICAgIGNvbnN0IGlkZW50aWZpZXIgPSBjb2x1bW5JZGVudGlmaWVyKGNvbHVtbilcbiAgICBjb25zdCBkYXRhU2V0ID0gdXNlTWVtbygoKSA9PiAoe2NsYXNzOiBjbGFzc05hbWUsIGlkZW50aWZpZXJ9KSwgW2NsYXNzTmFtZV0pXG5cbiAgICByZXR1cm4gKFxuICAgICAgPENvbHVtblxuICAgICAgICBkYXRhU2V0PXtkYXRhU2V0fVxuICAgICAgICBzdHlsZT17YWN0dWFsU3R5bGV9XG4gICAgICAgIHsuLi5yZXN0Q29sdW1uUHJvcHN9XG4gICAgICA+XG4gICAgICAgIHshbWRVcCAmJlxuICAgICAgICAgIDxWaWV3IGRhdGFTZXQ9e3RoaXMuY2FjaGUoXCJjb2x1bW5MYWJlbERhdGFTZXRcIiwge2NsYXNzOiBcInRhYmxlLS1jb2x1bW4tbGFiZWxcIn0pfT5cbiAgICAgICAgICAgIDxUZXh0IHN0eWxlPXt0aGlzLmNhY2hlKFwiY29sdW1uTGFiZWxUZXh0U3R5bGVcIiwge2ZvbnRXZWlnaHQ6IFwiYm9sZFwifSl9PlxuICAgICAgICAgICAgICB7dGFibGUuaGVhZGVyTGFiZWxGb3JDb2x1bW4oY29sdW1uKX1cbiAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgIH1cbiAgICAgICAgPFZpZXcgZGF0YVNldD17dGhpcy5jYWNoZShcImNvbHVtblZhbHVlRGF0YVNldFwiLCB7Y2xhc3M6IFwidGFibGUtLWNvbHVtbi12YWx1ZVwifSl9PlxuICAgICAgICAgIHtuZXcgQ29sdW1uQ29udGVudCh7Y29sdW1uLCBsLCBtb2RlbCwgdCwgdGFibGV9KS5jb250ZW50KCl9XG4gICAgICAgIDwvVmlldz5cbiAgICAgIDwvQ29sdW1uPlxuICAgIClcbiAgfVxuXG4gIGNvbHVtbkNsYXNzTmFtZXNGb3JDb2x1bW4oY29sdW1uKSB7XG4gICAgY29uc3QgY2xhc3NOYW1lcyA9IFtcInRhYmxlLS1jb2x1bW5cIl1cblxuICAgIGlmIChjb2x1bW4uY29tbW9uUHJvcHMgJiYgY29sdW1uLmNvbW1vblByb3BzLmNsYXNzTmFtZSkgY2xhc3NOYW1lcy5wdXNoKGNvbHVtbi5jb21tb25Qcm9wcy5jbGFzc05hbWUpXG4gICAgaWYgKGNvbHVtbi5jb2x1bW5Qcm9wcyAmJiBjb2x1bW4uY29sdW1uUHJvcHMuY2xhc3NOYW1lKSBjbGFzc05hbWVzLnB1c2goY29sdW1uLmNvbHVtblByb3BzLmNsYXNzTmFtZSlcblxuICAgIHJldHVybiBjbGFzc05hbWVzXG4gIH1cbn0pKVxuIl19