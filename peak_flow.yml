before_install:
  - gem install bundler -v 2.0.2
  - sudo apt-get update && sudo apt-get install -y firefox google-chrome-stable
before_script:
  - bundle exec appraisal install
  - cd spec/dummy && yarn
  - cd spec/dummy && bundle exec rails db:environment:set RAILS_ENV=test
  - cd spec/dummy && bundle exec rails db:schema:load
  - cd spec/dummy && rake api_maker:generate_models
builds:
  build_1:
    name: RSpec Kaminari
    script:
      - bundle exec appraisal kaminari rspec spec/api_maker spec/services
  build_2:
    name: RSpec WillPaginate
    script:
      - bundle exec appraisal will_paginate rspec spec/api_maker spec/services
  build_3:
    name: Chrome Kaminari
    script:
      - xvfb-run bundle exec appraisal kaminari will_paginate rspec spec/system
  build_4:
    name: Chrome WillPaginate
    script:
      - xvfb-run bundle exec appraisal will_paginate will_paginate rspec spec/system
  build_5:
    name: Firefox Kaminari
    environment:
      SELENIUM_DRIVER: firefox
    script:
      - xvfb-run bundle exec appraisal kaminari will_paginate rspec spec/system
  build_6:
    name: Firefox WillPaginate
    environment:
      SELENIUM_DRIVER: firefox
    script:
      - xvfb-run bundle exec appraisal will_paginate rspec spec/system
  build_7:
    name: Linters
    script:
      - bundle exec rubocop
      - bundle exec rails_best_practices
rvm: true
