{
  "manifest": {
    "name": "@parcel/watcher",
    "version": "2.4.1",
    "main": "index.js",
    "types": "index.d.ts",
    "repository": {
      "type": "git",
      "url": "https://github.com/parcel-bundler/watcher.git"
    },
    "description": "A native C++ Node module for querying and subscribing to filesystem events. Used by Parcel 2.",
    "license": "MIT",
    "publishConfig": {
      "access": "public"
    },
    "funding": {
      "type": "opencollective",
      "url": "https://opencollective.com/parcel"
    },
    "files": [
      "index.js",
      "index.js.flow",
      "index.d.ts",
      "wrapper.js",
      "package.json",
      "README.md",
      "LICENSE"
    ],
    "scripts": {
      "prebuild": "prebuildify --napi --strip --tag-libc",
      "format": "prettier --write \"./**/*.{js,json,md}\"",
      "build": "node-gyp rebuild -j 8 --debug --verbose",
      "test": "mocha"
    },
    "engines": {
      "node": ">= 10.0.0"
    },
    "husky": {
      "hooks": {
        "pre-commit": "lint-staged"
      }
    },
    "lint-staged": {
      "*.{js,json,md}": [
        "prettier --write",
        "git add"
      ]
    },
    "dependencies": {
      "detect-libc": "^1.0.3",
      "is-glob": "^4.0.3",
      "micromatch": "^4.0.5",
      "node-addon-api": "^7.0.0"
    },
    "devDependencies": {
      "esbuild": "^0.19.8",
      "fs-extra": "^10.0.0",
      "husky": "^7.0.2",
      "lint-staged": "^11.1.2",
      "mocha": "^9.1.1",
      "napi-wasm": "^1.1.0",
      "prebuildify": "^5.0.1",
      "prettier": "^2.3.2"
    },
    "binary": {
      "napi_versions": [
        3
      ]
    },
    "optionalDependencies": {
      "@parcel/watcher-darwin-x64": "2.4.1",
      "@parcel/watcher-darwin-arm64": "2.4.1",
      "@parcel/watcher-win32-x64": "2.4.1",
      "@parcel/watcher-win32-arm64": "2.4.1",
      "@parcel/watcher-win32-ia32": "2.4.1",
      "@parcel/watcher-linux-x64-glibc": "2.4.1",
      "@parcel/watcher-linux-x64-musl": "2.4.1",
      "@parcel/watcher-linux-arm64-glibc": "2.4.1",
      "@parcel/watcher-linux-arm64-musl": "2.4.1",
      "@parcel/watcher-linux-arm-glibc": "2.4.1",
      "@parcel/watcher-android-arm64": "2.4.1",
      "@parcel/watcher-freebsd-x64": "2.4.1"
    },
    "_registry": "npm",
    "_loc": "/home/dev/api_maker/.yarn-cache/v6/npm-@parcel-watcher-2.4.1-a50275151a1bb110879c6123589dba90c19f1bf8-integrity/node_modules/@parcel/watcher/package.json",
    "readmeFilename": "README.md",
    "readme": "# @parcel/watcher\n\nA native C++ Node module for querying and subscribing to filesystem events. Used by [Parcel 2](https://github.com/parcel-bundler/parcel).\n\n## Features\n\n- **Watch** - subscribe to realtime recursive directory change notifications when files or directories are created, updated, or deleted.\n- **Query** - performantly query for historical change events in a directory, even when your program is not running.\n- **Native** - implemented in C++ for performance and low-level integration with the operating system.\n- **Cross platform** - includes backends for macOS, Linux, Windows, FreeBSD, and Watchman.\n- **Performant** - events are throttled in C++ so the JavaScript thread is not overwhelmed during large filesystem changes (e.g. `git checkout` or `npm install`).\n- **Scalable** - tens of thousands of files can be watched or queried at once with good performance.\n\n## Example\n\n```javascript\nconst watcher = require('@parcel/watcher');\nconst path = require('path');\n\n// Subscribe to events\nlet subscription = await watcher.subscribe(process.cwd(), (err, events) => {\n  console.log(events);\n});\n\n// later on...\nawait subscription.unsubscribe();\n\n// Get events since some saved snapshot in the past\nlet snapshotPath = path.join(process.cwd(), 'snapshot.txt');\nlet events = await watcher.getEventsSince(process.cwd(), snapshotPath);\n\n// Save a snapshot for later\nawait watcher.writeSnapshot(process.cwd(), snapshotPath);\n```\n\n## Watching\n\n`@parcel/watcher` supports subscribing to realtime notifications of changes in a directory. It works recursively, so changes in sub-directories will also be emitted.\n\nEvents are throttled and coalesced for performance during large changes like `git checkout` or `npm install`, and a single notification will be emitted with all of the events at the end.\n\nOnly one notification will be emitted per file. For example, if a file was both created and updated since the last event, you'll get only a `create` event. If a file is both created and deleted, you will not be notifed of that file. Renames cause two events: a `delete` for the old name, and a `create` for the new name.\n\n```javascript\nlet subscription = await watcher.subscribe(process.cwd(), (err, events) => {\n  console.log(events);\n});\n```\n\nEvents have two properties:\n\n- `type` - the event type: `create`, `update`, or `delete`.\n- `path` - the absolute path to the file or directory.\n\nTo unsubscribe from change notifications, call the `unsubscribe` method on the returned subscription object.\n\n```javascript\nawait subscription.unsubscribe();\n```\n\n`@parcel/watcher` has the following watcher backends, listed in priority order:\n\n- [FSEvents](https://developer.apple.com/documentation/coreservices/file_system_events) on macOS\n- [Watchman](https://facebook.github.io/watchman/) if installed\n- [inotify](http://man7.org/linux/man-pages/man7/inotify.7.html) on Linux\n- [ReadDirectoryChangesW](https://msdn.microsoft.com/en-us/library/windows/desktop/aa365465%28v%3Dvs.85%29.aspx) on Windows\n- [kqueue](https://man.freebsd.org/cgi/man.cgi?kqueue) on FreeBSD, or as an alternative to FSEvents on macOS\n\nYou can specify the exact backend you wish to use by passing the `backend` option. If that backend is not available on the current platform, the default backend will be used instead. See below for the list of backend names that can be passed to the options.\n\n## Querying\n\n`@parcel/watcher` also supports querying for historical changes made in a directory, even when your program is not running. This makes it easy to invalidate a cache and re-build only the files that have changed, for example. It can be **significantly** faster than traversing the entire filesystem to determine what files changed, depending on the platform.\n\nIn order to query for historical changes, you first need a previous snapshot to compare to. This can be saved to a file with the `writeSnapshot` function, e.g. just before your program exits.\n\n```javascript\nawait watcher.writeSnapshot(dirPath, snapshotPath);\n```\n\nWhen your program starts up, you can query for changes that have occurred since that snapshot using the `getEventsSince` function.\n\n```javascript\nlet events = await watcher.getEventsSince(dirPath, snapshotPath);\n```\n\nThe events returned are exactly the same as the events that would be passed to the `subscribe` callback (see above).\n\n`@parcel/watcher` has the following watcher backends, listed in priority order:\n\n- [FSEvents](https://developer.apple.com/documentation/coreservices/file_system_events) on macOS\n- [Watchman](https://facebook.github.io/watchman/) if installed\n- [fts](http://man7.org/linux/man-pages/man3/fts.3.html) (brute force) on Linux and FreeBSD\n- [FindFirstFile](https://docs.microsoft.com/en-us/windows/desktop/api/fileapi/nf-fileapi-findfirstfilea) (brute force) on Windows\n\nThe FSEvents (macOS) and Watchman backends are significantly more performant than the brute force backends used by default on Linux and Windows, for example returning results in miliseconds instead of seconds for large directory trees. This is because a background daemon monitoring filesystem changes on those platforms allows us to query cached data rather than traversing the filesystem manually (brute force).\n\nmacOS has good performance with FSEvents by default. For the best performance on other platforms, install [Watchman](https://facebook.github.io/watchman/) and it will be used by `@parcel/watcher` automatically.\n\nYou can specify the exact backend you wish to use by passing the `backend` option. If that backend is not available on the current platform, the default backend will be used instead. See below for the list of backend names that can be passed to the options.\n\n## Options\n\nAll of the APIs in `@parcel/watcher` support the following options, which are passed as an object as the last function argument.\n\n- `ignore` - an array of paths or glob patterns to ignore. uses [`is-glob`](https://github.com/micromatch/is-glob) to distinguish paths from globs. glob patterns are parsed with [`micromatch`](https://github.com/micromatch/micromatch) (see [features](https://github.com/micromatch/micromatch#matching-features)).\n  - paths can be relative or absolute and can either be files or directories. No events will be emitted about these files or directories or their children.\n  - glob patterns match on relative paths from the root that is watched. No events will be emitted for matching paths.\n- `backend` - the name of an explicitly chosen backend to use. Allowed options are `\"fs-events\"`, `\"watchman\"`, `\"inotify\"`, `\"kqueue\"`, `\"windows\"`, or `\"brute-force\"` (only for querying). If the specified backend is not available on the current platform, the default backend will be used instead.\n\n## WASM\n\nThe `@parcel/watcher-wasm` package can be used in place of `@parcel/watcher` on unsupported platforms. It relies on the Node `fs` module, so in non-Node environments such as browsers, an `fs` polyfill will be needed.\n\n**Note**: the WASM implementation is significantly less efficient than the native implementations because it must crawl the file system to watch each directory individually. Use the native `@parcel/watcher` package wherever possible.\n\n```js\nimport {subscribe} from '@parcel/watcher-wasm';\n\n// Use the module as documented above.\nsubscribe(/* ... */);\n```\n\n## Who is using this?\n\n- [Parcel 2](https://parceljs.org/)\n- [VSCode](https://code.visualstudio.com/updates/v1_62#_file-watching-changes)\n- [Tailwind CSS Intellisense](https://github.com/tailwindlabs/tailwindcss-intellisense)\n- [Gatsby Cloud](https://twitter.com/chatsidhartha/status/1435647412828196867)\n- [Nx](https://nx.dev)\n- [Nuxt](https://nuxt.com)\n\n## License\n\nMIT\n",
    "licenseText": "MIT License\n\nCopyright (c) 2017-present Devon Govett\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
  },
  "artifacts": [],
  "remote": {
    "resolved": "https://registry.yarnpkg.com/@parcel/watcher/-/watcher-2.4.1.tgz#a50275151a1bb110879c6123589dba90c19f1bf8",
    "type": "tarball",
    "reference": "https://registry.yarnpkg.com/@parcel/watcher/-/watcher-2.4.1.tgz",
    "hash": "a50275151a1bb110879c6123589dba90c19f1bf8",
    "integrity": "sha512-HNjmfLQEVRZmHRET336f20H/8kOozUGwk7yajvsonjNxbj2wBTK1WsQuHkD5yYh9RxFGL2EyDHryOihOwUoKDA==",
    "registry": "npm",
    "packageName": "@parcel/watcher",
    "cacheIntegrity": "sha512-HNjmfLQEVRZmHRET336f20H/8kOozUGwk7yajvsonjNxbj2wBTK1WsQuHkD5yYh9RxFGL2EyDHryOihOwUoKDA== sha1-pQJ1FRobsRCHnGEjWJ26kMGfG/g="
  },
  "registry": "npm",
  "hash": "a50275151a1bb110879c6123589dba90c19f1bf8"
}