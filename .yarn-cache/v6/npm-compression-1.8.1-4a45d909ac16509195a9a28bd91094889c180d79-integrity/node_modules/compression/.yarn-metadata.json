{
  "manifest": {
    "name": "compression",
    "description": "Node.js compression middleware",
    "version": "1.8.1",
    "contributors": [
      {
        "name": "Douglas Christopher Wilson",
        "email": "doug@somethingdoug.com"
      },
      {
        "name": "Jonathan Ong",
        "email": "me@jongleberry.com",
        "url": "http://jongleberry.com"
      }
    ],
    "license": "MIT",
    "repository": {
      "type": "git",
      "url": "https://github.com/expressjs/compression.git"
    },
    "keywords": [
      "compression",
      "gzip",
      "deflate",
      "middleware",
      "express",
      "brotli",
      "http",
      "stream"
    ],
    "dependencies": {
      "bytes": "3.1.2",
      "compressible": "~2.0.18",
      "debug": "2.6.9",
      "negotiator": "~0.6.4",
      "on-headers": "~1.1.0",
      "safe-buffer": "5.2.1",
      "vary": "~1.1.2"
    },
    "devDependencies": {
      "after": "0.8.2",
      "eslint": "7.32.0",
      "eslint-config-standard": "14.1.1",
      "eslint-plugin-import": "2.32.0",
      "eslint-plugin-markdown": "2.2.1",
      "eslint-plugin-node": "11.1.0",
      "eslint-plugin-promise": "5.2.0",
      "eslint-plugin-standard": "4.1.0",
      "mocha": "9.2.2",
      "nyc": "15.1.0",
      "supertest": "6.3.4"
    },
    "files": [
      "LICENSE",
      "HISTORY.md",
      "index.js"
    ],
    "engines": {
      "node": ">= 0.8.0"
    },
    "scripts": {
      "lint": "eslint .",
      "test": "mocha --check-leaks --reporter spec",
      "test-ci": "nyc --reporter=lcov --reporter=text npm test",
      "test-cov": "nyc --reporter=html --reporter=text npm test"
    },
    "_registry": "npm",
    "_loc": "/home/dev/api_maker/.yarn-cache/v6/npm-compression-1.8.1-4a45d909ac16509195a9a28bd91094889c180d79-integrity/node_modules/compression/package.json",
    "readmeFilename": "README.md",
    "readme": "# compression\n\n[![NPM Version][npm-image]][npm-url]\n[![NPM Downloads][downloads-image]][downloads-url]\n[![Build Status][github-actions-ci-image]][github-actions-ci-url]\n[![OpenSSF Scorecard Badge][ossf-scorecard-badge]][ossf-scorecard-visualizer]\n[![Funding][funding-image]][funding-url]\n\n\nNode.js compression middleware.\n\nThe following compression codings are supported:\n\n  - deflate\n  - gzip\n  - br (brotli)\n\n**Note** Brotli is supported only since Node.js versions v11.7.0 and v10.16.0.\n\n## Install\n\nThis is a [Node.js](https://nodejs.org/en/) module available through the\n[npm registry](https://www.npmjs.com/). Installation is done using the\n[`npm install` command](https://docs.npmjs.com/getting-started/installing-npm-packages-locally):\n\n```bash\n$ npm install compression\n```\n\n## API\n\n```js\nvar compression = require('compression')\n```\n\n### compression([options])\n\nReturns the compression middleware using the given `options`. The middleware\nwill attempt to compress response bodies for all requests that traverse through\nthe middleware, based on the given `options`.\n\nThis middleware will never compress responses that include a `Cache-Control`\nheader with the [`no-transform` directive](https://tools.ietf.org/html/rfc7234#section-5.2.2.4),\nas compressing will transform the body.\n\n#### Options\n\n`compression()` accepts these properties in the options object. In addition to\nthose listed below, [zlib](https://nodejs.org/api/zlib.html) options may be\npassed in to the options object or\n[brotli](https://nodejs.org/api/zlib.html#zlib_class_brotlioptions) options.\n\n##### chunkSize\n\nType: `Number`<br>\nDefault: `zlib.constants.Z_DEFAULT_CHUNK`, or `16384`.\n\nSee [Node.js documentation](https://nodejs.org/api/zlib.html#zlib_memory_usage_tuning)\nregarding the usage.\n\n##### filter\n\nType: `Function`\n\nA function to decide if the response should be considered for compression.\nThis function is called as `filter(req, res)` and is expected to return\n`true` to consider the response for compression, or `false` to not compress\nthe response.\n\nThe default filter function uses the [compressible](https://www.npmjs.com/package/compressible)\nmodule to determine if `res.getHeader('Content-Type')` is compressible.\n\n##### level\n\nType: `Number`<br>\nDefault: `zlib.constants.Z_DEFAULT_COMPRESSION`, or `-1`\n\nThe level of zlib compression to apply to responses. A higher level will result\nin better compression, but will take longer to complete. A lower level will\nresult in less compression, but will be much faster.\n\nThis is an integer in the range of `0` (no compression) to `9` (maximum\ncompression). The special value `-1` can be used to mean the \"default\ncompression level\", which is a default compromise between speed and\ncompression (currently equivalent to level 6).\n\n  - `-1` Default compression level (also `zlib.constants.Z_DEFAULT_COMPRESSION`).\n  - `0` No compression (also `zlib.constants.Z_NO_COMPRESSION`).\n  - `1` Fastest compression (also `zlib.constants.Z_BEST_SPEED`).\n  - `2`\n  - `3`\n  - `4`\n  - `5`\n  - `6` (currently what `zlib.constants.Z_DEFAULT_COMPRESSION` points to).\n  - `7`\n  - `8`\n  - `9` Best compression (also `zlib.constants.Z_BEST_COMPRESSION`).\n\n**Note** in the list above, `zlib` is from `zlib = require('zlib')`.\n\n##### memLevel\n\nType: `Number`<br>\nDefault: `zlib.constants.Z_DEFAULT_MEMLEVEL`, or `8`\n\nThis specifies how much memory should be allocated for the internal compression\nstate and is an integer in the range of `1` (minimum level) and `9` (maximum\nlevel).\n\nSee [Node.js documentation](https://nodejs.org/api/zlib.html#zlib_memory_usage_tuning)\nregarding the usage.\n\n##### brotli\n\nType: `Object`\n\nThis specifies the options for configuring Brotli. See [Node.js documentation](https://nodejs.org/api/zlib.html#class-brotlioptions) for a complete list of available options.\n\n\n##### strategy\n\nType: `Number`<br>\nDefault: `zlib.constants.Z_DEFAULT_STRATEGY`\n\nThis is used to tune the compression algorithm. This value only affects the\ncompression ratio, not the correctness of the compressed output, even if it\nis not set appropriately.\n\n  - `zlib.constants.Z_DEFAULT_STRATEGY` Use for normal data.\n  - `zlib.constants.Z_FILTERED` Use for data produced by a filter (or predictor).\n    Filtered data consists mostly of small values with a somewhat random\n    distribution. In this case, the compression algorithm is tuned to\n    compress them better. The effect is to force more Huffman coding and less\n    string matching; it is somewhat intermediate between `zlib.constants.Z_DEFAULT_STRATEGY`\n    and `zlib.constants.Z_HUFFMAN_ONLY`.\n  - `zlib.constants.Z_FIXED` Use to prevent the use of dynamic Huffman codes, allowing\n    for a simpler decoder for special applications.\n  - `zlib.constants.Z_HUFFMAN_ONLY` Use to force Huffman encoding only (no string match).\n  - `zlib.constants.Z_RLE` Use to limit match distances to one (run-length encoding).\n    This is designed to be almost as fast as `zlib.constants.Z_HUFFMAN_ONLY`, but give\n    better compression for PNG image data.\n\n**Note** in the list above, `zlib` is from `zlib = require('zlib')`.\n\n##### threshold\n\nType: `Number` or `String`<br>\nDefault: `1kb`\n\nThe byte threshold for the response body size before compression is considered\nfor the response. This is a number of bytes or any string\naccepted by the [bytes](https://www.npmjs.com/package/bytes) module.\n\n**Note** this is only an advisory setting; if the response size cannot be determined\nat the time the response headers are written, then it is assumed the response is\n_over_ the threshold. To guarantee the response size can be determined, be sure\nset a `Content-Length` response header.\n\n##### windowBits\n\nType: `Number`<br>\nDefault: `zlib.constants.Z_DEFAULT_WINDOWBITS`, or `15`\n\nSee [Node.js documentation](https://nodejs.org/api/zlib.html#zlib_memory_usage_tuning)\nregarding the usage.\n\n##### enforceEncoding\n\nType: `String`<br>\nDefault: `identity`\n\nThis is the default encoding to use when the client does not specify an encoding in the request's [Accept-Encoding](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Encoding) header.\n\n#### .filter\n\nThe default `filter` function. This is used to construct a custom filter\nfunction that is an extension of the default function.\n\n```js\nvar compression = require('compression')\nvar express = require('express')\n\nvar app = express()\n\napp.use(compression({ filter: shouldCompress }))\n\nfunction shouldCompress (req, res) {\n  if (req.headers['x-no-compression']) {\n    // don't compress responses with this request header\n    return false\n  }\n\n  // fallback to standard filter function\n  return compression.filter(req, res)\n}\n```\n\n### res.flush\n\nThis module adds a `res.flush()` method to force the partially-compressed\nresponse to be flushed to the client.\n\n## Examples\n\n### express\n\nWhen using this module with express, simply `app.use` the module as\nhigh as you like. Requests that pass through the middleware will be compressed.\n\n```js\nvar compression = require('compression')\nvar express = require('express')\n\nvar app = express()\n\n// compress all responses\napp.use(compression())\n\n// add all routes\n```\n\n### Node.js HTTP server\n\n```js\nvar compression = require('compression')({ threshold: 0 })\nvar http = require('http')\n\nfunction createServer (fn) {\n  return http.createServer(function (req, res) {\n    compression(req, res, function (err) {\n      if (err) {\n        res.statusCode = err.status || 500\n        res.end(err.message)\n        return\n      }\n\n      fn(req, res)\n    })\n  })\n}\n\nvar server = createServer(function (req, res) {\n  res.setHeader('Content-Type', 'text/plain')\n  res.end('hello world!')\n})\n\nserver.listen(3000, () => {\n  console.log('> Listening at http://localhost:3000')\n})\n```\n\n### Server-Sent Events\n\nBecause of the nature of compression this module does not work out of the box\nwith server-sent events. To compress content, a window of the output needs to\nbe buffered up in order to get good compression. Typically when using server-sent\nevents, there are certain block of data that need to reach the client.\n\nYou can achieve this by calling `res.flush()` when you need the data written to\nactually make it to the client.\n\n```js\nvar compression = require('compression')\nvar express = require('express')\n\nvar app = express()\n\n// compress responses\napp.use(compression())\n\n// server-sent event stream\napp.get('/events', function (req, res) {\n  res.setHeader('Content-Type', 'text/event-stream')\n  res.setHeader('Cache-Control', 'no-cache')\n\n  // send a ping approx every 2 seconds\n  var timer = setInterval(function () {\n    res.write('data: ping\\n\\n')\n\n    // !!! this is the important part\n    res.flush()\n  }, 2000)\n\n  res.on('close', function () {\n    clearInterval(timer)\n  })\n})\n```\n\n##  Contributing\n\nThe Express.js project welcomes all constructive contributions. Contributions take many forms,\nfrom code for bug fixes and enhancements, to additions and fixes to documentation, additional\ntests, triaging incoming pull requests and issues, and more!\n\nSee the [Contributing Guide](https://github.com/expressjs/express/blob/master/Contributing.md) for more technical details on contributing.\n\n## License\n\n[MIT](LICENSE)\n\n[npm-image]: https://badgen.net/npm/v/compression\n[npm-url]: https://npmjs.org/package/compression\n[downloads-image]: https://badgen.net/npm/dm/compression\n[downloads-url]: https://npmcharts.com/compare/compression?minimal=true\n[github-actions-ci-image]: https://badgen.net/github/checks/expressjs/compression/master?label=CI\n[github-actions-ci-url]: https://github.com/expressjs/compression/actions?query=workflow%3Aci\n[ossf-scorecard-badge]: https://api.scorecard.dev/projects/github.com/expressjs/compression/badge\n[ossf-scorecard-visualizer]: https://ossf.github.io/scorecard-visualizer/#/projects/github.com/expressjs/compression\n[funding-url]: https://opencollective.com/express\n[funding-image]: https://badgen.net/badge/icon/sponsor/pink?icon=github&label=Open%20Collective",
    "licenseText": "(The MIT License)\n\nCopyright (c) 2014 Jonathan Ong <me@jongleberry.com>\nCopyright (c) 2014-2015 Douglas Christopher Wilson <doug@somethingdoug.com>\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n'Software'), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n"
  },
  "artifacts": [],
  "remote": {
    "resolved": "https://registry.yarnpkg.com/compression/-/compression-1.8.1.tgz#4a45d909ac16509195a9a28bd91094889c180d79",
    "type": "tarball",
    "reference": "https://registry.yarnpkg.com/compression/-/compression-1.8.1.tgz",
    "hash": "4a45d909ac16509195a9a28bd91094889c180d79",
    "integrity": "sha512-9mAqGPHLakhCLeNyxPkK4xVo746zQ/czLH1Ky+vkitMnWfWZps8r0qXuwhwizagCRttsL4lfG4pIOvaWLpAP0w==",
    "registry": "npm",
    "packageName": "compression",
    "cacheIntegrity": "sha512-9mAqGPHLakhCLeNyxPkK4xVo746zQ/czLH1Ky+vkitMnWfWZps8r0qXuwhwizagCRttsL4lfG4pIOvaWLpAP0w== sha1-SkXZCawWUJGVqaKL2RCUiJwYDXk="
  },
  "registry": "npm",
  "hash": "4a45d909ac16509195a9a28bd91094889c180d79"
}