// @ts-check
/* eslint-disable prefer-object-spread, sort-imports */
import BaseError from "./base-error.js";
import { digg } from "diggerize";
import * as inflection from "inflection";
export default class ValidationError extends BaseError {
    static apiMakerType = "ValidationError";
    apiMakerType = "ValidationError";
    /**
     * @param {import("./validation-errors.js").ValidationErrors} validationErrors
     * @param {object} args
     */
    constructor(validationErrors, args) {
        const errorMessage = validationErrors.getUnhandledErrorMessage() || validationErrors.getErrorMessage();
        const forwardedArgs = { addResponseErrorsToErrorMessage: false };
        const newArgs = Object.assign({}, args, forwardedArgs);
        super(errorMessage, newArgs);
        this.validationErrors = validationErrors;
    }
    /** @returns {import("./validation-errors.js").ValidationError[]} */
    getUnhandledErrors = () => this.validationErrors.getValidationErrors().filter((validationError) => !validationError.getHandled());
    /** @returns {import("./validation-errors.js").ValidationErrors} */
    getValidationErrors = () => digg(this, "validationErrors");
    /** @returns {boolean} */
    hasUnhandledErrors = () => {
        const unhandledError = this.validationErrors.getValidationErrors().find((validationError) => !validationError.getHandled());
        return Boolean(unhandledError);
    };
    /** @returns {boolean} */
    hasValidationErrorForAttribute = (attributeName) => {
        const underscoredAttributeName = inflection.underscore(attributeName);
        const foundAttribute = this.validationErrors.getValidationErrors().find((validationError) => validationError.getAttributeName() == underscoredAttributeName);
        if (foundAttribute)
            return true;
        return false;
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmFsaWRhdGlvbi1lcnJvci5qcyIsInNvdXJjZVJvb3QiOiIvc3JjLyIsInNvdXJjZXMiOlsidmFsaWRhdGlvbi1lcnJvci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZO0FBRVosdURBQXVEO0FBQ3ZELE9BQU8sU0FBUyxNQUFNLGlCQUFpQixDQUFBO0FBQ3ZDLE9BQU8sRUFBQyxJQUFJLEVBQUMsTUFBTSxXQUFXLENBQUE7QUFDOUIsT0FBTyxLQUFLLFVBQVUsTUFBTSxZQUFZLENBQUE7QUFFeEMsTUFBTSxDQUFDLE9BQU8sT0FBTyxlQUFnQixTQUFRLFNBQVM7SUFDcEQsTUFBTSxDQUFDLFlBQVksR0FBRyxpQkFBaUIsQ0FBQTtJQUN2QyxZQUFZLEdBQUcsaUJBQWlCLENBQUE7SUFFaEM7OztPQUdHO0lBQ0gsWUFBWSxnQkFBZ0IsRUFBRSxJQUFJO1FBQ2hDLE1BQU0sWUFBWSxHQUFHLGdCQUFnQixDQUFDLHdCQUF3QixFQUFFLElBQUksZ0JBQWdCLENBQUMsZUFBZSxFQUFFLENBQUE7UUFDdEcsTUFBTSxhQUFhLEdBQUcsRUFBQywrQkFBK0IsRUFBRSxLQUFLLEVBQUMsQ0FBQTtRQUM5RCxNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsYUFBYSxDQUFDLENBQUE7UUFFdEQsS0FBSyxDQUFDLFlBQVksRUFBRSxPQUFPLENBQUMsQ0FBQTtRQUM1QixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUE7SUFDMUMsQ0FBQztJQUVELG9FQUFvRTtJQUNwRSxrQkFBa0IsR0FBRyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLEVBQUUsRUFBRSxDQUFDLENBQUMsZUFBZSxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUE7SUFFakksbUVBQW1FO0lBQ25FLG1CQUFtQixHQUFHLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsa0JBQWtCLENBQUMsQ0FBQTtJQUUxRCx5QkFBeUI7SUFDekIsa0JBQWtCLEdBQUcsR0FBRyxFQUFFO1FBQ3hCLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLGVBQWUsRUFBRSxFQUFFLENBQUMsQ0FBQyxlQUFlLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQTtRQUUzSCxPQUFPLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQTtJQUNoQyxDQUFDLENBQUE7SUFFRCx5QkFBeUI7SUFDekIsOEJBQThCLEdBQUcsQ0FBQyxhQUFhLEVBQUUsRUFBRTtRQUNqRCxNQUFNLHdCQUF3QixHQUFHLFVBQVUsQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDLENBQUE7UUFDckUsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLG1CQUFtQixFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsZUFBZSxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUMsZ0JBQWdCLEVBQUUsSUFBSSx3QkFBd0IsQ0FBQyxDQUFBO1FBRTVKLElBQUksY0FBYztZQUFFLE9BQU8sSUFBSSxDQUFBO1FBRS9CLE9BQU8sS0FBSyxDQUFBO0lBQ2QsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLWNoZWNrXG5cbi8qIGVzbGludC1kaXNhYmxlIHByZWZlci1vYmplY3Qtc3ByZWFkLCBzb3J0LWltcG9ydHMgKi9cbmltcG9ydCBCYXNlRXJyb3IgZnJvbSBcIi4vYmFzZS1lcnJvci5qc1wiXG5pbXBvcnQge2RpZ2d9IGZyb20gXCJkaWdnZXJpemVcIlxuaW1wb3J0ICogYXMgaW5mbGVjdGlvbiBmcm9tIFwiaW5mbGVjdGlvblwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZhbGlkYXRpb25FcnJvciBleHRlbmRzIEJhc2VFcnJvciB7XG4gIHN0YXRpYyBhcGlNYWtlclR5cGUgPSBcIlZhbGlkYXRpb25FcnJvclwiXG4gIGFwaU1ha2VyVHlwZSA9IFwiVmFsaWRhdGlvbkVycm9yXCJcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3ZhbGlkYXRpb24tZXJyb3JzLmpzXCIpLlZhbGlkYXRpb25FcnJvcnN9IHZhbGlkYXRpb25FcnJvcnNcbiAgICogQHBhcmFtIHtvYmplY3R9IGFyZ3NcbiAgICovXG4gIGNvbnN0cnVjdG9yKHZhbGlkYXRpb25FcnJvcnMsIGFyZ3MpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB2YWxpZGF0aW9uRXJyb3JzLmdldFVuaGFuZGxlZEVycm9yTWVzc2FnZSgpIHx8IHZhbGlkYXRpb25FcnJvcnMuZ2V0RXJyb3JNZXNzYWdlKClcbiAgICBjb25zdCBmb3J3YXJkZWRBcmdzID0ge2FkZFJlc3BvbnNlRXJyb3JzVG9FcnJvck1lc3NhZ2U6IGZhbHNlfVxuICAgIGNvbnN0IG5ld0FyZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBhcmdzLCBmb3J3YXJkZWRBcmdzKVxuXG4gICAgc3VwZXIoZXJyb3JNZXNzYWdlLCBuZXdBcmdzKVxuICAgIHRoaXMudmFsaWRhdGlvbkVycm9ycyA9IHZhbGlkYXRpb25FcnJvcnNcbiAgfVxuXG4gIC8qKiBAcmV0dXJucyB7aW1wb3J0KFwiLi92YWxpZGF0aW9uLWVycm9ycy5qc1wiKS5WYWxpZGF0aW9uRXJyb3JbXX0gKi9cbiAgZ2V0VW5oYW5kbGVkRXJyb3JzID0gKCkgPT4gdGhpcy52YWxpZGF0aW9uRXJyb3JzLmdldFZhbGlkYXRpb25FcnJvcnMoKS5maWx0ZXIoKHZhbGlkYXRpb25FcnJvcikgPT4gIXZhbGlkYXRpb25FcnJvci5nZXRIYW5kbGVkKCkpXG5cbiAgLyoqIEByZXR1cm5zIHtpbXBvcnQoXCIuL3ZhbGlkYXRpb24tZXJyb3JzLmpzXCIpLlZhbGlkYXRpb25FcnJvcnN9ICovXG4gIGdldFZhbGlkYXRpb25FcnJvcnMgPSAoKSA9PiBkaWdnKHRoaXMsIFwidmFsaWRhdGlvbkVycm9yc1wiKVxuXG4gIC8qKiBAcmV0dXJucyB7Ym9vbGVhbn0gKi9cbiAgaGFzVW5oYW5kbGVkRXJyb3JzID0gKCkgPT4ge1xuICAgIGNvbnN0IHVuaGFuZGxlZEVycm9yID0gdGhpcy52YWxpZGF0aW9uRXJyb3JzLmdldFZhbGlkYXRpb25FcnJvcnMoKS5maW5kKCh2YWxpZGF0aW9uRXJyb3IpID0+ICF2YWxpZGF0aW9uRXJyb3IuZ2V0SGFuZGxlZCgpKVxuXG4gICAgcmV0dXJuIEJvb2xlYW4odW5oYW5kbGVkRXJyb3IpXG4gIH1cblxuICAvKiogQHJldHVybnMge2Jvb2xlYW59ICovXG4gIGhhc1ZhbGlkYXRpb25FcnJvckZvckF0dHJpYnV0ZSA9IChhdHRyaWJ1dGVOYW1lKSA9PiB7XG4gICAgY29uc3QgdW5kZXJzY29yZWRBdHRyaWJ1dGVOYW1lID0gaW5mbGVjdGlvbi51bmRlcnNjb3JlKGF0dHJpYnV0ZU5hbWUpXG4gICAgY29uc3QgZm91bmRBdHRyaWJ1dGUgPSB0aGlzLnZhbGlkYXRpb25FcnJvcnMuZ2V0VmFsaWRhdGlvbkVycm9ycygpLmZpbmQoKHZhbGlkYXRpb25FcnJvcikgPT4gdmFsaWRhdGlvbkVycm9yLmdldEF0dHJpYnV0ZU5hbWUoKSA9PSB1bmRlcnNjb3JlZEF0dHJpYnV0ZU5hbWUpXG5cbiAgICBpZiAoZm91bmRBdHRyaWJ1dGUpIHJldHVybiB0cnVlXG5cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuIl19