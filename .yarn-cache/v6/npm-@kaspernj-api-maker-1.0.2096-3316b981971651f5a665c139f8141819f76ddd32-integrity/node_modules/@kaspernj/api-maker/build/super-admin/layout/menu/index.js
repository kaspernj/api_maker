import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
/* eslint-disable new-cap, no-extra-parens, no-return-assign, react/jsx-max-depth, react/jsx-no-literals, sort-imports */
import { View } from "react-native";
import BaseComponent from "../../../base-component";
import Devise from "../../../devise.js";
import { FlashNotifications } from "flash-notifications";
import Icon from "../../../utils/icon";
import memo from "set-state-compare/build/memo.js";
import Link from "../../../link";
import MenuContent from "./menu-content";
import MenuItem from "./menu-item";
import Params from "../../../params.js";
import PropTypes from "prop-types";
import PropTypesExact from "prop-types-exact";
import React from "react";
import { shapeComponent } from "set-state-compare/build/shape-component.js";
import Text from "../../../utils/text";
import { useBreakpoint } from "responsive-breakpoints";
import useCurrentUser from "../../../use-current-user.js";
import useI18n from "i18n-on-steroids/src/use-i18n.mjs";
import { WithDefaultStyle } from "../../../utils/default-style";
const dataSets = {};
const styles = {};
export default memo(shapeComponent(class ComponentsAdminLayoutMenu extends BaseComponent {
    static propTypes = PropTypesExact({
        active: PropTypes.string,
        noAccess: PropTypes.bool.isRequired,
        onRequestMenuClose: PropTypes.func.isRequired,
        triggered: PropTypes.bool.isRequired
    });
    setup() {
        const { lgUp, mdDown, mdUp } = useBreakpoint();
        const { t } = useI18n({ namespace: "js.api_maker.super_admin.layout.menu" });
        const currentUser = useCurrentUser();
        this.setInstance({ currentUser, lgUp, mdDown, mdUp, t });
    }
    render() {
        const { currentUser, lgUp, mdDown, mdUp, t } = this.tt;
        const { active, noAccess, triggered } = this.props;
        if (mdDown && !triggered) {
            return null;
        }
        return (_jsx(View, { dataSet: dataSets[`rootView-${triggered}`] ||= { component: "super-admin--layout--menu", triggered }, style: styles[`root-${mdDown}-${mdUp}-${lgUp}`] ||= {
                position: "fixed",
                zIndex: 9,
                overflowY: "auto",
                overflowX: "hidden",
                top: 0,
                left: 0,
                height: "100%",
                flexDirection: "column",
                backgroundColor: "#1b1c1e",
                width: (lgUp && 290) || (mdUp && 250) || (mdDown && "100%") || undefined,
                maxWidth: mdDown ? 250 : undefined,
                maxHeight: mdDown ? "100vh" : undefined
            }, children: _jsxs(WithDefaultStyle, { style: styles.withDefaultStyle ||= { Text: { color: "#fff" } }, children: [_jsx(View, { dataSet: dataSets.menuLogoView ||= { class: "menu-logo" }, style: styles.menuLogoView ||= {
                            overflow: "hidden",
                            marginTop: 25,
                            marginRight: "auto",
                            marginLeft: "auto"
                        }, children: _jsx(Link, { dataSet: dataSets.menuLogoLink ||= { class: "menu-logo-link" }, to: Params.withParams({}), children: _jsx(Text, { style: styles.menuLogoLinkText ||= {
                                    color: "#dededf",
                                    textDecorationLine: "none",
                                    fontSize: 42,
                                    textOverflow: "ellipsis",
                                    whiteSpace: "nowrap"
                                }, children: "Admin" }) }) }), _jsx(View, { dataSet: dataSets.menuItemsCenter ||= { class: "menu-items-center" }, style: styles.menuItemsCenter ||= { marginTop: 25 }, children: !noAccess &&
                            _jsx(MenuContent, { active: active }) }), _jsxs(View, { dataSet: dataSets.menuItemsBottom ||= { class: "menu-items-bottom" }, style: styles.menuItemsBottom ||= { marginTop: "auto", marginBottom: 25 }, children: [currentUser &&
                                _jsxs(View, { dataSet: dataSets.menuUserSection ||= { class: "menu-user-section" }, style: styles.menuUserSection ||= {
                                        flexDirection: "row",
                                        alignItems: "center",
                                        marginRight: 25,
                                        marginBottom: 25,
                                        marginLeft: 25
                                    }, children: [_jsx(View, { dataSet: dataSets.menuUserIcon ||= { class: "menu-user-icon" }, style: styles.menuUserIcon ||= {
                                                width: 44,
                                                height: 44,
                                                alignItems: "center",
                                                justifyContent: "center",
                                                backgroundColor: "#abbcd0",
                                                borderRadius: "50%"
                                            }, children: _jsx(Icon, { name: "user", size: 12 }) }), _jsx(View, { className: "menu-user-name", style: styles.userName ||= { flexShrink: 1, marginLeft: 8 }, children: _jsx(Text, { dataSet: dataSets.menuUserNameContainer ||= { class: "menu-user-name-container" }, style: styles.userNameContainer ||= { overflow: "hidden", maxWidth: 140 }, children: currentUser.name() }) })] }), currentUser &&
                                _jsx(MenuItem, { active: true, className: "sign-out-menu-item", icon: "sign-out-alt", label: t(".sign_out", { defaultValue: "Sign out" }), onClick: this.tt.onSignOutClicked })] })] }) }));
    }
    onSignOutClicked = async (e) => {
        e.preventDefault();
        try {
            await Devise.signOut();
            FlashNotifications.success(this.t(".you_have_been_signed_out", { defaultValue: "You have been signed out" }));
        }
        catch (error) {
            FlashNotifications.errorResponse(error);
        }
    };
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiL3NyYy8iLCJzb3VyY2VzIjpbInN1cGVyLWFkbWluL2xheW91dC9tZW51L2luZGV4LmpzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEseUhBQXlIO0FBQ3pILE9BQU8sRUFBQyxJQUFJLEVBQUMsTUFBTSxjQUFjLENBQUE7QUFDakMsT0FBTyxhQUFhLE1BQU0seUJBQXlCLENBQUE7QUFDbkQsT0FBTyxNQUFNLE1BQU0sb0JBQW9CLENBQUE7QUFDdkMsT0FBTyxFQUFDLGtCQUFrQixFQUFDLE1BQU0scUJBQXFCLENBQUE7QUFDdEQsT0FBTyxJQUFJLE1BQU0scUJBQXFCLENBQUE7QUFDdEMsT0FBTyxJQUFJLE1BQU0saUNBQWlDLENBQUE7QUFDbEQsT0FBTyxJQUFJLE1BQU0sZUFBZSxDQUFBO0FBQ2hDLE9BQU8sV0FBVyxNQUFNLGdCQUFnQixDQUFBO0FBQ3hDLE9BQU8sUUFBUSxNQUFNLGFBQWEsQ0FBQTtBQUNsQyxPQUFPLE1BQU0sTUFBTSxvQkFBb0IsQ0FBQTtBQUN2QyxPQUFPLFNBQVMsTUFBTSxZQUFZLENBQUE7QUFDbEMsT0FBTyxjQUFjLE1BQU0sa0JBQWtCLENBQUE7QUFDN0MsT0FBTyxLQUFLLE1BQU0sT0FBTyxDQUFBO0FBQ3pCLE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSw0Q0FBNEMsQ0FBQTtBQUN6RSxPQUFPLElBQUksTUFBTSxxQkFBcUIsQ0FBQTtBQUN0QyxPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sd0JBQXdCLENBQUE7QUFDcEQsT0FBTyxjQUFjLE1BQU0sOEJBQThCLENBQUE7QUFDekQsT0FBTyxPQUFPLE1BQU0sbUNBQW1DLENBQUE7QUFDdkQsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sOEJBQThCLENBQUE7QUFFN0QsTUFBTSxRQUFRLEdBQUcsRUFBRSxDQUFBO0FBQ25CLE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQTtBQUVqQixlQUFlLElBQUksQ0FBQyxjQUFjLENBQUMs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QUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLDJCQUEyQixFQUFFLEVBQUMsWUFBWSxFQUFFLDBCQUEwQixFQUFDLENBQUMsQ0FBQyxDQUFBO1FBQzdHLENBQUM7UUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ2Ysa0JBQWtCLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBQ3pDLENBQUM7SUFDSCxDQUFDLENBQUE7Q0FDRixDQUFDLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5ldy1jYXAsIG5vLWV4dHJhLXBhcmVucywgbm8tcmV0dXJuLWFzc2lnbiwgcmVhY3QvanN4LW1heC1kZXB0aCwgcmVhY3QvanN4LW5vLWxpdGVyYWxzLCBzb3J0LWltcG9ydHMgKi9cbmltcG9ydCB7Vmlld30gZnJvbSBcInJlYWN0LW5hdGl2ZVwiXG5pbXBvcnQgQmFzZUNvbXBvbmVudCBmcm9tIFwiLi4vLi4vLi4vYmFzZS1jb21wb25lbnRcIlxuaW1wb3J0IERldmlzZSBmcm9tIFwiLi4vLi4vLi4vZGV2aXNlLmpzXCJcbmltcG9ydCB7Rmxhc2hOb3RpZmljYXRpb25zfSBmcm9tIFwiZmxhc2gtbm90aWZpY2F0aW9uc1wiXG5pbXBvcnQgSWNvbiBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvaWNvblwiXG5pbXBvcnQgbWVtbyBmcm9tIFwic2V0LXN0YXRlLWNvbXBhcmUvYnVpbGQvbWVtby5qc1wiXG5pbXBvcnQgTGluayBmcm9tIFwiLi4vLi4vLi4vbGlua1wiXG5pbXBvcnQgTWVudUNvbnRlbnQgZnJvbSBcIi4vbWVudS1jb250ZW50XCJcbmltcG9ydCBNZW51SXRlbSBmcm9tIFwiLi9tZW51LWl0ZW1cIlxuaW1wb3J0IFBhcmFtcyBmcm9tIFwiLi4vLi4vLi4vcGFyYW1zLmpzXCJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIlxuaW1wb3J0IFByb3BUeXBlc0V4YWN0IGZyb20gXCJwcm9wLXR5cGVzLWV4YWN0XCJcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIlxuaW1wb3J0IHtzaGFwZUNvbXBvbmVudH0gZnJvbSBcInNldC1zdGF0ZS1jb21wYXJlL2J1aWxkL3NoYXBlLWNvbXBvbmVudC5qc1wiXG5pbXBvcnQgVGV4dCBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvdGV4dFwiXG5pbXBvcnQge3VzZUJyZWFrcG9pbnR9IGZyb20gXCJyZXNwb25zaXZlLWJyZWFrcG9pbnRzXCJcbmltcG9ydCB1c2VDdXJyZW50VXNlciBmcm9tIFwiLi4vLi4vLi4vdXNlLWN1cnJlbnQtdXNlci5qc1wiXG5pbXBvcnQgdXNlSTE4biBmcm9tIFwiaTE4bi1vbi1zdGVyb2lkcy9zcmMvdXNlLWkxOG4ubWpzXCJcbmltcG9ydCB7V2l0aERlZmF1bHRTdHlsZX0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL2RlZmF1bHQtc3R5bGVcIlxuXG5jb25zdCBkYXRhU2V0cyA9IHt9XG5jb25zdCBzdHlsZXMgPSB7fVxuXG5leHBvcnQgZGVmYXVsdCBtZW1vKHNoYXBlQ29tcG9uZW50KGNsYXNzIENvbXBvbmVudHNBZG1pbkxheW91dE1lbnUgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IFByb3BUeXBlc0V4YWN0KHtcbiAgICBhY3RpdmU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgbm9BY2Nlc3M6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gICAgb25SZXF1ZXN0TWVudUNsb3NlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIHRyaWdnZXJlZDogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZFxuICB9KVxuXG4gIHNldHVwKCkge1xuICAgIGNvbnN0IHtsZ1VwLCBtZERvd24sIG1kVXB9ID0gdXNlQnJlYWtwb2ludCgpXG4gICAgY29uc3Qge3R9ID0gdXNlSTE4bih7bmFtZXNwYWNlOiBcImpzLmFwaV9tYWtlci5zdXBlcl9hZG1pbi5sYXlvdXQubWVudVwifSlcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IHVzZUN1cnJlbnRVc2VyKClcblxuICAgIHRoaXMuc2V0SW5zdGFuY2Uoe2N1cnJlbnRVc2VyLCBsZ1VwLCBtZERvd24sIG1kVXAsIHR9KVxuICB9XG5cbiAgcmVuZGVyKCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGNvbXBsZXhpdHlcbiAgICBjb25zdCB7Y3VycmVudFVzZXIsIGxnVXAsIG1kRG93biwgbWRVcCwgdH0gPSB0aGlzLnR0XG4gICAgY29uc3Qge2FjdGl2ZSwgbm9BY2Nlc3MsIHRyaWdnZXJlZH0gPSB0aGlzLnByb3BzXG5cbiAgICBpZiAobWREb3duICYmICF0cmlnZ2VyZWQpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxWaWV3XG4gICAgICAgIGRhdGFTZXQ9e2RhdGFTZXRzW2Byb290Vmlldy0ke3RyaWdnZXJlZH1gXSB8fD0ge2NvbXBvbmVudDogXCJzdXBlci1hZG1pbi0tbGF5b3V0LS1tZW51XCIsIHRyaWdnZXJlZH19XG4gICAgICAgIHN0eWxlPXtzdHlsZXNbYHJvb3QtJHttZERvd259LSR7bWRVcH0tJHtsZ1VwfWBdIHx8PSB7XG4gICAgICAgICAgcG9zaXRpb246IFwiZml4ZWRcIixcbiAgICAgICAgICB6SW5kZXg6IDksXG4gICAgICAgICAgb3ZlcmZsb3dZOiBcImF1dG9cIixcbiAgICAgICAgICBvdmVyZmxvd1g6IFwiaGlkZGVuXCIsXG4gICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgaGVpZ2h0OiBcIjEwMCVcIixcbiAgICAgICAgICBmbGV4RGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjMWIxYzFlXCIsXG4gICAgICAgICAgd2lkdGg6IChsZ1VwICYmIDI5MCkgfHwgKG1kVXAgJiYgMjUwKSB8fCAobWREb3duICYmIFwiMTAwJVwiKSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgbWF4V2lkdGg6IG1kRG93biA/IDI1MCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBtYXhIZWlnaHQ6IG1kRG93biA/IFwiMTAwdmhcIiA6IHVuZGVmaW5lZFxuICAgICAgICB9fVxuICAgICAgPlxuICAgICAgICA8V2l0aERlZmF1bHRTdHlsZSBzdHlsZT17c3R5bGVzLndpdGhEZWZhdWx0U3R5bGUgfHw9IHtUZXh0OiB7Y29sb3I6IFwiI2ZmZlwifX19PlxuICAgICAgICAgIDxWaWV3XG4gICAgICAgICAgICBkYXRhU2V0PXtkYXRhU2V0cy5tZW51TG9nb1ZpZXcgfHw9IHtjbGFzczogXCJtZW51LWxvZ29cIn19XG4gICAgICAgICAgICBzdHlsZT17c3R5bGVzLm1lbnVMb2dvVmlldyB8fD0ge1xuICAgICAgICAgICAgICBvdmVyZmxvdzogXCJoaWRkZW5cIixcbiAgICAgICAgICAgICAgbWFyZ2luVG9wOiAyNSxcbiAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IFwiYXV0b1wiLFxuICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiBcImF1dG9cIlxuICAgICAgICAgICAgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8TGluayBkYXRhU2V0PXtkYXRhU2V0cy5tZW51TG9nb0xpbmsgfHw9IHtjbGFzczogXCJtZW51LWxvZ28tbGlua1wifX0gdG89e1BhcmFtcy53aXRoUGFyYW1zKHt9KX0+XG4gICAgICAgICAgICAgIDxUZXh0XG4gICAgICAgICAgICAgICAgc3R5bGU9e3N0eWxlcy5tZW51TG9nb0xpbmtUZXh0IHx8PSB7XG4gICAgICAgICAgICAgICAgICBjb2xvcjogXCIjZGVkZWRmXCIsXG4gICAgICAgICAgICAgICAgICB0ZXh0RGVjb3JhdGlvbkxpbmU6IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgICAgZm9udFNpemU6IDQyLFxuICAgICAgICAgICAgICAgICAgdGV4dE92ZXJmbG93OiBcImVsbGlwc2lzXCIsXG4gICAgICAgICAgICAgICAgICB3aGl0ZVNwYWNlOiBcIm5vd3JhcFwiXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIEFkbWluXG4gICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgICAgPFZpZXdcbiAgICAgICAgICAgIGRhdGFTZXQ9e2RhdGFTZXRzLm1lbnVJdGVtc0NlbnRlciB8fD0ge2NsYXNzOiBcIm1lbnUtaXRlbXMtY2VudGVyXCJ9fVxuICAgICAgICAgICAgc3R5bGU9e3N0eWxlcy5tZW51SXRlbXNDZW50ZXIgfHw9IHttYXJnaW5Ub3A6IDI1fX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7IW5vQWNjZXNzICYmXG4gICAgICAgICAgICAgIDxNZW51Q29udGVudCBhY3RpdmU9e2FjdGl2ZX0gLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgICAgPFZpZXdcbiAgICAgICAgICAgIGRhdGFTZXQ9e2RhdGFTZXRzLm1lbnVJdGVtc0JvdHRvbSB8fD0ge2NsYXNzOiBcIm1lbnUtaXRlbXMtYm90dG9tXCJ9fVxuICAgICAgICAgICAgc3R5bGU9e3N0eWxlcy5tZW51SXRlbXNCb3R0b20gfHw9IHttYXJnaW5Ub3A6IFwiYXV0b1wiLCBtYXJnaW5Cb3R0b206IDI1fX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7Y3VycmVudFVzZXIgJiZcbiAgICAgICAgICAgICAgPFZpZXdcbiAgICAgICAgICAgICAgICBkYXRhU2V0PXtkYXRhU2V0cy5tZW51VXNlclNlY3Rpb24gfHw9IHtjbGFzczogXCJtZW51LXVzZXItc2VjdGlvblwifX1cbiAgICAgICAgICAgICAgICBzdHlsZT17c3R5bGVzLm1lbnVVc2VyU2VjdGlvbiB8fD0ge1xuICAgICAgICAgICAgICAgICAgZmxleERpcmVjdGlvbjogXCJyb3dcIixcbiAgICAgICAgICAgICAgICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG4gICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogMjUsXG4gICAgICAgICAgICAgICAgICBtYXJnaW5Cb3R0b206IDI1LFxuICAgICAgICAgICAgICAgICAgbWFyZ2luTGVmdDogMjVcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFZpZXdcbiAgICAgICAgICAgICAgICAgIGRhdGFTZXQ9e2RhdGFTZXRzLm1lbnVVc2VySWNvbiB8fD0ge2NsYXNzOiBcIm1lbnUtdXNlci1pY29uXCJ9fVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3N0eWxlcy5tZW51VXNlckljb24gfHw9IHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQ0LFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDQ0LFxuICAgICAgICAgICAgICAgICAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxuICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNhYmJjZDBcIixcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiBcIjUwJVwiXG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9XCJ1c2VyXCIgc2l6ZT17MTJ9IC8+XG4gICAgICAgICAgICAgICAgPC9WaWV3PlxuICAgICAgICAgICAgICAgIDxWaWV3IGNsYXNzTmFtZT1cIm1lbnUtdXNlci1uYW1lXCIgc3R5bGU9e3N0eWxlcy51c2VyTmFtZSB8fD0ge2ZsZXhTaHJpbms6IDEsIG1hcmdpbkxlZnQ6IDh9fT5cbiAgICAgICAgICAgICAgICAgIDxUZXh0XG4gICAgICAgICAgICAgICAgICAgIGRhdGFTZXQ9e2RhdGFTZXRzLm1lbnVVc2VyTmFtZUNvbnRhaW5lciB8fD0ge2NsYXNzOiBcIm1lbnUtdXNlci1uYW1lLWNvbnRhaW5lclwifX1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3N0eWxlcy51c2VyTmFtZUNvbnRhaW5lciB8fD0ge292ZXJmbG93OiBcImhpZGRlblwiLCBtYXhXaWR0aDogMTQwfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRVc2VyLm5hbWUoKX1cbiAgICAgICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgICAgICAgIDwvVmlldz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHtjdXJyZW50VXNlciAmJlxuICAgICAgICAgICAgICA8TWVudUl0ZW1cbiAgICAgICAgICAgICAgICBhY3RpdmVcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzaWduLW91dC1tZW51LWl0ZW1cIlxuICAgICAgICAgICAgICAgIGljb249XCJzaWduLW91dC1hbHRcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KFwiLnNpZ25fb3V0XCIsIHtkZWZhdWx0VmFsdWU6IFwiU2lnbiBvdXRcIn0pfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudHQub25TaWduT3V0Q2xpY2tlZH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgIDwvV2l0aERlZmF1bHRTdHlsZT5cbiAgICAgIDwvVmlldz5cbiAgICApXG4gIH1cblxuICBvblNpZ25PdXRDbGlja2VkID0gYXN5bmMgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBEZXZpc2Uuc2lnbk91dCgpXG4gICAgICBGbGFzaE5vdGlmaWNhdGlvbnMuc3VjY2Vzcyh0aGlzLnQoXCIueW91X2hhdmVfYmVlbl9zaWduZWRfb3V0XCIsIHtkZWZhdWx0VmFsdWU6IFwiWW91IGhhdmUgYmVlbiBzaWduZWQgb3V0XCJ9KSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgRmxhc2hOb3RpZmljYXRpb25zLmVycm9yUmVzcG9uc2UoZXJyb3IpXG4gICAgfVxuICB9XG59KSlcbiJdfQ==