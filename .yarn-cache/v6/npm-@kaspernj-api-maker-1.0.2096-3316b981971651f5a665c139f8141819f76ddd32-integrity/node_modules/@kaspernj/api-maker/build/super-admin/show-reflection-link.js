import { jsxs as _jsxs, jsx as _jsx } from "react/jsx-runtime";
/* eslint-disable react/jsx-curly-brace-presence, sort-imports */
import BaseComponent from "../base-component";
import { digg } from "diggerize";
import Link from "../link";
import memo from "set-state-compare/build/memo.js";
import Params from "../params.js";
import React, { useMemo } from "react";
import { shapeComponent } from "set-state-compare/build/shape-component.js";
import Text from "../utils/text";
export default memo(shapeComponent(class ApiMakerSuperAdminShowReflectionLink extends BaseComponent {
    setup() {
        this.useStates({ count: undefined });
        useMemo(() => {
            this.countRelationship();
        }, []);
    }
    countRelationship = async () => {
        const { model, reflection } = this.p;
        const query = model[reflection.name()]();
        const count = await query.ransack().count();
        this.setState({ count });
    };
    render() {
        const { model, modelClass, reflection } = this.p;
        const { count } = this.s;
        return (_jsx(Link, { to: Params.withParams({ model: digg(modelClass.modelClassData(), "name"), model_id: model.primaryKey(), model_reflection: reflection.name() }), children: _jsxs(Text, { children: [modelClass.humanAttributeName(reflection.name()), " (", count, ")"] }) }));
    }
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hvdy1yZWZsZWN0aW9uLWxpbmsuanMiLCJzb3VyY2VSb290IjoiL3NyYy8iLCJzb3VyY2VzIjpbInN1cGVyLWFkbWluL3Nob3ctcmVmbGVjdGlvbi1saW5rLmpzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsaUVBQWlFO0FBQ2pFLE9BQU8sYUFBYSxNQUFNLG1CQUFtQixDQUFBO0FBQzdDLE9BQU8sRUFBQyxJQUFJLEVBQUMsTUFBTSxXQUFXLENBQUE7QUFDOUIsT0FBTyxJQUFJLE1BQU0sU0FBUyxDQUFBO0FBQzFCLE9BQU8sSUFBSSxNQUFNLGlDQUFpQyxDQUFBO0FBQ2xELE9BQU8sTUFBTSxNQUFNLGNBQWMsQ0FBQTtBQUNqQyxPQUFPLEtBQUssRUFBRSxFQUFDLE9BQU8sRUFBQyxNQUFNLE9BQU8sQ0FBQTtBQUNwQyxPQUFPLEVBQUMsY0FBYyxFQUFDLE1BQU0sNENBQTRDLENBQUE7QUFDekUsT0FBTyxJQUFJLE1BQU0sZUFBZSxDQUFBO0FBRWhDLGVBQWUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLG9DQUFxQyxTQUFRLGFBQWE7SUFDakcsS0FBSztRQUNILElBQUksQ0FBQyxTQUFTLENBQUMsRUFBQyxLQUFLLEVBQUUsU0FBUyxFQUFDLENBQUMsQ0FBQTtRQUVsQyxPQUFPLENBQUMsR0FBRyxFQUFFO1lBQ1gsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUE7UUFDMUIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFBO0lBQ1IsQ0FBQztJQUVELGlCQUFpQixHQUFHLEtBQUssSUFBSSxFQUFFO1FBQzdCLE1BQU0sRUFBQyxLQUFLLEVBQUUsVUFBVSxFQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQTtRQUNsQyxNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQTtRQUN4QyxNQUFNLEtBQUssR0FBRyxNQUFNLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtRQUUzQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUMsS0FBSyxFQUFDLENBQUMsQ0FBQTtJQUN4QixDQUFDLENBQUE7SUFFRCxNQUFNO1FBQ0osTUFBTSxFQUFDLEtBQUssRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQTtRQUM5QyxNQUFNLEVBQUMsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQTtRQUV0QixPQUFPLENBQ0wsS0FBQyxJQUFJLElBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxjQUFjLEVBQUUsRUFBRSxNQUFNLENBQUMsRUFBRSxRQUFRLEVBQUUsS0FBSyxDQUFDLFVBQVUsRUFBRSxFQUFFLGdCQUFnQixFQUFFLFVBQVUsQ0FBQyxJQUFJLEVBQUUsRUFBQyxDQUFDLFlBQ2hKLE1BQUMsSUFBSSxlQUNGLFVBQVUsQ0FBQyxrQkFBa0IsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUMsRUFDaEQsSUFBSSxFQUNKLEtBQUssRUFDTCxHQUFHLElBQ0MsR0FDRixDQUNSLENBQUE7SUFDSCxDQUFDO0NBQ0YsQ0FBQyxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSByZWFjdC9qc3gtY3VybHktYnJhY2UtcHJlc2VuY2UsIHNvcnQtaW1wb3J0cyAqL1xuaW1wb3J0IEJhc2VDb21wb25lbnQgZnJvbSBcIi4uL2Jhc2UtY29tcG9uZW50XCJcbmltcG9ydCB7ZGlnZ30gZnJvbSBcImRpZ2dlcml6ZVwiXG5pbXBvcnQgTGluayBmcm9tIFwiLi4vbGlua1wiXG5pbXBvcnQgbWVtbyBmcm9tIFwic2V0LXN0YXRlLWNvbXBhcmUvYnVpbGQvbWVtby5qc1wiXG5pbXBvcnQgUGFyYW1zIGZyb20gXCIuLi9wYXJhbXMuanNcIlxuaW1wb3J0IFJlYWN0LCB7dXNlTWVtb30gZnJvbSBcInJlYWN0XCJcbmltcG9ydCB7c2hhcGVDb21wb25lbnR9IGZyb20gXCJzZXQtc3RhdGUtY29tcGFyZS9idWlsZC9zaGFwZS1jb21wb25lbnQuanNcIlxuaW1wb3J0IFRleHQgZnJvbSBcIi4uL3V0aWxzL3RleHRcIlxuXG5leHBvcnQgZGVmYXVsdCBtZW1vKHNoYXBlQ29tcG9uZW50KGNsYXNzIEFwaU1ha2VyU3VwZXJBZG1pblNob3dSZWZsZWN0aW9uTGluayBleHRlbmRzIEJhc2VDb21wb25lbnQge1xuICBzZXR1cCgpIHtcbiAgICB0aGlzLnVzZVN0YXRlcyh7Y291bnQ6IHVuZGVmaW5lZH0pXG5cbiAgICB1c2VNZW1vKCgpID0+IHtcbiAgICAgIHRoaXMuY291bnRSZWxhdGlvbnNoaXAoKVxuICAgIH0sIFtdKVxuICB9XG5cbiAgY291bnRSZWxhdGlvbnNoaXAgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qge21vZGVsLCByZWZsZWN0aW9ufSA9IHRoaXMucFxuICAgIGNvbnN0IHF1ZXJ5ID0gbW9kZWxbcmVmbGVjdGlvbi5uYW1lKCldKClcbiAgICBjb25zdCBjb3VudCA9IGF3YWl0IHF1ZXJ5LnJhbnNhY2soKS5jb3VudCgpXG5cbiAgICB0aGlzLnNldFN0YXRlKHtjb3VudH0pXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge21vZGVsLCBtb2RlbENsYXNzLCByZWZsZWN0aW9ufSA9IHRoaXMucFxuICAgIGNvbnN0IHtjb3VudH0gPSB0aGlzLnNcblxuICAgIHJldHVybiAoXG4gICAgICA8TGluayB0bz17UGFyYW1zLndpdGhQYXJhbXMoe21vZGVsOiBkaWdnKG1vZGVsQ2xhc3MubW9kZWxDbGFzc0RhdGEoKSwgXCJuYW1lXCIpLCBtb2RlbF9pZDogbW9kZWwucHJpbWFyeUtleSgpLCBtb2RlbF9yZWZsZWN0aW9uOiByZWZsZWN0aW9uLm5hbWUoKX0pfT5cbiAgICAgICAgPFRleHQ+XG4gICAgICAgICAge21vZGVsQ2xhc3MuaHVtYW5BdHRyaWJ1dGVOYW1lKHJlZmxlY3Rpb24ubmFtZSgpKX1cbiAgICAgICAgICB7XCIgKFwifVxuICAgICAgICAgIHtjb3VudH1cbiAgICAgICAgICB7XCIpXCJ9XG4gICAgICAgIDwvVGV4dD5cbiAgICAgIDwvTGluaz5cbiAgICApXG4gIH1cbn0pKVxuIl19