import Collection from "./collection.js";
import { digg } from "diggerize";
import memo from "set-state-compare/build/memo.js";
import { useMemo } from "react";
import PropTypes from "prop-types"; // eslint-disable-line sort-imports
import propTypesExact from "prop-types-exact";
import useCollection from "./use-collection.js";
import useShape from "set-state-compare/build/use-shape.js";
function CollectionLoader({ component, ...restProps }) {
    const s = useShape(restProps);
    const useCollectionResult = useCollection(restProps);
    const cachePartsKeys = [
        "modelIdsCacheString",
        "overallCount",
        "qParams",
        "queryName",
        "queryPerKey",
        "queryQName",
        "querySName",
        "queryPageName",
        "searchParams",
        "showNoRecordsAvailableContent",
        "showNoRecordsFoundContent"
    ];
    const cacheParts = [];
    for (const cachePartsKey of cachePartsKeys) {
        cacheParts.push(digg(useCollectionResult, cachePartsKey));
    }
    s.updateMeta({ component, useCollectionResult });
    useMemo(() => {
        s.m.component.setState(s.m.useCollectionResult);
    }, cacheParts);
    return null;
}
CollectionLoader.propTypes = propTypesExact({
    abilities: PropTypes.object,
    collection: PropTypes.instanceOf(Collection),
    component: PropTypes.object.isRequired,
    defaultParams: PropTypes.object,
    groupBy: PropTypes.array,
    modelClass: PropTypes.func.isRequired,
    noRecordsAvailableContent: PropTypes.func,
    noRecordsFoundContent: PropTypes.func,
    onModelsLoaded: PropTypes.func,
    pagination: PropTypes.bool,
    preloads: PropTypes.array,
    queryMethod: PropTypes.func,
    queryName: PropTypes.string,
    ransack: PropTypes.object,
    select: PropTypes.object,
    selectColumns: PropTypes.object
});
export default memo(CollectionLoader);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sbGVjdGlvbi1sb2FkZXIuanMiLCJzb3VyY2VSb290IjoiL3NyYy8iLCJzb3VyY2VzIjpbImNvbGxlY3Rpb24tbG9hZGVyLmpzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLFVBQVUsTUFBTSxpQkFBaUIsQ0FBQTtBQUN4QyxPQUFPLEVBQUMsSUFBSSxFQUFDLE1BQU0sV0FBVyxDQUFBO0FBQzlCLE9BQU8sSUFBSSxNQUFNLGlDQUFpQyxDQUFBO0FBQ2xELE9BQU8sRUFBQyxPQUFPLEVBQUMsTUFBTSxPQUFPLENBQUE7QUFDN0IsT0FBTyxTQUFTLE1BQU0sWUFBWSxDQUFBLENBQUMsbUNBQW1DO0FBQ3RFLE9BQU8sY0FBYyxNQUFNLGtCQUFrQixDQUFBO0FBQzdDLE9BQU8sYUFBYSxNQUFNLHFCQUFxQixDQUFBO0FBQy9DLE9BQU8sUUFBUSxNQUFNLHNDQUFzQyxDQUFBO0FBRTNELFNBQVMsZ0JBQWdCLENBQUMsRUFBQyxTQUFTLEVBQUUsR0FBRyxTQUFTLEVBQUM7SUFDakQsTUFBTSxDQUFDLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFBO0lBQzdCLE1BQU0sbUJBQW1CLEdBQUcsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFBO0lBQ3BELE1BQU0sY0FBYyxHQUFHO1FBQ3JCLHFCQUFxQjtRQUNyQixjQUFjO1FBQ2QsU0FBUztRQUNULFdBQVc7UUFDWCxhQUFhO1FBQ2IsWUFBWTtRQUNaLFlBQVk7UUFDWixlQUFlO1FBQ2YsY0FBYztRQUNkLCtCQUErQjtRQUMvQiwyQkFBMkI7S0FDNUIsQ0FBQTtJQUNELE1BQU0sVUFBVSxHQUFHLEVBQUUsQ0FBQTtJQUVyQixLQUFJLE1BQU0sYUFBYSxJQUFJLGNBQWMsRUFBRSxDQUFDO1FBQzFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixFQUFFLGFBQWEsQ0FBQyxDQUFDLENBQUE7SUFDM0QsQ0FBQztJQUVELENBQUMsQ0FBQyxVQUFVLENBQUMsRUFBQyxTQUFTLEVBQUUsbUJBQW1CLEVBQUMsQ0FBQyxDQUFBO0lBRTlDLE9BQU8sQ0FBQyxHQUFHLEVBQUU7UUFDWCxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFBO0lBQ2pELENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQTtJQUVkLE9BQU8sSUFBSSxDQUFBO0FBQ2IsQ0FBQztBQUVELGdCQUFnQixDQUFDLFNBQVMsR0FBRyxjQUFjLENBQUM7SUFDMUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxNQUFNO0lBQzNCLFVBQVUsRUFBRSxTQUFTLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQztJQUM1QyxTQUFTLEVBQUUsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVO0lBQ3RDLGFBQWEsRUFBRSxTQUFTLENBQUMsTUFBTTtJQUMvQixPQUFPLEVBQUUsU0FBUyxDQUFDLEtBQUs7SUFDeEIsVUFBVSxFQUFFLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVTtJQUNyQyx5QkFBeUIsRUFBRSxTQUFTLENBQUMsSUFBSTtJQUN6QyxxQkFBcUIsRUFBRSxTQUFTLENBQUMsSUFBSTtJQUNyQyxjQUFjLEVBQUUsU0FBUyxDQUFDLElBQUk7SUFDOUIsVUFBVSxFQUFFLFNBQVMsQ0FBQyxJQUFJO0lBQzFCLFFBQVEsRUFBRSxTQUFTLENBQUMsS0FBSztJQUN6QixXQUFXLEVBQUUsU0FBUyxDQUFDLElBQUk7SUFDM0IsU0FBUyxFQUFFLFNBQVMsQ0FBQyxNQUFNO0lBQzNCLE9BQU8sRUFBRSxTQUFTLENBQUMsTUFBTTtJQUN6QixNQUFNLEVBQUUsU0FBUyxDQUFDLE1BQU07SUFDeEIsYUFBYSxFQUFFLFNBQVMsQ0FBQyxNQUFNO0NBQ2hDLENBQUMsQ0FBQTtBQUVGLGVBQWUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ29sbGVjdGlvbiBmcm9tIFwiLi9jb2xsZWN0aW9uLmpzXCJcbmltcG9ydCB7ZGlnZ30gZnJvbSBcImRpZ2dlcml6ZVwiXG5pbXBvcnQgbWVtbyBmcm9tIFwic2V0LXN0YXRlLWNvbXBhcmUvYnVpbGQvbWVtby5qc1wiXG5pbXBvcnQge3VzZU1lbW99IGZyb20gXCJyZWFjdFwiXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCIgLy8gZXNsaW50LWRpc2FibGUtbGluZSBzb3J0LWltcG9ydHNcbmltcG9ydCBwcm9wVHlwZXNFeGFjdCBmcm9tIFwicHJvcC10eXBlcy1leGFjdFwiXG5pbXBvcnQgdXNlQ29sbGVjdGlvbiBmcm9tIFwiLi91c2UtY29sbGVjdGlvbi5qc1wiXG5pbXBvcnQgdXNlU2hhcGUgZnJvbSBcInNldC1zdGF0ZS1jb21wYXJlL2J1aWxkL3VzZS1zaGFwZS5qc1wiXG5cbmZ1bmN0aW9uIENvbGxlY3Rpb25Mb2FkZXIoe2NvbXBvbmVudCwgLi4ucmVzdFByb3BzfSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGZ1bmMtc3R5bGVcbiAgY29uc3QgcyA9IHVzZVNoYXBlKHJlc3RQcm9wcylcbiAgY29uc3QgdXNlQ29sbGVjdGlvblJlc3VsdCA9IHVzZUNvbGxlY3Rpb24ocmVzdFByb3BzKVxuICBjb25zdCBjYWNoZVBhcnRzS2V5cyA9IFtcbiAgICBcIm1vZGVsSWRzQ2FjaGVTdHJpbmdcIixcbiAgICBcIm92ZXJhbGxDb3VudFwiLFxuICAgIFwicVBhcmFtc1wiLFxuICAgIFwicXVlcnlOYW1lXCIsXG4gICAgXCJxdWVyeVBlcktleVwiLFxuICAgIFwicXVlcnlRTmFtZVwiLFxuICAgIFwicXVlcnlTTmFtZVwiLFxuICAgIFwicXVlcnlQYWdlTmFtZVwiLFxuICAgIFwic2VhcmNoUGFyYW1zXCIsXG4gICAgXCJzaG93Tm9SZWNvcmRzQXZhaWxhYmxlQ29udGVudFwiLFxuICAgIFwic2hvd05vUmVjb3Jkc0ZvdW5kQ29udGVudFwiXG4gIF1cbiAgY29uc3QgY2FjaGVQYXJ0cyA9IFtdXG5cbiAgZm9yKGNvbnN0IGNhY2hlUGFydHNLZXkgb2YgY2FjaGVQYXJ0c0tleXMpIHtcbiAgICBjYWNoZVBhcnRzLnB1c2goZGlnZyh1c2VDb2xsZWN0aW9uUmVzdWx0LCBjYWNoZVBhcnRzS2V5KSlcbiAgfVxuXG4gIHMudXBkYXRlTWV0YSh7Y29tcG9uZW50LCB1c2VDb2xsZWN0aW9uUmVzdWx0fSlcblxuICB1c2VNZW1vKCgpID0+IHtcbiAgICBzLm0uY29tcG9uZW50LnNldFN0YXRlKHMubS51c2VDb2xsZWN0aW9uUmVzdWx0KVxuICB9LCBjYWNoZVBhcnRzKVxuXG4gIHJldHVybiBudWxsXG59XG5cbkNvbGxlY3Rpb25Mb2FkZXIucHJvcFR5cGVzID0gcHJvcFR5cGVzRXhhY3Qoe1xuICBhYmlsaXRpZXM6IFByb3BUeXBlcy5vYmplY3QsXG4gIGNvbGxlY3Rpb246IFByb3BUeXBlcy5pbnN0YW5jZU9mKENvbGxlY3Rpb24pLFxuICBjb21wb25lbnQ6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgZGVmYXVsdFBhcmFtczogUHJvcFR5cGVzLm9iamVjdCxcbiAgZ3JvdXBCeTogUHJvcFR5cGVzLmFycmF5LFxuICBtb2RlbENsYXNzOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBub1JlY29yZHNBdmFpbGFibGVDb250ZW50OiBQcm9wVHlwZXMuZnVuYyxcbiAgbm9SZWNvcmRzRm91bmRDb250ZW50OiBQcm9wVHlwZXMuZnVuYyxcbiAgb25Nb2RlbHNMb2FkZWQ6IFByb3BUeXBlcy5mdW5jLFxuICBwYWdpbmF0aW9uOiBQcm9wVHlwZXMuYm9vbCxcbiAgcHJlbG9hZHM6IFByb3BUeXBlcy5hcnJheSxcbiAgcXVlcnlNZXRob2Q6IFByb3BUeXBlcy5mdW5jLFxuICBxdWVyeU5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHJhbnNhY2s6IFByb3BUeXBlcy5vYmplY3QsXG4gIHNlbGVjdDogUHJvcFR5cGVzLm9iamVjdCxcbiAgc2VsZWN0Q29sdW1uczogUHJvcFR5cGVzLm9iamVjdFxufSlcblxuZXhwb3J0IGRlZmF1bHQgbWVtbyhDb2xsZWN0aW9uTG9hZGVyKVxuIl19