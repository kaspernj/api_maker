import events from "./events.js";
import { useCallback } from "react";
import useEventEmitter from "ya-use-event-emitter";
import useShape from "set-state-compare/build/use-shape.js";
/**
 * @param {Function} callback
 * @returns {object}
 */
const useValidationErrors = (callback) => {
    const s = useShape({ callback });
    s.useStates({ validationErrors: [] });
    const onValidationErrors = useCallback((validationErrors) => {
        const matchedValidationErrors = [];
        for (const validationError of validationErrors.getValidationErrors()) {
            if (s.p.callback(validationError)) {
                validationError.setHandled();
                matchedValidationErrors.push(validationError);
            }
        }
        s.set({
            validationErrors: matchedValidationErrors
        });
    }, []);
    useEventEmitter(events, "onValidationErrors", onValidationErrors);
    return {
        validationErrors: s.s.validationErrors
    };
};
export default useValidationErrors;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlLXZhbGlkYXRpb24tZXJyb3JzLmpzIiwic291cmNlUm9vdCI6Ii9zcmMvIiwic291cmNlcyI6WyJ1c2UtdmFsaWRhdGlvbi1lcnJvcnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxNQUFNLE1BQU0sYUFBYSxDQUFBO0FBQ2hDLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxPQUFPLENBQUE7QUFDakMsT0FBTyxlQUFlLE1BQU0sc0JBQXNCLENBQUE7QUFDbEQsT0FBTyxRQUFRLE1BQU0sc0NBQXNDLENBQUE7QUFFM0Q7OztHQUdHO0FBQ0gsTUFBTSxtQkFBbUIsR0FBRyxDQUFDLFFBQVEsRUFBRSxFQUFFO0lBQ3ZDLE1BQU0sQ0FBQyxHQUFHLFFBQVEsQ0FBQyxFQUFDLFFBQVEsRUFBQyxDQUFDLENBQUE7SUFFOUIsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxFQUFDLGdCQUFnQixFQUFFLEVBQUUsRUFBQyxDQUFDLENBQUE7SUFFbkMsTUFBTSxrQkFBa0IsR0FBRyxXQUFXLENBQUMsQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFO1FBQzFELE1BQU0sdUJBQXVCLEdBQUcsRUFBRSxDQUFBO1FBRWxDLEtBQUssTUFBTSxlQUFlLElBQUksZ0JBQWdCLENBQUMsbUJBQW1CLEVBQUUsRUFBRSxDQUFDO1lBQ3JFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQztnQkFDbEMsZUFBZSxDQUFDLFVBQVUsRUFBRSxDQUFBO2dCQUM1Qix1QkFBdUIsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUE7WUFDL0MsQ0FBQztRQUNILENBQUM7UUFFRCxDQUFDLENBQUMsR0FBRyxDQUFDO1lBQ0osZ0JBQWdCLEVBQUUsdUJBQXVCO1NBQzFDLENBQUMsQ0FBQTtJQUNKLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQTtJQUVOLGVBQWUsQ0FBQyxNQUFNLEVBQUUsb0JBQW9CLEVBQUUsa0JBQWtCLENBQUMsQ0FBQTtJQUVqRSxPQUFPO1FBQ0wsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxnQkFBZ0I7S0FDdkMsQ0FBQTtBQUNILENBQUMsQ0FBQTtBQUVELGVBQWUsbUJBQW1CLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXZlbnRzIGZyb20gXCIuL2V2ZW50cy5qc1wiXG5pbXBvcnQge3VzZUNhbGxiYWNrfSBmcm9tIFwicmVhY3RcIlxuaW1wb3J0IHVzZUV2ZW50RW1pdHRlciBmcm9tIFwieWEtdXNlLWV2ZW50LWVtaXR0ZXJcIlxuaW1wb3J0IHVzZVNoYXBlIGZyb20gXCJzZXQtc3RhdGUtY29tcGFyZS9idWlsZC91c2Utc2hhcGUuanNcIlxuXG4vKipcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJucyB7b2JqZWN0fVxuICovXG5jb25zdCB1c2VWYWxpZGF0aW9uRXJyb3JzID0gKGNhbGxiYWNrKSA9PiB7XG4gIGNvbnN0IHMgPSB1c2VTaGFwZSh7Y2FsbGJhY2t9KVxuXG4gIHMudXNlU3RhdGVzKHt2YWxpZGF0aW9uRXJyb3JzOiBbXX0pXG5cbiAgY29uc3Qgb25WYWxpZGF0aW9uRXJyb3JzID0gdXNlQ2FsbGJhY2soKHZhbGlkYXRpb25FcnJvcnMpID0+IHtcbiAgICBjb25zdCBtYXRjaGVkVmFsaWRhdGlvbkVycm9ycyA9IFtdXG5cbiAgICBmb3IgKGNvbnN0IHZhbGlkYXRpb25FcnJvciBvZiB2YWxpZGF0aW9uRXJyb3JzLmdldFZhbGlkYXRpb25FcnJvcnMoKSkge1xuICAgICAgaWYgKHMucC5jYWxsYmFjayh2YWxpZGF0aW9uRXJyb3IpKSB7XG4gICAgICAgIHZhbGlkYXRpb25FcnJvci5zZXRIYW5kbGVkKClcbiAgICAgICAgbWF0Y2hlZFZhbGlkYXRpb25FcnJvcnMucHVzaCh2YWxpZGF0aW9uRXJyb3IpXG4gICAgICB9XG4gICAgfVxuXG4gICAgcy5zZXQoe1xuICAgICAgdmFsaWRhdGlvbkVycm9yczogbWF0Y2hlZFZhbGlkYXRpb25FcnJvcnNcbiAgICB9KVxuICB9LCBbXSlcblxuICB1c2VFdmVudEVtaXR0ZXIoZXZlbnRzLCBcIm9uVmFsaWRhdGlvbkVycm9yc1wiLCBvblZhbGlkYXRpb25FcnJvcnMpXG5cbiAgcmV0dXJuIHtcbiAgICB2YWxpZGF0aW9uRXJyb3JzOiBzLnMudmFsaWRhdGlvbkVycm9yc1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHVzZVZhbGlkYXRpb25FcnJvcnNcbiJdfQ==