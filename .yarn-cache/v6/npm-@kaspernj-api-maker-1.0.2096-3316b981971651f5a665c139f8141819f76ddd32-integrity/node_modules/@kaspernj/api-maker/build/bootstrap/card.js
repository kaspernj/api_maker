import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import React, { useRef } from "react";
import { digg, digs } from "diggerize";
import { shapeComponent } from "set-state-compare/build/shape-component.js";
import BaseComponent from "../base-component"; // eslint-disable-line sort-imports
import PropTypes from "prop-types";
import classNames from "classnames"; // eslint-disable-line import/no-unresolved
import memo from "set-state-compare/build/memo.js";
export default memo(shapeComponent(class ApiMakerBootstrapCard extends BaseComponent {
    static defaultProps = {
        defaultExpanded: true,
        expandable: false,
        expandableHide: false,
        responsiveTable: true,
        table: false
    };
    static propTypes = {
        cardRef: PropTypes.object,
        children: PropTypes.any,
        className: PropTypes.string,
        controls: PropTypes.any,
        defaultExpanded: PropTypes.bool.isRequired,
        expandable: PropTypes.bool.isRequired,
        expandableHide: PropTypes.bool.isRequired,
        footer: PropTypes.any,
        header: PropTypes.any,
        responsiveTable: PropTypes.bool.isRequired,
        striped: PropTypes.bool,
        table: PropTypes.bool.isRequired
    };
    setup() {
        this.cardRef = useRef();
        this.useStates({
            expanded: this.props.defaultExpanded
        });
    }
    render() {
        const { cardRef, children, className, controls, defaultExpanded, expandable, expandableHide, footer, header, responsiveTable, striped, table, ...restProps } = this.props;
        const { expanded } = digs(this.state, "expanded");
        const cardHeaderStyle = { display: "flex" };
        const cardRefToUse = cardRef || this.cardRef;
        if (!expanded)
            cardHeaderStyle.borderBottom = "0";
        return (_jsxs("div", { className: classNames("component-bootstrap-card", "card", "card-default", className), "data-has-footer": Boolean(footer), ref: cardRefToUse, ...restProps, children: [(controls || expandable || header) &&
                    _jsxs("div", { className: "card-header", style: cardHeaderStyle, children: [_jsx("div", { className: "card-header-label", style: { alignSelf: "center", marginRight: "auto" }, children: header }), (controls || expandable) &&
                                _jsxs("div", { className: "card-header-actions", style: { alignSelf: "center" }, children: [controls, expandable && expanded &&
                                            _jsx("a", { className: "collapse-card-button text-muted", href: "#", onClick: digg(this, "onCollapseClicked"), children: _jsx("i", { className: "fa fa-angle-up" }) }), expandable && !expanded &&
                                            _jsx("a", { className: "expand-card-button text-muted", href: "#", onClick: digg(this, "onExpandClicked"), children: _jsx("i", { className: "fa fa-angle-down" }) })] })] }), (expanded || expandableHide) &&
                    _jsxs("div", { className: this.bodyClassNames(), children: [table &&
                                _jsx("table", { className: this.tableClassNames(), children: children }), !table && children] }), footer &&
                    _jsx("div", { className: "card-footer", children: footer })] }));
    }
    bodyClassNames() {
        const { expandableHide, responsiveTable, table } = digs(this.props, "expandableHide", "responsiveTable", "table");
        const { expanded } = digs(this.state, "expanded");
        const classNames = ["card-body"];
        if (!expanded && expandableHide) {
            classNames.push("d-none");
        }
        if (table) {
            if (responsiveTable) {
                classNames.push("table-responsive");
            }
            classNames.push("p-0");
        }
        return classNames.join(" ");
    }
    onCollapseClicked = (e) => {
        e.preventDefault();
        this.setState({ expanded: false });
    };
    onExpandClicked = (e) => {
        e.preventDefault();
        this.setState({ expanded: true });
    };
    tableClassNames() {
        const classNames = ["table", "table-hover", "mb-0", "w-100"];
        if (this.props.striped)
            classNames.push("table-striped");
        return classNames.join(" ");
    }
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FyZC5qcyIsInNvdXJjZVJvb3QiOiIvc3JjLyIsInNvdXJjZXMiOlsiYm9vdHN0cmFwL2NhcmQuanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEtBQUssRUFBRSxFQUFDLE1BQU0sRUFBQyxNQUFNLE9BQU8sQ0FBQTtBQUNuQyxPQUFPLEVBQUMsSUFBSSxFQUFFLElBQUksRUFBQyxNQUFNLFdBQVcsQ0FBQTtBQUNwQyxPQUFPLEVBQUMsY0FBYyxFQUFDLE1BQU0sNENBQTRDLENBQUE7QUFDekUsT0FBTyxhQUFhLE1BQU0sbUJBQW1CLENBQUEsQ0FBQyxtQ0FBbUM7QUFDakYsT0FBTyxTQUFTLE1BQU0sWUFBWSxDQUFBO0FBQ2xDLE9BQU8sVUFBVSxNQUFNLFlBQVksQ0FBQSxDQUFDLDJDQUEyQztBQUMvRSxPQUFPLElBQUksTUFBTSxpQ0FBaUMsQ0FBQTtBQUVsRCxlQUFlLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxxQkFBc0IsU0FBUSxhQUFhO0lBQ2xGLE1BQU0sQ0FBQyxZQUFZLEdBQUc7UUFDcEIsZUFBZSxFQUFFLElBQUk7UUFDckIsVUFBVSxFQUFFLEtBQUs7UUFDakIsY0FBYyxFQUFFLEtBQUs7UUFDckIsZUFBZSxFQUFFLElBQUk7UUFDckIsS0FBSyxFQUFFLEtBQUs7S0FDYixDQUFBO0lBRUQsTUFBTSxDQUFDLFNBQVMsR0FBRztRQUNqQixPQUFPLEVBQUUsU0FBUyxDQUFDLE1BQU07UUFDekIsUUFBUSxFQUFFLFNBQVMsQ0FBQyxHQUFHO1FBQ3ZCLFNBQVMsRUFBRSxTQUFTLENBQUMsTUFBTTtRQUMzQixRQUFRLEVBQUUsU0FBUyxDQUFDLEdBQUc7UUFDdkIsZUFBZSxFQUFFLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVTtRQUMxQyxVQUFVLEVBQUUsU0FBUyxDQUFDLElBQUksQ0FBQyxVQUFVO1FBQ3JDLGNBQWMsRUFBRSxTQUFTLENBQUMsSUFBSSxDQUFDLFVBQVU7UUFDekMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxHQUFH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QyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUE7UUFFbEMsT0FBTyxVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQzdCLENBQUM7Q0FDRixDQUFDLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwge3VzZVJlZn0gZnJvbSBcInJlYWN0XCJcbmltcG9ydCB7ZGlnZywgZGlnc30gZnJvbSBcImRpZ2dlcml6ZVwiXG5pbXBvcnQge3NoYXBlQ29tcG9uZW50fSBmcm9tIFwic2V0LXN0YXRlLWNvbXBhcmUvYnVpbGQvc2hhcGUtY29tcG9uZW50LmpzXCJcbmltcG9ydCBCYXNlQ29tcG9uZW50IGZyb20gXCIuLi9iYXNlLWNvbXBvbmVudFwiIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgc29ydC1pbXBvcnRzXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCJcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gXCJjbGFzc25hbWVzXCIgLy8gZXNsaW50LWRpc2FibGUtbGluZSBpbXBvcnQvbm8tdW5yZXNvbHZlZFxuaW1wb3J0IG1lbW8gZnJvbSBcInNldC1zdGF0ZS1jb21wYXJlL2J1aWxkL21lbW8uanNcIlxuXG5leHBvcnQgZGVmYXVsdCBtZW1vKHNoYXBlQ29tcG9uZW50KGNsYXNzIEFwaU1ha2VyQm9vdHN0cmFwQ2FyZCBleHRlbmRzIEJhc2VDb21wb25lbnQge1xuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIGRlZmF1bHRFeHBhbmRlZDogdHJ1ZSxcbiAgICBleHBhbmRhYmxlOiBmYWxzZSxcbiAgICBleHBhbmRhYmxlSGlkZTogZmFsc2UsXG4gICAgcmVzcG9uc2l2ZVRhYmxlOiB0cnVlLFxuICAgIHRhYmxlOiBmYWxzZVxuICB9XG5cbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBjYXJkUmVmOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIGNoaWxkcmVuOiBQcm9wVHlwZXMuYW55LFxuICAgIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBjb250cm9sczogUHJvcFR5cGVzLmFueSxcbiAgICBkZWZhdWx0RXhwYW5kZWQ6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gICAgZXhwYW5kYWJsZTogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICBleHBhbmRhYmxlSGlkZTogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICBmb290ZXI6IFByb3BUeXBlcy5hbnksXG4gICAgaGVhZGVyOiBQcm9wVHlwZXMuYW55LFxuICAgIHJlc3BvbnNpdmVUYWJsZTogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICBzdHJpcGVkOiBQcm9wVHlwZXMuYm9vbCxcbiAgICB0YWJsZTogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZFxuICB9XG5cbiAgc2V0dXAoKSB7XG4gICAgdGhpcy5jYXJkUmVmID0gdXNlUmVmKClcblxuICAgIHRoaXMudXNlU3RhdGVzKHtcbiAgICAgIGV4cGFuZGVkOiB0aGlzLnByb3BzLmRlZmF1bHRFeHBhbmRlZFxuICAgIH0pXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGNhcmRSZWYsXG4gICAgICBjaGlsZHJlbixcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIGNvbnRyb2xzLFxuICAgICAgZGVmYXVsdEV4cGFuZGVkLFxuICAgICAgZXhwYW5kYWJsZSxcbiAgICAgIGV4cGFuZGFibGVIaWRlLFxuICAgICAgZm9vdGVyLFxuICAgICAgaGVhZGVyLFxuICAgICAgcmVzcG9uc2l2ZVRhYmxlLFxuICAgICAgc3RyaXBlZCxcbiAgICAgIHRhYmxlLFxuICAgICAgLi4ucmVzdFByb3BzXG4gICAgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB7ZXhwYW5kZWR9ID0gZGlncyh0aGlzLnN0YXRlLCBcImV4cGFuZGVkXCIpXG4gICAgY29uc3QgY2FyZEhlYWRlclN0eWxlID0ge2Rpc3BsYXk6IFwiZmxleFwifVxuICAgIGNvbnN0IGNhcmRSZWZUb1VzZSA9IGNhcmRSZWYgfHwgdGhpcy5jYXJkUmVmXG5cbiAgICBpZiAoIWV4cGFuZGVkKSBjYXJkSGVhZGVyU3R5bGUuYm9yZGVyQm90dG9tID0gXCIwXCJcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyhcImNvbXBvbmVudC1ib290c3RyYXAtY2FyZFwiLCBcImNhcmRcIiwgXCJjYXJkLWRlZmF1bHRcIiwgY2xhc3NOYW1lKX1cbiAgICAgICAgZGF0YS1oYXMtZm9vdGVyPXtCb29sZWFuKGZvb3Rlcil9XG4gICAgICAgIHJlZj17Y2FyZFJlZlRvVXNlfVxuICAgICAgICB7Li4ucmVzdFByb3BzfVxuICAgICAgPlxuICAgICAgICB7KGNvbnRyb2xzIHx8IGV4cGFuZGFibGUgfHwgaGVhZGVyKSAmJlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1oZWFkZXJcIiBzdHlsZT17Y2FyZEhlYWRlclN0eWxlfT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1oZWFkZXItbGFiZWxcIiBzdHlsZT17e2FsaWduU2VsZjogXCJjZW50ZXJcIiwgbWFyZ2luUmlnaHQ6IFwiYXV0b1wifX0+XG4gICAgICAgICAgICAgIHtoZWFkZXJ9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHsoY29udHJvbHMgfHwgZXhwYW5kYWJsZSkgJiZcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWhlYWRlci1hY3Rpb25zXCIgc3R5bGU9e3thbGlnblNlbGY6IFwiY2VudGVyXCJ9fT5cbiAgICAgICAgICAgICAgICB7Y29udHJvbHN9XG4gICAgICAgICAgICAgICAge2V4cGFuZGFibGUgJiYgZXhwYW5kZWQgJiZcbiAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cImNvbGxhcHNlLWNhcmQtYnV0dG9uIHRleHQtbXV0ZWRcIiBocmVmPVwiI1wiIG9uQ2xpY2s9e2RpZ2codGhpcywgXCJvbkNvbGxhcHNlQ2xpY2tlZFwiKX0+XG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWFuZ2xlLXVwXCIgLz5cbiAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAge2V4cGFuZGFibGUgJiYgIWV4cGFuZGVkICYmXG4gICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJleHBhbmQtY2FyZC1idXR0b24gdGV4dC1tdXRlZFwiIGhyZWY9XCIjXCIgb25DbGljaz17ZGlnZyh0aGlzLCBcIm9uRXhwYW5kQ2xpY2tlZFwiKX0+XG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWFuZ2xlLWRvd25cIiAvPlxuICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgeyhleHBhbmRlZCB8fCBleHBhbmRhYmxlSGlkZSkgJiZcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17dGhpcy5ib2R5Q2xhc3NOYW1lcygpfT5cbiAgICAgICAgICAgIHt0YWJsZSAmJlxuICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPXt0aGlzLnRhYmxlQ2xhc3NOYW1lcygpfT5cbiAgICAgICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB7IXRhYmxlICYmIGNoaWxkcmVufVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAgIHtmb290ZXIgJiZcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtZm9vdGVyXCI+XG4gICAgICAgICAgICB7Zm9vdGVyfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cblxuICBib2R5Q2xhc3NOYW1lcyAoKSB7XG4gICAgY29uc3Qge2V4cGFuZGFibGVIaWRlLCByZXNwb25zaXZlVGFibGUsIHRhYmxlfSA9IGRpZ3ModGhpcy5wcm9wcywgXCJleHBhbmRhYmxlSGlkZVwiLCBcInJlc3BvbnNpdmVUYWJsZVwiLCBcInRhYmxlXCIpXG4gICAgY29uc3Qge2V4cGFuZGVkfSA9IGRpZ3ModGhpcy5zdGF0ZSwgXCJleHBhbmRlZFwiKVxuICAgIGNvbnN0IGNsYXNzTmFtZXMgPSBbXCJjYXJkLWJvZHlcIl1cblxuICAgIGlmICghZXhwYW5kZWQgJiYgZXhwYW5kYWJsZUhpZGUpIHtcbiAgICAgIGNsYXNzTmFtZXMucHVzaChcImQtbm9uZVwiKVxuICAgIH1cblxuICAgIGlmICh0YWJsZSkge1xuICAgICAgaWYgKHJlc3BvbnNpdmVUYWJsZSkge1xuICAgICAgICBjbGFzc05hbWVzLnB1c2goXCJ0YWJsZS1yZXNwb25zaXZlXCIpXG4gICAgICB9XG5cbiAgICAgIGNsYXNzTmFtZXMucHVzaChcInAtMFwiKVxuICAgIH1cblxuICAgIHJldHVybiBjbGFzc05hbWVzLmpvaW4oXCIgXCIpXG4gIH1cblxuICBvbkNvbGxhcHNlQ2xpY2tlZCA9IChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdGhpcy5zZXRTdGF0ZSh7ZXhwYW5kZWQ6IGZhbHNlfSlcbiAgfVxuXG4gIG9uRXhwYW5kQ2xpY2tlZCA9IChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdGhpcy5zZXRTdGF0ZSh7ZXhwYW5kZWQ6IHRydWV9KVxuICB9XG5cbiAgdGFibGVDbGFzc05hbWVzICgpIHtcbiAgICBjb25zdCBjbGFzc05hbWVzID0gW1widGFibGVcIiwgXCJ0YWJsZS1ob3ZlclwiLCBcIm1iLTBcIiwgXCJ3LTEwMFwiXVxuXG4gICAgaWYgKHRoaXMucHJvcHMuc3RyaXBlZClcbiAgICAgIGNsYXNzTmFtZXMucHVzaChcInRhYmxlLXN0cmlwZWRcIilcblxuICAgIHJldHVybiBjbGFzc05hbWVzLmpvaW4oXCIgXCIpXG4gIH1cbn0pKVxuIl19