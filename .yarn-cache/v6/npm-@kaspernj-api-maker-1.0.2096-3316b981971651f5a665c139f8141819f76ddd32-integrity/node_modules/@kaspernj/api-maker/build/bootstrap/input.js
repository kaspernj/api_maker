import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { Input } from "../inputs/input";
import { ShapeComponent, shapeComponent } from "set-state-compare/build/shape-component.js"; // eslint-disable-line sort-imports
import { digs } from "diggerize";
import InvalidFeedback from "./invalid-feedback"; // eslint-disable-line sort-imports
import Money from "../inputs/money";
import PropTypes from "prop-types";
import React from "react";
import inputWrapper from "../inputs/input-wrapper";
import memo from "set-state-compare/build/memo.js";
const ApiMakerBootstrapInput = memo(shapeComponent(class ApiMakerBootstrapInput extends ShapeComponent {
    static propTypes = {
        append: PropTypes.any,
        appendText: PropTypes.any,
        attribute: PropTypes.string,
        className: PropTypes.string,
        currenciesCollection: PropTypes.array,
        currencyName: PropTypes.string,
        hint: PropTypes.any,
        hintBottom: PropTypes.any,
        id: PropTypes.string,
        label: PropTypes.any,
        labelClassName: PropTypes.string,
        model: PropTypes.object,
        name: PropTypes.string,
        placeholder: PropTypes.any,
        prepend: PropTypes.any,
        prependText: PropTypes.any,
        small: PropTypes.bool,
        type: PropTypes.string,
        wrapperClassName: PropTypes.string
    };
    render() {
        const { append, appendText, attribute, className, currenciesCollection, currencyName, hint, hintBottom, id, inputClassName, inputProps, inputRef, label, labelClassName, model, name, prepend, prependText, type, wrapperClassName, wrapperOpts, ...restProps } = this.props;
        const { ref, ...forwardedInputProps } = inputProps;
        const { errors } = digs(wrapperOpts, "errors");
        return (_jsxs("div", { className: this.wrapperClassName(), ref: this.props.wrapperRef, children: [wrapperOpts.label &&
                    _jsx("label", { className: this.labelClassName(), htmlFor: inputProps.id, children: wrapperOpts.label }), hint &&
                    _jsx("span", { className: "form-text text-muted font-smoothing font-xs", children: hint }), type == "money" &&
                    _jsx(Money, { className: this.inputClassName(), name: inputProps.name, ref: this.props.moneyRef, ...this.moneyProps() }), type != "money" &&
                    _jsxs("div", { className: "input-group", children: [(prepend || prependText) &&
                                _jsxs("div", { className: "input-group-prepend", children: [prependText &&
                                            _jsx("span", { className: "input-group-text", children: prependText }), prepend] }), _jsx(Input, { attribute: attribute, className: this.inputClassName(), inputProps: inputProps, model: model, wrapperOpts: wrapperOpts, ...forwardedInputProps, ...restProps }), (append || appendText) &&
                                _jsxs("div", { className: "input-group-append", children: [appendText &&
                                            _jsx("span", { className: "input-group-text", children: appendText }), append] }), errors.length > 0 && _jsx(InvalidFeedback, { errors: errors })] }), hintBottom &&
                    _jsx("span", { className: "form-text text-muted font-smoothing font-xs", children: hintBottom })] }));
    }
    inputClassName() {
        const classNames = ["form-control"];
        if (this.props.className)
            classNames.push(this.props.className);
        if (this.props.wrapperOpts.errors.length > 0)
            classNames.push("is-invalid");
        return classNames.join(" ");
    }
    labelClassName() {
        const classNames = [];
        if (this.props.labelClassName)
            classNames.push(this.props.labelClassName);
        return classNames.join(" ");
    }
    moneyProps() {
        const moneyProps = {};
        const forwardedProps = ["attribute", "currenciesCollection", "currencyName", "model", "onChange", "placeholder", "small"];
        for (const forwardedProp of forwardedProps) {
            if (forwardedProp in this.props)
                moneyProps[forwardedProp] = this.props[forwardedProp];
        }
        const forwardedInputProps = ["defaultValue"];
        for (const forwardedInputProp of forwardedInputProps) {
            if (forwardedInputProp in this.props.inputProps)
                moneyProps[forwardedInputProp] = this.props.inputProps[forwardedInputProp];
        }
        return moneyProps;
    }
    wrapperClassName() {
        const classNames = ["form-group", "component-bootstrap-string-input"];
        if (this.props.wrapperClassName)
            classNames.push(this.props.wrapperClassName);
        return classNames.join(" ");
    }
}));
export default inputWrapper(ApiMakerBootstrapInput);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQuanMiLCJzb3VyY2VSb290IjoiL3NyYy8iLCJzb3VyY2VzIjpbImJvb3RzdHJhcC9pbnB1dC5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBQyxLQUFLLEVBQUMsTUFBTSxpQkFBaUIsQ0FBQTtBQUNyQyxPQUFPLEVBQUMsY0FBYyxFQUFFLGNBQWMsRUFBQyxNQUFNLDRDQUE0QyxDQUFBLENBQUMsbUNBQW1DO0FBQzdILE9BQU8sRUFBQyxJQUFJLEVBQUMsTUFBTSxXQUFXLENBQUE7QUFDOUIsT0FBTyxlQUFlLE1BQU0sb0JBQW9CLENBQUEsQ0FBQyxtQ0FBbUM7QUFDcEYsT0FBTyxLQUFLLE1BQU0saUJBQWlCLENBQUE7QUFDbkMsT0FBTyxTQUFTLE1BQU0sWUFBWSxDQUFBO0FBQ2xDLE9BQU8sS0FBSyxNQUFNLE9BQU8sQ0FBQTtBQUN6QixPQUFPLFlBQVksTUFBTSx5QkFBeUIsQ0FBQTtBQUNsRCxPQUFPLElBQUksTUFBTSxpQ0FBaUMsQ0FBQTtBQUVsRCxNQUFNLHNCQUFzQixHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxzQkFBdUIsU0FBUSxjQUFjO0lBQ3BHLE1BQU0sQ0FBQyxTQUFTLEdBQUc7UUFDakIsTUFBTSxFQUFFLFNBQVMsQ0FBQyxHQUFHO1FBQ3JCLFVBQVUsRUFBRSxTQUFTLENBQUMsR0FBRztRQUN6QixTQUFTLEVBQUUsU0FBUyxDQUFDLE1BQU07UUFDM0IsU0FBUyxFQUFFLFNBQVMsQ0FBQyxNQUFNO1FBQzNCLG9CQUFvQixFQUFFLFNBQVMsQ0FBQyxLQUFLO1FBQ3JDLFlBQVksRUFBRSxTQUFTLENBQUMsTUFBTTtRQUM5QixJQUFJLEVBQUUsU0FBUyxDQUFDLEdBQUc7UUFDbkIsVUFBVSxFQUFFLFNBQVMsQ0FBQyxHQUFHO1FBQ3pCLEVBQUUsRUFBRSxTQUFTLENBQUMsTUFBTTtRQUNwQixLQUFLLEVBQUUsU0FBUyxDQUFDLEdBQUc7UUFDcEIsY0FBYyxFQUFFLFNBQVMsQ0FBQyxNQUFNO1FB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SSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsa0JBQWtCLENBQUMsQ0FBQTtRQUM3SCxDQUFDO1FBRUQsT0FBTyxVQUFVLENBQUE7SUFDbkIsQ0FBQztJQUVELGdCQUFnQjtRQUNkLE1BQU0sVUFBVSxHQUFHLENBQUMsWUFBWSxFQUFFLGtDQUFrQyxDQUFDLENBQUE7UUFFckUsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQjtZQUM3QixVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQTtRQUU5QyxPQUFPLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDN0IsQ0FBQztDQUNGLENBQUMsQ0FBQyxDQUFBO0FBRUgsZUFBZSxZQUFZLENBQUMsc0JBQXNCLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SW5wdXR9IGZyb20gXCIuLi9pbnB1dHMvaW5wdXRcIlxuaW1wb3J0IHtTaGFwZUNvbXBvbmVudCwgc2hhcGVDb21wb25lbnR9IGZyb20gXCJzZXQtc3RhdGUtY29tcGFyZS9idWlsZC9zaGFwZS1jb21wb25lbnQuanNcIiAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHNvcnQtaW1wb3J0c1xuaW1wb3J0IHtkaWdzfSBmcm9tIFwiZGlnZ2VyaXplXCJcbmltcG9ydCBJbnZhbGlkRmVlZGJhY2sgZnJvbSBcIi4vaW52YWxpZC1mZWVkYmFja1wiIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgc29ydC1pbXBvcnRzXG5pbXBvcnQgTW9uZXkgZnJvbSBcIi4uL2lucHV0cy9tb25leVwiXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCJcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIlxuaW1wb3J0IGlucHV0V3JhcHBlciBmcm9tIFwiLi4vaW5wdXRzL2lucHV0LXdyYXBwZXJcIlxuaW1wb3J0IG1lbW8gZnJvbSBcInNldC1zdGF0ZS1jb21wYXJlL2J1aWxkL21lbW8uanNcIlxuXG5jb25zdCBBcGlNYWtlckJvb3RzdHJhcElucHV0ID0gbWVtbyhzaGFwZUNvbXBvbmVudChjbGFzcyBBcGlNYWtlckJvb3RzdHJhcElucHV0IGV4dGVuZHMgU2hhcGVDb21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIGFwcGVuZDogUHJvcFR5cGVzLmFueSxcbiAgICBhcHBlbmRUZXh0OiBQcm9wVHlwZXMuYW55LFxuICAgIGF0dHJpYnV0ZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgY3VycmVuY2llc0NvbGxlY3Rpb246IFByb3BUeXBlcy5hcnJheSxcbiAgICBjdXJyZW5jeU5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgaGludDogUHJvcFR5cGVzLmFueSxcbiAgICBoaW50Qm90dG9tOiBQcm9wVHlwZXMuYW55LFxuICAgIGlkOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGxhYmVsOiBQcm9wVHlwZXMuYW55LFxuICAgIGxhYmVsQ2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIG1vZGVsOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgcGxhY2Vob2xkZXI6IFByb3BUeXBlcy5hbnksXG4gICAgcHJlcGVuZDogUHJvcFR5cGVzLmFueSxcbiAgICBwcmVwZW5kVGV4dDogUHJvcFR5cGVzLmFueSxcbiAgICBzbWFsbDogUHJvcFR5cGVzLmJvb2wsXG4gICAgdHlwZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICB3cmFwcGVyQ2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGFwcGVuZCxcbiAgICAgIGFwcGVuZFRleHQsXG4gICAgICBhdHRyaWJ1dGUsXG4gICAgICBjbGFzc05hbWUsXG4gICAgICBjdXJyZW5jaWVzQ29sbGVjdGlvbixcbiAgICAgIGN1cnJlbmN5TmFtZSxcbiAgICAgIGhpbnQsXG4gICAgICBoaW50Qm90dG9tLFxuICAgICAgaWQsXG4gICAgICBpbnB1dENsYXNzTmFtZSxcbiAgICAgIGlucHV0UHJvcHMsXG4gICAgICBpbnB1dFJlZixcbiAgICAgIGxhYmVsLFxuICAgICAgbGFiZWxDbGFzc05hbWUsXG4gICAgICBtb2RlbCxcbiAgICAgIG5hbWUsXG4gICAgICBwcmVwZW5kLFxuICAgICAgcHJlcGVuZFRleHQsXG4gICAgICB0eXBlLFxuICAgICAgd3JhcHBlckNsYXNzTmFtZSxcbiAgICAgIHdyYXBwZXJPcHRzLFxuICAgICAgLi4ucmVzdFByb3BzXG4gICAgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB7cmVmLCAuLi5mb3J3YXJkZWRJbnB1dFByb3BzfSA9IGlucHV0UHJvcHNcbiAgICBjb25zdCB7ZXJyb3JzfSA9IGRpZ3Mod3JhcHBlck9wdHMsIFwiZXJyb3JzXCIpXG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e3RoaXMud3JhcHBlckNsYXNzTmFtZSgpfSByZWY9e3RoaXMucHJvcHMud3JhcHBlclJlZn0+XG4gICAgICAgIHt3cmFwcGVyT3B0cy5sYWJlbCAmJlxuICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9e3RoaXMubGFiZWxDbGFzc05hbWUoKX0gaHRtbEZvcj17aW5wdXRQcm9wcy5pZH0+XG4gICAgICAgICAgICB7d3JhcHBlck9wdHMubGFiZWx9XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgfVxuICAgICAgICB7aGludCAmJlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvcm0tdGV4dCB0ZXh0LW11dGVkIGZvbnQtc21vb3RoaW5nIGZvbnQteHNcIj5cbiAgICAgICAgICAgIHtoaW50fVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgfVxuICAgICAgICB7dHlwZSA9PSBcIm1vbmV5XCIgJiZcbiAgICAgICAgICA8TW9uZXlcbiAgICAgICAgICAgIGNsYXNzTmFtZT17dGhpcy5pbnB1dENsYXNzTmFtZSgpfVxuICAgICAgICAgICAgbmFtZT17aW5wdXRQcm9wcy5uYW1lfVxuICAgICAgICAgICAgcmVmPXt0aGlzLnByb3BzLm1vbmV5UmVmfVxuICAgICAgICAgICAgey4uLnRoaXMubW9uZXlQcm9wcygpfVxuICAgICAgICAgIC8+XG4gICAgICAgIH1cbiAgICAgICAge3R5cGUgIT0gXCJtb25leVwiICYmXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnB1dC1ncm91cFwiPlxuICAgICAgICAgICAgeyhwcmVwZW5kIHx8IHByZXBlbmRUZXh0KSAmJlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlucHV0LWdyb3VwLXByZXBlbmRcIj5cbiAgICAgICAgICAgICAgICB7cHJlcGVuZFRleHQgJiZcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImlucHV0LWdyb3VwLXRleHRcIj5cbiAgICAgICAgICAgICAgICAgICAge3ByZXBlbmRUZXh0fVxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB7cHJlcGVuZH1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgYXR0cmlidXRlPXthdHRyaWJ1dGV9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17dGhpcy5pbnB1dENsYXNzTmFtZSgpfVxuICAgICAgICAgICAgICBpbnB1dFByb3BzPXtpbnB1dFByb3BzfVxuICAgICAgICAgICAgICBtb2RlbD17bW9kZWx9XG4gICAgICAgICAgICAgIHdyYXBwZXJPcHRzPXt3cmFwcGVyT3B0c31cbiAgICAgICAgICAgICAgey4uLmZvcndhcmRlZElucHV0UHJvcHN9XG4gICAgICAgICAgICAgIHsuLi5yZXN0UHJvcHN9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgeyhhcHBlbmQgfHwgYXBwZW5kVGV4dCkgJiZcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnB1dC1ncm91cC1hcHBlbmRcIj5cbiAgICAgICAgICAgICAgICB7YXBwZW5kVGV4dCAmJlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaW5wdXQtZ3JvdXAtdGV4dFwiPlxuICAgICAgICAgICAgICAgICAgICB7YXBwZW5kVGV4dH1cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAge2FwcGVuZH1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB7ZXJyb3JzLmxlbmd0aCA+IDAgJiYgPEludmFsaWRGZWVkYmFjayBlcnJvcnM9e2Vycm9yc30gLz59XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAge2hpbnRCb3R0b20gJiZcbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb3JtLXRleHQgdGV4dC1tdXRlZCBmb250LXNtb290aGluZyBmb250LXhzXCI+XG4gICAgICAgICAgICB7aGludEJvdHRvbX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIH1cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxuXG4gIGlucHV0Q2xhc3NOYW1lICgpIHtcbiAgICBjb25zdCBjbGFzc05hbWVzID0gW1wiZm9ybS1jb250cm9sXCJdXG5cbiAgICBpZiAodGhpcy5wcm9wcy5jbGFzc05hbWUpXG4gICAgICBjbGFzc05hbWVzLnB1c2godGhpcy5wcm9wcy5jbGFzc05hbWUpXG5cbiAgICBpZiAodGhpcy5wcm9wcy53cmFwcGVyT3B0cy5lcnJvcnMubGVuZ3RoID4gMClcbiAgICAgIGNsYXNzTmFtZXMucHVzaChcImlzLWludmFsaWRcIilcblxuICAgIHJldHVybiBjbGFzc05hbWVzLmpvaW4oXCIgXCIpXG4gIH1cblxuICBsYWJlbENsYXNzTmFtZSAoKSB7XG4gICAgY29uc3QgY2xhc3NOYW1lcyA9IFtdXG5cbiAgICBpZiAodGhpcy5wcm9wcy5sYWJlbENsYXNzTmFtZSlcbiAgICAgIGNsYXNzTmFtZXMucHVzaCh0aGlzLnByb3BzLmxhYmVsQ2xhc3NOYW1lKVxuXG4gICAgcmV0dXJuIGNsYXNzTmFtZXMuam9pbihcIiBcIilcbiAgfVxuXG4gIG1vbmV5UHJvcHMoKSB7XG4gICAgY29uc3QgbW9uZXlQcm9wcyA9IHt9XG4gICAgY29uc3QgZm9yd2FyZGVkUHJvcHMgPSBbXCJhdHRyaWJ1dGVcIiwgXCJjdXJyZW5jaWVzQ29sbGVjdGlvblwiLCBcImN1cnJlbmN5TmFtZVwiLCBcIm1vZGVsXCIsIFwib25DaGFuZ2VcIiwgXCJwbGFjZWhvbGRlclwiLCBcInNtYWxsXCJdXG5cbiAgICBmb3IgKGNvbnN0IGZvcndhcmRlZFByb3Agb2YgZm9yd2FyZGVkUHJvcHMpIHtcbiAgICAgIGlmIChmb3J3YXJkZWRQcm9wIGluIHRoaXMucHJvcHMpIG1vbmV5UHJvcHNbZm9yd2FyZGVkUHJvcF0gPSB0aGlzLnByb3BzW2ZvcndhcmRlZFByb3BdXG4gICAgfVxuXG4gICAgY29uc3QgZm9yd2FyZGVkSW5wdXRQcm9wcyA9IFtcImRlZmF1bHRWYWx1ZVwiXVxuXG4gICAgZm9yIChjb25zdCBmb3J3YXJkZWRJbnB1dFByb3Agb2YgZm9yd2FyZGVkSW5wdXRQcm9wcykge1xuICAgICAgaWYgKGZvcndhcmRlZElucHV0UHJvcCBpbiB0aGlzLnByb3BzLmlucHV0UHJvcHMpIG1vbmV5UHJvcHNbZm9yd2FyZGVkSW5wdXRQcm9wXSA9IHRoaXMucHJvcHMuaW5wdXRQcm9wc1tmb3J3YXJkZWRJbnB1dFByb3BdXG4gICAgfVxuXG4gICAgcmV0dXJuIG1vbmV5UHJvcHNcbiAgfVxuXG4gIHdyYXBwZXJDbGFzc05hbWUgKCkge1xuICAgIGNvbnN0IGNsYXNzTmFtZXMgPSBbXCJmb3JtLWdyb3VwXCIsIFwiY29tcG9uZW50LWJvb3RzdHJhcC1zdHJpbmctaW5wdXRcIl1cblxuICAgIGlmICh0aGlzLnByb3BzLndyYXBwZXJDbGFzc05hbWUpXG4gICAgICBjbGFzc05hbWVzLnB1c2godGhpcy5wcm9wcy53cmFwcGVyQ2xhc3NOYW1lKVxuXG4gICAgcmV0dXJuIGNsYXNzTmFtZXMuam9pbihcIiBcIilcbiAgfVxufSkpXG5cbmV4cG9ydCBkZWZhdWx0IGlucHV0V3JhcHBlcihBcGlNYWtlckJvb3RzdHJhcElucHV0KVxuIl19