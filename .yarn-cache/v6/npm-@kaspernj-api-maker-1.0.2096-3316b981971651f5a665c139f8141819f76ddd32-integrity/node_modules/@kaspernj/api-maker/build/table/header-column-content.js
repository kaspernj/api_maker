import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
/* eslint-disable sort-imports */
import BaseComponent from "../base-component";
import { digs } from "diggerize";
import memo from "set-state-compare/build/memo.js";
import { View } from "react-native";
import PropTypes from "prop-types";
import propTypesExact from "prop-types-exact";
import React from "react";
import { shapeComponent } from "set-state-compare/build/shape-component.js";
import SortLink from "../bootstrap/sort-link";
import Text from "../utils/text";
export default memo(shapeComponent(class ApiMakerTableHeaderColumn extends BaseComponent {
    static propTypes = propTypesExact({
        column: PropTypes.object.isRequired,
        sortLinkProps: PropTypes.object,
        table: PropTypes.object.isRequired,
        tableSettingColumn: PropTypes.object.isRequired
    });
    render() {
        const { column, table, tableSettingColumn } = this.p;
        const { defaultParams } = table.props;
        const { styleForHeaderText } = table.tt;
        const { query } = digs(table.collection, "query");
        const columnProps = table.columnProps(column);
        return (_jsxs(View, { dataSet: this.cache("rootViewDataSet", {
                component: "api-maker/table/header-column-content",
                identifier: tableSettingColumn.identifier()
            }, [tableSettingColumn.identifier()]), style: this.cache("rootViewStyle", {
                alignItems: "center",
                display: "flex",
                flex: 1,
                flexDirection: "row",
                minWidth: 0,
                overflow: "hidden"
            }), ...columnProps, children: [tableSettingColumn.hasSortKey() && query &&
                    _jsx(SortLink, { attribute: tableSettingColumn.sortKey(), defaultParams: defaultParams, query: query, style: this.cache("sortLinkStyle", { whiteSpace: "nowrap", overflow: "hidden" }), textProps: this.cache("sortLinkTextProps", {
                            ellipsizeMode: "clip",
                            numberOfLines: 1,
                            style: this.cache("sortLinkTextStyle", 
                            // Ensure text can shrink inside constrained column widths.
                            { ...{ flexShrink: 1 }, ...styleForHeaderText() }, [styleForHeaderText()])
                        }, [styleForHeaderText()]), title: table.headerLabelForColumn(column), ...this.props.sortLinkProps }), (!tableSettingColumn.hasSortKey() || !query) &&
                    _jsx(Text, { ellipsizeMode: "clip", numberOfLines: 1, style: this.cache("headerLabelStyle", { flexShrink: 1, fontWeight: "bold" }), children: table.headerLabelForColumn(column) })] }));
    }
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVhZGVyLWNvbHVtbi1jb250ZW50LmpzIiwic291cmNlUm9vdCI6Ii9zcmMvIiwic291cmNlcyI6WyJ0YWJsZS9oZWFkZXItY29sdW1uLWNvbnRlbnQuanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxpQ0FBaUM7QUFDakMsT0FBTyxhQUFhLE1BQU0sbUJBQW1CLENBQUE7QUFDN0MsT0FBTyxFQUFDLElBQUksRUFBQyxNQUFNLFdBQVcsQ0FBQTtBQUM5QixPQUFPLElBQUksTUFBTSxpQ0FBaUMsQ0FBQTtBQUNsRCxPQUFPLEVBQUMsSUFBSSxFQUFDLE1BQU0sY0FBYyxDQUFBO0FBQ2pDLE9BQU8sU0FBUyxNQUFNLFlBQVksQ0FBQTtBQUNsQyxPQUFPLGNBQWMsTUFBTSxrQkFBa0IsQ0FBQTtBQUM3QyxPQUFPLEtBQUssTUFBTSxPQUFPLENBQUE7QUFDekIsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLDRDQUE0QyxDQUFBO0FBQ3pFLE9BQU8sUUFBUSxNQUFNLHdCQUF3QixDQUFBO0FBQzdDLE9BQU8sSUFBSSxNQUFNLGVBQWUsQ0FBQTtBQUVoQyxlQUFlLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSx5QkFBMEIsU0FBUSxhQUFhO0lBQ3RGLE1BQU0sQ0FBQyxTQUFTLEdBQUcsY0FBYyxDQUFDO1FBQ2hDLE1BQU0sRUFBRSxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVU7UUFDbkMsYUFBYSxFQUFFLFNBQVMsQ0FBQyxNQUFNO1FBQy9CLEtBQUssRUFBRSxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVU7UUFDbEMsa0JBQWtCLEVBQUUsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVO0tBQ2hELENBQUMsQ0FBQTtJQUVGLE1BQU07UUFDSixNQUFNLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxrQkFBa0IsRUFBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUE7UUFDbEQsTUFBTSxFQUFDLGFBQWEsRUFBQyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUE7UUFDbkMsTUFBTSxFQUFDLGtCQUFrQixFQUFDLEdBQUcsS0FBSyxDQUFDLEVBQUUsQ0FBQTtRQUNyQyxNQUFNLEVBQUMsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLENBQUE7UUFDL0MsTUFBTSxXQUFXLEdBQUcsS0FBSyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUU3QyxPQUFPLENBQ0wsTUFBQyxJQUFJLElBQ0gsT0FBTyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLEVBQUU7Z0JBQ3JDLFNBQVMsRUFBRSx1Q0FBdUM7Z0JBQ2xELFVBQVUsRUFBRSxrQkFBa0IsQ0FBQyxVQUFVLEVBQUU7YUFDNUMsRUFBRSxDQUFDLGtCQUFrQixDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsRUFDckMsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxFQUFFO2dCQUNqQyxVQUFVLEVBQUUsUUFBUTtnQkFDcEIsT0FBTyxFQUFFLE1BQU07Z0JBQ2YsSUFBSSxFQUFFLENBQUM7Z0JBQ1AsYUFBYSxFQUFFLEtBQUs7Z0JBQ3BCLFFBQVEsRUFBRSxDQUFDO2dCQUNYLFFBQVEsRUFBRSxRQUFRO2FBQ25CLENBQUMsS0FDRSxXQUFXLGFBRWQsa0JBQWtCLENBQUMsVUFBVSxFQUFFLElBQUksS0FBSztvQkFDdkMsS0FBQyxRQUFRLElBQ1AsU0FBUyxFQUFFLGtCQUFrQixDQUFDLE9BQU8sRUFBRSxFQUN2QyxhQUFhLEVBQUUsYUFBYSxFQUM1QixLQUFLLEVBQUUsS0FBSyxFQUNaLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxFQUFDLFVBQVUsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBQyxDQUFDLEVBQzlFLFNBQVMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLG1CQUFtQixFQUFFOzRCQUN6QyxhQUFhLEVBQUUsTUFBTTs0QkFDckIsYUFBYSxFQUFFLENBQUM7NEJBQ2hCLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUNmLG1CQUFtQjs0QkFDbkIsMkRBQTJEOzRCQUMzRCxFQUFDLEdBQUcsRUFBQyxVQUFVLEVBQUUsQ0FBQyxFQUFDLEVBQUUsR0FBRyxrQkFBa0IsRUFBRSxFQUFDLEVBQzdDLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxDQUN2Qjt5QkFDRixFQUFFLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxDQUFDLEVBQzFCLEtBQUssRUFBRSxLQUFLLENBQUMsb0JBQW9CLENBQUMsTUFBTSxDQUFDLEtBQ3JDLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxHQUM1QixFQUVILENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQztvQkFDM0MsS0FBQyxJQUFJLElBQ0gsYUFBYSxFQUFDLE1BQU0sRUFDcEIsYUFBYSxFQUFFLENBQUMsRUFDaEIsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsa0JBQWtCLEVBQUUsRUFBQyxVQUFVLEVBQUUsQ0FBQyxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUMsQ0FBQyxZQUV6RSxLQUFLLENBQUMsb0JBQW9CLENBQUMsTUFBTSxDQUFDLEdBQzlCLElBRUosQ0FDUixDQUFBO0lBQ0gsQ0FBQztDQUNGLENBQUMsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgc29ydC1pbXBvcnRzICovXG5pbXBvcnQgQmFzZUNvbXBvbmVudCBmcm9tIFwiLi4vYmFzZS1jb21wb25lbnRcIlxuaW1wb3J0IHtkaWdzfSBmcm9tIFwiZGlnZ2VyaXplXCJcbmltcG9ydCBtZW1vIGZyb20gXCJzZXQtc3RhdGUtY29tcGFyZS9idWlsZC9tZW1vLmpzXCJcbmltcG9ydCB7Vmlld30gZnJvbSBcInJlYWN0LW5hdGl2ZVwiXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCJcbmltcG9ydCBwcm9wVHlwZXNFeGFjdCBmcm9tIFwicHJvcC10eXBlcy1leGFjdFwiXG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCJcbmltcG9ydCB7c2hhcGVDb21wb25lbnR9IGZyb20gXCJzZXQtc3RhdGUtY29tcGFyZS9idWlsZC9zaGFwZS1jb21wb25lbnQuanNcIlxuaW1wb3J0IFNvcnRMaW5rIGZyb20gXCIuLi9ib290c3RyYXAvc29ydC1saW5rXCJcbmltcG9ydCBUZXh0IGZyb20gXCIuLi91dGlscy90ZXh0XCJcblxuZXhwb3J0IGRlZmF1bHQgbWVtbyhzaGFwZUNvbXBvbmVudChjbGFzcyBBcGlNYWtlclRhYmxlSGVhZGVyQ29sdW1uIGV4dGVuZHMgQmFzZUNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSBwcm9wVHlwZXNFeGFjdCh7XG4gICAgY29sdW1uOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgc29ydExpbmtQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcbiAgICB0YWJsZTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgIHRhYmxlU2V0dGluZ0NvbHVtbjogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkXG4gIH0pXG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtjb2x1bW4sIHRhYmxlLCB0YWJsZVNldHRpbmdDb2x1bW59ID0gdGhpcy5wXG4gICAgY29uc3Qge2RlZmF1bHRQYXJhbXN9ID0gdGFibGUucHJvcHNcbiAgICBjb25zdCB7c3R5bGVGb3JIZWFkZXJUZXh0fSA9IHRhYmxlLnR0XG4gICAgY29uc3Qge3F1ZXJ5fSA9IGRpZ3ModGFibGUuY29sbGVjdGlvbiwgXCJxdWVyeVwiKVxuICAgIGNvbnN0IGNvbHVtblByb3BzID0gdGFibGUuY29sdW1uUHJvcHMoY29sdW1uKVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxWaWV3XG4gICAgICAgIGRhdGFTZXQ9e3RoaXMuY2FjaGUoXCJyb290Vmlld0RhdGFTZXRcIiwge1xuICAgICAgICAgIGNvbXBvbmVudDogXCJhcGktbWFrZXIvdGFibGUvaGVhZGVyLWNvbHVtbi1jb250ZW50XCIsXG4gICAgICAgICAgaWRlbnRpZmllcjogdGFibGVTZXR0aW5nQ29sdW1uLmlkZW50aWZpZXIoKVxuICAgICAgICB9LCBbdGFibGVTZXR0aW5nQ29sdW1uLmlkZW50aWZpZXIoKV0pfVxuICAgICAgICBzdHlsZT17dGhpcy5jYWNoZShcInJvb3RWaWV3U3R5bGVcIiwge1xuICAgICAgICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG4gICAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgICAgICAgZmxleDogMSxcbiAgICAgICAgICBmbGV4RGlyZWN0aW9uOiBcInJvd1wiLFxuICAgICAgICAgIG1pbldpZHRoOiAwLFxuICAgICAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiXG4gICAgICAgIH0pfVxuICAgICAgICB7Li4uY29sdW1uUHJvcHN9XG4gICAgICA+XG4gICAgICAgIHt0YWJsZVNldHRpbmdDb2x1bW4uaGFzU29ydEtleSgpICYmIHF1ZXJ5ICYmXG4gICAgICAgICAgPFNvcnRMaW5rXG4gICAgICAgICAgICBhdHRyaWJ1dGU9e3RhYmxlU2V0dGluZ0NvbHVtbi5zb3J0S2V5KCl9XG4gICAgICAgICAgICBkZWZhdWx0UGFyYW1zPXtkZWZhdWx0UGFyYW1zfVxuICAgICAgICAgICAgcXVlcnk9e3F1ZXJ5fVxuICAgICAgICAgICAgc3R5bGU9e3RoaXMuY2FjaGUoXCJzb3J0TGlua1N0eWxlXCIsIHt3aGl0ZVNwYWNlOiBcIm5vd3JhcFwiLCBvdmVyZmxvdzogXCJoaWRkZW5cIn0pfVxuICAgICAgICAgICAgdGV4dFByb3BzPXt0aGlzLmNhY2hlKFwic29ydExpbmtUZXh0UHJvcHNcIiwge1xuICAgICAgICAgICAgICBlbGxpcHNpemVNb2RlOiBcImNsaXBcIixcbiAgICAgICAgICAgICAgbnVtYmVyT2ZMaW5lczogMSxcbiAgICAgICAgICAgICAgc3R5bGU6IHRoaXMuY2FjaGUoXG4gICAgICAgICAgICAgICAgXCJzb3J0TGlua1RleHRTdHlsZVwiLFxuICAgICAgICAgICAgICAgIC8vIEVuc3VyZSB0ZXh0IGNhbiBzaHJpbmsgaW5zaWRlIGNvbnN0cmFpbmVkIGNvbHVtbiB3aWR0aHMuXG4gICAgICAgICAgICAgICAgey4uLntmbGV4U2hyaW5rOiAxfSwgLi4uc3R5bGVGb3JIZWFkZXJUZXh0KCl9LFxuICAgICAgICAgICAgICAgIFtzdHlsZUZvckhlYWRlclRleHQoKV1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSwgW3N0eWxlRm9ySGVhZGVyVGV4dCgpXSl9XG4gICAgICAgICAgICB0aXRsZT17dGFibGUuaGVhZGVyTGFiZWxGb3JDb2x1bW4oY29sdW1uKX1cbiAgICAgICAgICAgIHsuLi50aGlzLnByb3BzLnNvcnRMaW5rUHJvcHN9XG4gICAgICAgICAgLz5cbiAgICAgICAgfVxuICAgICAgICB7KCF0YWJsZVNldHRpbmdDb2x1bW4uaGFzU29ydEtleSgpIHx8ICFxdWVyeSkgJiZcbiAgICAgICAgICA8VGV4dFxuICAgICAgICAgICAgZWxsaXBzaXplTW9kZT1cImNsaXBcIlxuICAgICAgICAgICAgbnVtYmVyT2ZMaW5lcz17MX1cbiAgICAgICAgICAgIHN0eWxlPXt0aGlzLmNhY2hlKFwiaGVhZGVyTGFiZWxTdHlsZVwiLCB7ZmxleFNocmluazogMSwgZm9udFdlaWdodDogXCJib2xkXCJ9KX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7dGFibGUuaGVhZGVyTGFiZWxGb3JDb2x1bW4oY29sdW1uKX1cbiAgICAgICAgICA8L1RleHQ+XG4gICAgICAgIH1cbiAgICAgIDwvVmlldz5cbiAgICApXG4gIH1cbn0pKVxuIl19