/* eslint-disable func-style */
import { camelize } from "inflection";
import useQueryParams from "on-location-changed/build/use-query-params.js";
/**
 * @returns {object}
 */
function calculateQParams(defaultParams, queryParams, searchKey) {
    if (searchKey in queryParams) {
        return JSON.parse(queryParams[searchKey]);
    }
    else if (defaultParams) {
        return { ...defaultParams };
    }
    return {};
}
/**
 * @param {object} args
 * @param {object} args.defaultParams
 * @param {import("../collection.js").default} args.query
 * @returns {{
 *   qParams: object
 *   searchKey: string,
 *   sortAttribute: string,
 *   sortMode: string
 * }}
 */
export default function useSorting({ defaultParams, query }) {
    const queryParams = useQueryParams();
    const searchKey = query.queryArgs.searchKey || "q";
    const qParams = calculateQParams(defaultParams, queryParams, searchKey);
    let matchSortParam;
    if (typeof qParams.s == "string") {
        matchSortParam = qParams.s?.match(/^(.+?)( asc| desc|)$/);
    }
    const sortAttribute = matchSortParam ? camelize(matchSortParam[1], true) : null;
    const sortMode = matchSortParam ? matchSortParam[2].trim() : null;
    return {
        qParams,
        searchKey,
        sortAttribute,
        sortMode
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlLXNvcnRpbmcuanMiLCJzb3VyY2VSb290IjoiL3NyYy8iLCJzb3VyY2VzIjpbInRhYmxlL3VzZS1zb3J0aW5nLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLCtCQUErQjtBQUMvQixPQUFPLEVBQUMsUUFBUSxFQUFDLE1BQU0sWUFBWSxDQUFBO0FBQ25DLE9BQU8sY0FBYyxNQUFNLCtDQUErQyxDQUFBO0FBRTFFOztHQUVHO0FBQ0gsU0FBUyxnQkFBZ0IsQ0FBQyxhQUFhLEVBQUUsV0FBVyxFQUFFLFNBQVM7SUFDN0QsSUFBSSxTQUFTLElBQUksV0FBVyxFQUFFLENBQUM7UUFDN0IsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFBO0lBQzNDLENBQUM7U0FBTSxJQUFJLGFBQWEsRUFBRSxDQUFDO1FBQ3pCLE9BQU8sRUFBQyxHQUFHLGFBQWEsRUFBQyxDQUFBO0lBQzNCLENBQUM7SUFFRCxPQUFPLEVBQUUsQ0FBQTtBQUNYLENBQUM7QUFFRDs7Ozs7Ozs7OztHQVVHO0FBQ0gsTUFBTSxDQUFDLE9BQU8sVUFBVSxVQUFVLENBQUMsRUFBQyxhQUFhLEVBQUUsS0FBSyxFQUFDO0lBQ3ZELE1BQU0sV0FBVyxHQUFHLGNBQWMsRUFBRSxDQUFBO0lBQ3BDLE1BQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsU0FBUyxJQUFJLEdBQUcsQ0FBQTtJQUNsRCxNQUFNLE9BQU8sR0FBRyxnQkFBZ0IsQ0FBQyxhQUFhLEVBQUUsV0FBVyxFQUFFLFNBQVMsQ0FBQyxDQUFBO0lBQ3ZFLElBQUksY0FBYyxDQUFBO0lBRWxCLElBQUksT0FBTyxPQUFPLENBQUMsQ0FBQyxJQUFJLFFBQVEsRUFBRSxDQUFDO1FBQ2pDLGNBQWMsR0FBRyxPQUFPLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxDQUFBO0lBQzNELENBQUM7SUFFRCxNQUFNLGFBQWEsR0FBRyxjQUFjLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQTtJQUMvRSxNQUFNLFFBQVEsR0FBRyxjQUFjLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFBO0lBRWpFLE9BQU87UUFDTCxPQUFPO1FBQ1AsU0FBUztRQUNULGFBQWE7UUFDYixRQUFRO0tBQ1QsQ0FBQTtBQUNILENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBmdW5jLXN0eWxlICovXG5pbXBvcnQge2NhbWVsaXplfSBmcm9tIFwiaW5mbGVjdGlvblwiXG5pbXBvcnQgdXNlUXVlcnlQYXJhbXMgZnJvbSBcIm9uLWxvY2F0aW9uLWNoYW5nZWQvYnVpbGQvdXNlLXF1ZXJ5LXBhcmFtcy5qc1wiXG5cbi8qKlxuICogQHJldHVybnMge29iamVjdH1cbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlUVBhcmFtcyhkZWZhdWx0UGFyYW1zLCBxdWVyeVBhcmFtcywgc2VhcmNoS2V5KSB7XG4gIGlmIChzZWFyY2hLZXkgaW4gcXVlcnlQYXJhbXMpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShxdWVyeVBhcmFtc1tzZWFyY2hLZXldKVxuICB9IGVsc2UgaWYgKGRlZmF1bHRQYXJhbXMpIHtcbiAgICByZXR1cm4gey4uLmRlZmF1bHRQYXJhbXN9XG4gIH1cblxuICByZXR1cm4ge31cbn1cblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gYXJnc1xuICogQHBhcmFtIHtvYmplY3R9IGFyZ3MuZGVmYXVsdFBhcmFtc1xuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb2xsZWN0aW9uLmpzXCIpLmRlZmF1bHR9IGFyZ3MucXVlcnlcbiAqIEByZXR1cm5zIHt7XG4gKiAgIHFQYXJhbXM6IG9iamVjdFxuICogICBzZWFyY2hLZXk6IHN0cmluZyxcbiAqICAgc29ydEF0dHJpYnV0ZTogc3RyaW5nLFxuICogICBzb3J0TW9kZTogc3RyaW5nXG4gKiB9fVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VTb3J0aW5nKHtkZWZhdWx0UGFyYW1zLCBxdWVyeX0pIHtcbiAgY29uc3QgcXVlcnlQYXJhbXMgPSB1c2VRdWVyeVBhcmFtcygpXG4gIGNvbnN0IHNlYXJjaEtleSA9IHF1ZXJ5LnF1ZXJ5QXJncy5zZWFyY2hLZXkgfHwgXCJxXCJcbiAgY29uc3QgcVBhcmFtcyA9IGNhbGN1bGF0ZVFQYXJhbXMoZGVmYXVsdFBhcmFtcywgcXVlcnlQYXJhbXMsIHNlYXJjaEtleSlcbiAgbGV0IG1hdGNoU29ydFBhcmFtXG5cbiAgaWYgKHR5cGVvZiBxUGFyYW1zLnMgPT0gXCJzdHJpbmdcIikge1xuICAgIG1hdGNoU29ydFBhcmFtID0gcVBhcmFtcy5zPy5tYXRjaCgvXiguKz8pKCBhc2N8IGRlc2N8KSQvKVxuICB9XG5cbiAgY29uc3Qgc29ydEF0dHJpYnV0ZSA9IG1hdGNoU29ydFBhcmFtID8gY2FtZWxpemUobWF0Y2hTb3J0UGFyYW1bMV0sIHRydWUpIDogbnVsbFxuICBjb25zdCBzb3J0TW9kZSA9IG1hdGNoU29ydFBhcmFtID8gbWF0Y2hTb3J0UGFyYW1bMl0udHJpbSgpIDogbnVsbFxuXG4gIHJldHVybiB7XG4gICAgcVBhcmFtcyxcbiAgICBzZWFyY2hLZXksXG4gICAgc29ydEF0dHJpYnV0ZSxcbiAgICBzb3J0TW9kZVxuICB9XG59XG4iXX0=