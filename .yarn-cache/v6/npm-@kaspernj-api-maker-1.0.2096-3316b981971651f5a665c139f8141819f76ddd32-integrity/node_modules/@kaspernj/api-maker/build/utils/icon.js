import { jsx as _jsx } from "react/jsx-runtime";
/* eslint-disable no-multi-spaces, prefer-object-spread, sort-imports */
import BaseComponent from "../base-component";
import FontAwesomeIcon from "react-native-vector-icons/FontAwesome.js";
import FontAwesome5Icon from "react-native-vector-icons/FontAwesome5.js";
import FontAwesome6Icon from "react-native-vector-icons/FontAwesome6.js";
import MaterialIconsIcon from "react-native-vector-icons/MaterialIcons.js";
import memo from "set-state-compare/build/memo.js";
import PropTypes from "prop-types";
import React, { useMemo } from "react";
import { StyleSheet } from "react-native";
import { shapeComponent } from "set-state-compare/build/shape-component.js";
import { useMergedStyle } from "./default-style";
const FontAwesomeGlyphMap = FontAwesomeIcon.getRawGlyphMap();
const FontAwesome5GlyphMap = FontAwesome5Icon.getRawGlyphMap();
const FontAwesome6GlyphMap = FontAwesome6Icon.getRawGlyphMap();
const MaterialIconsGlyphMap = MaterialIconsIcon.getRawGlyphMap();
const iconMap = {
    pencil: "FontAwesome",
    remove: "FontAwesome",
    search: "FontAwesome"
};
/**
 * @typedef {object} ApiMakerUtilsIconProps
 * @property {string|number=} color
 * @property {object=} dataSet
 * @property {string} name
 * @property {number=} size
 * @property {import("react-native").StyleProp<import("react-native").TextStyle>=} style Only `color` is forwarded.
 * @property {("FontAwesome"|"FontAwesome5"|"FontAwesome6"|"MaterialIcons")=} version
 */
export default memo(shapeComponent(class ApiMakerUtilsIcon extends BaseComponent {
    /** @type {ApiMakerUtilsIconProps} */
    static propTypes = {
        color: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),
        dataSet: PropTypes.object,
        name: PropTypes.string.isRequired,
        size: PropTypes.number,
        style: PropTypes.oneOfType([PropTypes.object, PropTypes.array, PropTypes.number]),
        version: PropTypes.oneOf(["FontAwesome", "FontAwesome5", "FontAwesome6", "MaterialIcons"])
    };
    render() {
        const { dataSet, name, style, version, ...restProps } = this.props;
        const { stylesList: inheritedStylesList } = useMergedStyle(null, "Text");
        let actualVersion = version;
        if (!actualVersion) {
            if (name in iconMap) {
                actualVersion = iconMap[name];
            }
            else if (name in FontAwesome6GlyphMap) {
                actualVersion = "FontAwesome6";
            }
            else if (name in FontAwesome5GlyphMap) {
                actualVersion = "FontAwesome5";
            }
            else if (name in FontAwesomeGlyphMap) {
                actualVersion = "FontAwesome";
            }
            else if (name in MaterialIconsGlyphMap) {
                actualVersion = "MaterialIcons";
            }
            else {
                actualVersion = "FontAwesome";
            }
        }
        // Only forward some styles like color from inherited Text styles.
        const actualStylesList = useMemo(() => {
            const actualStylesList = [];
            for (const inheritedStyle of inheritedStylesList) {
                const flattenedStyle = StyleSheet.flatten(inheritedStyle) || {};
                if ("color" in flattenedStyle) {
                    actualStylesList.push({ color: flattenedStyle.color });
                }
            }
            if (Array.isArray(style)) {
                for (const propStyle of style) {
                    if (propStyle) {
                        actualStylesList.push(propStyle);
                    }
                }
            }
            else if (style) {
                actualStylesList.push(style);
            }
            return actualStylesList;
        }, [inheritedStylesList, style]);
        const actualDataSet = useMemo(() => Object.assign({ name, version: actualVersion }, dataSet), [actualVersion, dataSet, name]);
        if (actualVersion == "FontAwesome") {
            return _jsx(FontAwesomeIcon, { dataSet: actualDataSet, name: name, style: actualStylesList, ...restProps });
        }
        else if (actualVersion == "FontAwesome5") {
            return _jsx(FontAwesome5Icon, { dataSet: actualDataSet, name: name, style: actualStylesList, ...restProps });
        }
        else if (actualVersion == "FontAwesome6") {
            return _jsx(FontAwesome6Icon, { dataSet: actualDataSet, name: name, style: actualStylesList, ...restProps });
        }
        else if (actualVersion == "MaterialIcons") {
            return _jsx(MaterialIconsIcon, { dataSet: actualDataSet, name: name, style: actualStylesList, ...restProps });
        }
        else {
            throw new Error(`Unknown version: ${actualVersion}`);
        }
    }
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWNvbi5qcyIsInNvdXJjZVJvb3QiOiIvc3JjLyIsInNvdXJjZXMiOlsidXRpbHMvaWNvbi5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLHdFQUF3RTtBQUN4RSxPQUFPLGFBQWEsTUFBTSxtQkFBbUIsQ0FBQTtBQUM3QyxPQUFPLGVBQWUsTUFBTSwwQ0FBMEMsQ0FBQTtBQUN0RSxPQUFPLGdCQUFnQixNQUFNLDJDQUEyQyxDQUFBO0FBQ3hFLE9BQU8sZ0JBQWdCLE1BQU0sMkNBQTJDLENBQUE7QUFDeEUsT0FBTyxpQkFBaUIsTUFBTSw0Q0FBNEMsQ0FBQTtBQUMxRSxPQUFPLElBQUksTUFBTSxpQ0FBaUMsQ0FBQTtBQUNsRCxPQUFPLFNBQVMsTUFBTSxZQUFZLENBQUE7QUFDbEMsT0FBTyxLQUFLLEVBQUUsRUFBQyxPQUFPLEVBQUMsTUFBTSxPQUFPLENBQUE7QUFDcEMsT0FBTyxFQUFDLFVBQVUsRUFBQyxNQUFNLGNBQWMsQ0FBQTtBQUN2QyxPQUFPLEVBQUMsY0FBYyxFQUFDLE1BQU0sNENBQTRDLENBQUE7QUFDekUsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLGlCQUFpQixDQUFBO0FBRTlDLE1BQU0sbUJBQW1CLEdBQUcsZUFBZSxDQUFDLGNBQWMsRUFBRSxDQUFBO0FBQzVELE1BQU0sb0JBQW9CLEdBQUcsZ0JBQWdCLENBQUMsY0FBYyxFQUFFLENBQUE7QUFDOUQsTUFBTSxvQkFBb0IsR0FBRyxnQkFBZ0IsQ0FBQyxjQUFjLEVBQUUsQ0FBQTtBQUM5RCxNQUFNLHFCQUFxQixHQUFHLGlCQUFpQixDQUFDLGNBQWMsRUFBRSxDQUFBO0FBRWhFLE1BQU0sT0FBTyxHQUFHO0lBQ2QsTUFBTSxFQUFFLGFBQWE7SUFDckIsTUFBTSxFQUFFLGFBQWE7SUFDckIsTUFBTSxFQUFFLGFBQWE7Q0FDdEIsQ0FBQTtBQUVEOzs7Ozs7OztHQVFHO0FBQ0gsZUFBZSxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0saUJBQWtCLFNBQVEsYUFBYTtJQUM5RSxxQ0FB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LWRpc2FibGUgbm8tbXVsdGktc3BhY2VzLCBwcmVmZXItb2JqZWN0LXNwcmVhZCwgc29ydC1pbXBvcnRzICovXG5pbXBvcnQgQmFzZUNvbXBvbmVudCBmcm9tIFwiLi4vYmFzZS1jb21wb25lbnRcIlxuaW1wb3J0IEZvbnRBd2Vzb21lSWNvbiBmcm9tIFwicmVhY3QtbmF0aXZlLXZlY3Rvci1pY29ucy9Gb250QXdlc29tZS5qc1wiXG5pbXBvcnQgRm9udEF3ZXNvbWU1SWNvbiBmcm9tIFwicmVhY3QtbmF0aXZlLXZlY3Rvci1pY29ucy9Gb250QXdlc29tZTUuanNcIlxuaW1wb3J0IEZvbnRBd2Vzb21lNkljb24gZnJvbSBcInJlYWN0LW5hdGl2ZS12ZWN0b3ItaWNvbnMvRm9udEF3ZXNvbWU2LmpzXCJcbmltcG9ydCBNYXRlcmlhbEljb25zSWNvbiBmcm9tIFwicmVhY3QtbmF0aXZlLXZlY3Rvci1pY29ucy9NYXRlcmlhbEljb25zLmpzXCJcbmltcG9ydCBtZW1vIGZyb20gXCJzZXQtc3RhdGUtY29tcGFyZS9idWlsZC9tZW1vLmpzXCJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIlxuaW1wb3J0IFJlYWN0LCB7dXNlTWVtb30gZnJvbSBcInJlYWN0XCJcbmltcG9ydCB7U3R5bGVTaGVldH0gZnJvbSBcInJlYWN0LW5hdGl2ZVwiXG5pbXBvcnQge3NoYXBlQ29tcG9uZW50fSBmcm9tIFwic2V0LXN0YXRlLWNvbXBhcmUvYnVpbGQvc2hhcGUtY29tcG9uZW50LmpzXCJcbmltcG9ydCB7dXNlTWVyZ2VkU3R5bGV9IGZyb20gXCIuL2RlZmF1bHQtc3R5bGVcIlxuXG5jb25zdCBGb250QXdlc29tZUdseXBoTWFwID0gRm9udEF3ZXNvbWVJY29uLmdldFJhd0dseXBoTWFwKClcbmNvbnN0IEZvbnRBd2Vzb21lNUdseXBoTWFwID0gRm9udEF3ZXNvbWU1SWNvbi5nZXRSYXdHbHlwaE1hcCgpXG5jb25zdCBGb250QXdlc29tZTZHbHlwaE1hcCA9IEZvbnRBd2Vzb21lNkljb24uZ2V0UmF3R2x5cGhNYXAoKVxuY29uc3QgTWF0ZXJpYWxJY29uc0dseXBoTWFwID0gTWF0ZXJpYWxJY29uc0ljb24uZ2V0UmF3R2x5cGhNYXAoKVxuXG5jb25zdCBpY29uTWFwID0ge1xuICBwZW5jaWw6IFwiRm9udEF3ZXNvbWVcIixcbiAgcmVtb3ZlOiBcIkZvbnRBd2Vzb21lXCIsXG4gIHNlYXJjaDogXCJGb250QXdlc29tZVwiXG59XG5cbi8qKlxuICogQHR5cGVkZWYge29iamVjdH0gQXBpTWFrZXJVdGlsc0ljb25Qcm9wc1xuICogQHByb3BlcnR5IHtzdHJpbmd8bnVtYmVyPX0gY29sb3JcbiAqIEBwcm9wZXJ0eSB7b2JqZWN0PX0gZGF0YVNldFxuICogQHByb3BlcnR5IHtzdHJpbmd9IG5hbWVcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyPX0gc2l6ZVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCJyZWFjdC1uYXRpdmVcIikuU3R5bGVQcm9wPGltcG9ydChcInJlYWN0LW5hdGl2ZVwiKS5UZXh0U3R5bGU+PX0gc3R5bGUgT25seSBgY29sb3JgIGlzIGZvcndhcmRlZC5cbiAqIEBwcm9wZXJ0eSB7KFwiRm9udEF3ZXNvbWVcInxcIkZvbnRBd2Vzb21lNVwifFwiRm9udEF3ZXNvbWU2XCJ8XCJNYXRlcmlhbEljb25zXCIpPX0gdmVyc2lvblxuICovXG5leHBvcnQgZGVmYXVsdCBtZW1vKHNoYXBlQ29tcG9uZW50KGNsYXNzIEFwaU1ha2VyVXRpbHNJY29uIGV4dGVuZHMgQmFzZUNvbXBvbmVudCB7XG4gIC8qKiBAdHlwZSB7QXBpTWFrZXJVdGlsc0ljb25Qcm9wc30gKi9cbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBjb2xvcjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLm51bWJlciwgUHJvcFR5cGVzLnN0cmluZ10pLFxuICAgIGRhdGFTZXQ6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgbmFtZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIHNpemU6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgc3R5bGU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5vYmplY3QsIFByb3BUeXBlcy5hcnJheSwgUHJvcFR5cGVzLm51bWJlcl0pLFxuICAgIHZlcnNpb246IFByb3BUeXBlcy5vbmVPZihbXCJGb250QXdlc29tZVwiLCBcIkZvbnRBd2Vzb21lNVwiLCBcIkZvbnRBd2Vzb21lNlwiLCBcIk1hdGVyaWFsSWNvbnNcIl0pXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge2RhdGFTZXQsIG5hbWUsIHN0eWxlLCB2ZXJzaW9uLCAuLi5yZXN0UHJvcHN9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHtzdHlsZXNMaXN0OiBpbmhlcml0ZWRTdHlsZXNMaXN0fSA9IHVzZU1lcmdlZFN0eWxlKG51bGwsIFwiVGV4dFwiKVxuICAgIGxldCBhY3R1YWxWZXJzaW9uID0gdmVyc2lvblxuXG4gICAgaWYgKCFhY3R1YWxWZXJzaW9uKSB7XG4gICAgICBpZiAobmFtZSBpbiBpY29uTWFwKSB7XG4gICAgICAgIGFjdHVhbFZlcnNpb24gPSBpY29uTWFwW25hbWVdXG4gICAgICB9IGVsc2UgaWYgKG5hbWUgaW4gRm9udEF3ZXNvbWU2R2x5cGhNYXApIHtcbiAgICAgICAgYWN0dWFsVmVyc2lvbiA9IFwiRm9udEF3ZXNvbWU2XCJcbiAgICAgIH0gZWxzZSBpZiAobmFtZSBpbiBGb250QXdlc29tZTVHbHlwaE1hcCkge1xuICAgICAgICBhY3R1YWxWZXJzaW9uID0gXCJGb250QXdlc29tZTVcIlxuICAgICAgfSBlbHNlIGlmIChuYW1lIGluIEZvbnRBd2Vzb21lR2x5cGhNYXApIHtcbiAgICAgICAgYWN0dWFsVmVyc2lvbiA9IFwiRm9udEF3ZXNvbWVcIlxuICAgICAgfSBlbHNlIGlmIChuYW1lIGluIE1hdGVyaWFsSWNvbnNHbHlwaE1hcCkge1xuICAgICAgICBhY3R1YWxWZXJzaW9uID0gIFwiTWF0ZXJpYWxJY29uc1wiXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY3R1YWxWZXJzaW9uID0gXCJGb250QXdlc29tZVwiXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gT25seSBmb3J3YXJkIHNvbWUgc3R5bGVzIGxpa2UgY29sb3IgZnJvbSBpbmhlcml0ZWQgVGV4dCBzdHlsZXMuXG4gICAgY29uc3QgYWN0dWFsU3R5bGVzTGlzdCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgICAgY29uc3QgYWN0dWFsU3R5bGVzTGlzdCA9IFtdXG5cbiAgICAgIGZvciAoY29uc3QgaW5oZXJpdGVkU3R5bGUgb2YgaW5oZXJpdGVkU3R5bGVzTGlzdCkge1xuICAgICAgICBjb25zdCBmbGF0dGVuZWRTdHlsZSA9IFN0eWxlU2hlZXQuZmxhdHRlbihpbmhlcml0ZWRTdHlsZSkgfHwge31cblxuICAgICAgICBpZiAoXCJjb2xvclwiIGluIGZsYXR0ZW5lZFN0eWxlKSB7XG4gICAgICAgICAgYWN0dWFsU3R5bGVzTGlzdC5wdXNoKHtjb2xvcjogZmxhdHRlbmVkU3R5bGUuY29sb3J9KVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHN0eWxlKSkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb3BTdHlsZSBvZiBzdHlsZSkge1xuICAgICAgICAgIGlmIChwcm9wU3R5bGUpIHtcbiAgICAgICAgICAgIGFjdHVhbFN0eWxlc0xpc3QucHVzaChwcm9wU3R5bGUpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHN0eWxlKSB7XG4gICAgICAgIGFjdHVhbFN0eWxlc0xpc3QucHVzaChzdHlsZSlcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFjdHVhbFN0eWxlc0xpc3RcbiAgICB9LCBbaW5oZXJpdGVkU3R5bGVzTGlzdCwgc3R5bGVdKVxuXG4gICAgY29uc3QgYWN0dWFsRGF0YVNldCA9IHVzZU1lbW8oKCkgPT4gT2JqZWN0LmFzc2lnbih7bmFtZSwgdmVyc2lvbjogYWN0dWFsVmVyc2lvbn0sIGRhdGFTZXQpLCBbYWN0dWFsVmVyc2lvbiwgZGF0YVNldCwgbmFtZV0pXG5cbiAgICBpZiAoYWN0dWFsVmVyc2lvbiA9PSBcIkZvbnRBd2Vzb21lXCIpIHtcbiAgICAgIHJldHVybiA8Rm9udEF3ZXNvbWVJY29uIGRhdGFTZXQ9e2FjdHVhbERhdGFTZXR9IG5hbWU9e25hbWV9IHN0eWxlPXthY3R1YWxTdHlsZXNMaXN0fSB7Li4ucmVzdFByb3BzfSAvPlxuICAgIH0gZWxzZSBpZiAoYWN0dWFsVmVyc2lvbiA9PSBcIkZvbnRBd2Vzb21lNVwiKSB7XG4gICAgICByZXR1cm4gPEZvbnRBd2Vzb21lNUljb24gZGF0YVNldD17YWN0dWFsRGF0YVNldH0gbmFtZT17bmFtZX0gc3R5bGU9e2FjdHVhbFN0eWxlc0xpc3R9IHsuLi5yZXN0UHJvcHN9IC8+XG4gICAgfSBlbHNlIGlmIChhY3R1YWxWZXJzaW9uID09IFwiRm9udEF3ZXNvbWU2XCIpIHtcbiAgICAgIHJldHVybiA8Rm9udEF3ZXNvbWU2SWNvbiBkYXRhU2V0PXthY3R1YWxEYXRhU2V0fSBuYW1lPXtuYW1lfSBzdHlsZT17YWN0dWFsU3R5bGVzTGlzdH0gey4uLnJlc3RQcm9wc30gLz5cbiAgICB9IGVsc2UgaWYgKGFjdHVhbFZlcnNpb24gPT0gXCJNYXRlcmlhbEljb25zXCIpIHtcbiAgICAgIHJldHVybiA8TWF0ZXJpYWxJY29uc0ljb24gZGF0YVNldD17YWN0dWFsRGF0YVNldH0gbmFtZT17bmFtZX0gc3R5bGU9e2FjdHVhbFN0eWxlc0xpc3R9IHsuLi5yZXN0UHJvcHN9IC8+XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biB2ZXJzaW9uOiAke2FjdHVhbFZlcnNpb259YClcbiAgICB9XG4gIH1cbn0pKVxuIl19