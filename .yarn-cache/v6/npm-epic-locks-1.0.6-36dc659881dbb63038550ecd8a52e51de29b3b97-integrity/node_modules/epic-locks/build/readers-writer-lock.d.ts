/**
 * @typedef {Object} ReadersWriterLockOptions
 * @property {boolean} [debug]
 */
/**
 * Readers-writer lock with read priority.
 */
export default class ReadersWriterLock {
    /**
     * @param {ReadersWriterLockOptions} [args]
     */
    constructor(args?: ReadersWriterLockOptions);
    _debug: boolean | undefined;
    _readers: number;
    _writers: number;
    _processQueueTimeout: NodeJS.Timeout | null;
    /** @type {Array<ReadersWriterQueueItem<unknown>>} */
    _readQueue: Array<ReadersWriterQueueItem<unknown>>;
    /** @type {Array<ReadersWriterQueueItem<unknown>>} */
    _writeQueue: Array<ReadersWriterQueueItem<unknown>>;
    /**
     * Run a job with shared read access.
     * @template T
     * @param {(() => (T | Promise<T>))} [callback]
     * @returns {Promise<T | undefined>}
     */
    read<T>(callback?: (() => (T | Promise<T>))): Promise<T | undefined>;
    /**
     * Run a job with exclusive write access.
     * @template T
     * @param {(() => (T | Promise<T>))} [callback]
     * @returns {Promise<T | undefined>}
     */
    write<T>(callback?: (() => (T | Promise<T>))): Promise<T | undefined>;
    /**
     * @template T
     * @param {(() => (T | Promise<T>))} [callback]
     * @returns {Promise<T | undefined>}
     */
    runReadJobInstantly<T>(callback?: (() => (T | Promise<T>))): Promise<T | undefined>;
    /**
     * @template T
     * @param {(() => (T | Promise<T>))} [callback]
     * @returns {Promise<T | undefined>}
     */
    runWriteJobInstantly<T>(callback?: (() => (T | Promise<T>))): Promise<T | undefined>;
    /**
     * @param {string} message
     * @returns {void}
     */
    _log(message: string): void;
    /**
     * @param {ReadersWriterQueueItem<unknown>} item
     * @returns {void}
     */
    _readWithResolve(item: ReadersWriterQueueItem<unknown>): void;
    /**
     * @param {ReadersWriterQueueItem<unknown>} item
     * @returns {void}
     */
    _writeWithResolve(item: ReadersWriterQueueItem<unknown>): void;
    /**
     * @param {ReadersWriterQueueItem<unknown>} item
     * @returns {Promise<void>}
     */
    _processRead(item: ReadersWriterQueueItem<unknown>): Promise<void>;
    /**
     * @param {ReadersWriterQueueItem<unknown>} item
     * @returns {Promise<void>}
     */
    _processWrite(item: ReadersWriterQueueItem<unknown>): Promise<void>;
    /**
     * @returns {void}
     */
    _processQueueLater(): void;
    /**
     * @returns {void}
     */
    _processQueue: () => void;
}
export type ReadersWriterLockOptions = {
    debug?: boolean | undefined;
};
export type ReadersWriterQueueItem<T> = {
    callback: (() => (T | Promise<T>)) | undefined;
    resolve: (value: T | undefined) => void;
    reject: (error: unknown) => void;
};
//# sourceMappingURL=readers-writer-lock.d.ts.map